<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 8.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="TestKun: dual mode FF off SH and MAMSDK: works but pop up a alert sdk初始化当前的逻辑，默认是加载初始化mdx sdk Situation1  mdx初始化 switch to mamsdk   大致流程  以legacy mode load and initialize  sync Securehub读取mamsdk 数据  再">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Mamsdk%20dual%20mode%20switching/mamsdk%20alert/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="TestKun: dual mode FF off SH and MAMSDK: works but pop up a alert sdk初始化当前的逻辑，默认是加载初始化mdx sdk Situation1  mdx初始化 switch to mamsdk   大致流程  以legacy mode load and initialize  sync Securehub读取mamsdk 数据  再">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/Users/junkangd/Library/Application%20Support/typora-user-images/image-20230207104504355.png">
<meta property="article:published_time" content="2025-11-26T07:30:03.178Z">
<meta property="article:modified_time" content="2025-11-26T07:30:03.179Z">
<meta property="article:author" content="Supremes">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/Users/junkangd/Library/Application%20Support/typora-user-images/image-20230207104504355.png">


<link rel="canonical" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Mamsdk%20dual%20mode%20switching/mamsdk%20alert/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Mamsdk%20dual%20mode%20switching/mamsdk%20alert/","path":"2025/11/uncategorized/officeDocuments/officeDocs/MAM/Mamsdk dual mode switching/mamsdk alert/","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title> | Hexo</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Test"><span class="nav-number">1.</span> <span class="nav-text">Test</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sdk%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">2.</span> <span class="nav-text">sdk初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Situation1"><span class="nav-number">2.1.</span> <span class="nav-text">Situation1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Situation2"><span class="nav-number">2.2.</span> <span class="nav-text">Situation2</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%9F%E5%BE%85%E7%9A%84%E6%94%B9%E5%8A%A8"><span class="nav-number">3.</span> <span class="nav-text">期待的改动</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7"><span class="nav-number">4.</span> <span class="nav-text">调试技巧</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Scheme"><span class="nav-number">5.</span> <span class="nav-text">Scheme</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Current-Scenario"><span class="nav-number">5.1.</span> <span class="nav-text">Current Scenario</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scenario-A-PoC-done"><span class="nav-number">5.2.</span> <span class="nav-text">Scenario A: PoC done</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scenario-B-Need-to-investigate"><span class="nav-number">5.3.</span> <span class="nav-text">Scenario B: Need to investigate</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#first-flip-mdxss-startappregistration"><span class="nav-number">5.3.1.</span> <span class="nav-text">first flip: mdxss.startappregistration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#second-flip-mdxss-networklogon"><span class="nav-number">5.3.2.</span> <span class="nav-text">second flip: mdxss.networklogon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#third-flip-mdxss-sdkapplogon"><span class="nav-number">5.3.3.</span> <span class="nav-text">third flip:mdxss.sdkapplogon</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scenario-C-Need-to-investigate"><span class="nav-number">5.4.</span> <span class="nav-text">Scenario C:  Need to investigate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scenario-D-Need-to-investigate"><span class="nav-number">5.5.</span> <span class="nav-text">Scenario D:  Need to investigate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%B9%E5%8A%A8%E8%A6%81%E7%82%B9"><span class="nav-number">5.6.</span> <span class="nav-text">改动要点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Monthly-DEMO"><span class="nav-number">6.</span> <span class="nav-text">Monthly DEMO</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%83%8C%E6%99%AF"><span class="nav-number">6.1.</span> <span class="nav-text">背景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88"><span class="nav-number">6.2.</span> <span class="nav-text">实现方案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Remove-alert"><span class="nav-number">7.</span> <span class="nav-text">Remove alert</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SH"><span class="nav-number">7.1.</span> <span class="nav-text">SH</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MDX"><span class="nav-number">7.2.</span> <span class="nav-text">MDX</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Eliminate-flips"><span class="nav-number">8.</span> <span class="nav-text">Eliminate flips</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#keychain"><span class="nav-number">8.1.</span> <span class="nav-text">keychain</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#for-first-party-apps"><span class="nav-number">8.1.1.</span> <span class="nav-text">for first party apps</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for-third-party-apps"><span class="nav-number">8.1.2.</span> <span class="nav-text">for third party apps</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-sync-MobileAppData"><span class="nav-number">8.2.</span> <span class="nav-text">How to sync MobileAppData</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-sharing-over-TCP"><span class="nav-number">8.2.1.</span> <span class="nav-text">Data sharing over TCP:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sync-MobileAppData-to-keychain"><span class="nav-number">8.2.2.</span> <span class="nav-text">Sync MobileAppData to keychain</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#iOS-kechain"><span class="nav-number">9.</span> <span class="nav-text">iOS kechain</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Supremes</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">76</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Mamsdk%20dual%20mode%20switching/mamsdk%20alert/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h1><p>Kun: dual mode FF off</p>
<p>SH and MAMSDK: works but pop up a alert</p>
<h1 id="sdk初始化"><a href="#sdk初始化" class="headerlink" title="sdk初始化"></a>sdk初始化</h1><p>当前的逻辑，默认是加载初始化mdx sdk</p>
<h2 id="Situation1"><a href="#Situation1" class="headerlink" title="Situation1"></a>Situation1</h2><blockquote>
<ol>
<li>mdx初始化</li>
<li>switch to mamsdk</li>
</ol>
</blockquote>
<p>大致流程</p>
<ol>
<li><p>以legacy mode load and initialize</p>
</li>
<li><p>sync Securehub读取mamsdk 数据</p>
</li>
<li><p>再initialize mamsdk数据</p>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>zenprisedmpostenroll</string>
    <string>citrixreceiverfd</string>
</array>
</plist></li>
</ol>
<h2 id="Situation2"><a href="#Situation2" class="headerlink" title="Situation2"></a>Situation2</h2><blockquote>
<p>mamsdk初始化 </p>
</blockquote>
<ol>
<li><p>Load data locally from keychain</p>
</li>
<li><p>sync mam data with tcp</p>
</li>
</ol>
<p>之前没有支持mamsdk切换到mdx，现在需要实现这个逻辑</p>
<p>目前mdx切换到mamsdk，通过updatesdkmode来实现，但是目前mamsdk没有把updatesdkmode嵌入到某个事件中，无法做到mamsdk切换mdx</p>
<p>![image-20230118174510726](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230118174510726.png)</p>
<p>如果选择mdx，将初始化mdx sdk，再fetch mam app data</p>
<p>如果选择mamsdk，将初始化mdx sdk，再fetch mam app data，最后再初始化mamsdk</p>
<p>Video:</p>
<ol>
<li>mdx</li>
<li>mamsdk</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">// SDK Mode Control truth table</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Current</span></span><br><span class="line"><span class="comment">// Mode/                                  policy</span></span><br><span class="line"><span class="comment">// File       loader action   loaded      target     MDX action</span></span><br><span class="line"><span class="comment">// -----------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">// UNK        load default    LEGACY      UNK        no action</span></span><br><span class="line"><span class="comment">// UNK        load default    LEGACY      LEGACY     set mode/file to legacy</span></span><br><span class="line"><span class="comment">// UNK        load default    LEGACY      EXPLICIT   set mode/file to explicit, restart app</span></span><br><span class="line"><span class="comment">// UNK        load default    EXPLICIT    UNK        no action</span></span><br><span class="line"><span class="comment">// UNK        load default    EXPLICIT    LEGACY     set mode/file to legacy, restart app</span></span><br><span class="line"><span class="comment">// UNK        load default    EXPLICIT    EXPLICIT   set mode/file to explicit</span></span><br><span class="line"><span class="comment">// LEGACY     load LEGACY     LEGACY      UNK        no action</span></span><br><span class="line"><span class="comment">// LEGACY     load LEGACY     LEGACY      LEGACY     no action</span></span><br><span class="line"><span class="comment">// LEGACY     load LEGACY     LEGACY      EXPLICIT   set mode/file to explicit, restart app</span></span><br><span class="line"><span class="comment">// EXPLICIT   load EXPLICIT   EXPLICIT    UNK        no action</span></span><br><span class="line"><span class="comment">// EXPLICIT   load EXPLICIT   EXPLICIT    LEGACY     set mode/file to legacy, restart app</span></span><br><span class="line"><span class="comment">// EXPLICIT   load EXPLICIT   EXPLICIT    EXPLICIT   no action</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">+ (<span class="type">void</span>) updateSdkMode</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">BOOL</span> bSdkModeControlPolicyValue = <span class="literal">NO</span>;</span><br><span class="line">    <span class="type">BOOL</span> retVal = [<span class="keyword">self</span> getSdkModeControlPolicyValue:&amp;bSdkModeControlPolicyValue];</span><br><span class="line">    <span class="keyword">if</span> (retVal)</span><br><span class="line">    &#123;</span><br><span class="line">        MdxSdkType currentSdkMode = [<span class="keyword">self</span> getSdkMode];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Determine the new SDK mode we should be in, based on the the SDK mode control policy setting</span></span><br><span class="line">        MdxSdkType targetSdkMode = MDX_SDK_UNKNOWN;</span><br><span class="line">        <span class="keyword">if</span> (bSdkModeControlPolicyValue == <span class="literal">NO</span>)</span><br><span class="line">            targetSdkMode = MDX_SDK_LEGACY;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            targetSdkMode = MDX_SDK_EXPLICIT;</span><br><span class="line"></span><br><span class="line">        MdxSdkType currentLoadedSdk = [<span class="keyword">self</span> getLoadedSdkType];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (targetSdkMode != currentLoadedSdk ||</span><br><span class="line">             targetSdkMode != currentSdkMode)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Sync the current SDK mode with the target SDK type.</span></span><br><span class="line">            [<span class="keyword">self</span> setSdkMode:targetSdkMode];</span><br><span class="line"></span><br><span class="line">            <span class="built_in">CTXLOG_Info</span>(<span class="built_in">CTXLog_SourceName</span>, <span class="string">@&quot;currentSdkMode: %d, currentLoadedSdk: %d, targetSdkMode %d&quot;</span>, currentSdkMode, currentLoadedSdk, targetSdkMode);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (targetSdkMode != currentLoadedSdk )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Currently loaded SDK type differs from the target SDK type.</span></span><br><span class="line">                <span class="comment">// Alert user to restart app.</span></span><br><span class="line">                [<span class="keyword">self</span> alertUserRestartApp];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CTXLOG_Info</span>(<span class="built_in">CTXLog_SourceName</span>, <span class="string">@&quot;Could not get SDK Mode Control policy value.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Could not get SDK Mode Control Policy value. The policy probably doesn&#x27;t exist. Take no action.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="期待的改动"><a href="#期待的改动" class="headerlink" title="期待的改动"></a>期待的改动</h1><p>SH：给CitrixMdxData1中写入SDKModeControl信息</p>
<ul>
<li><p>更新时机：updateUnmanagedData![image-20230201153114751](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230201153114751.png)</p>
</li>
<li><p><del>找到apppolicy列表，并把SDKModeControl信息 赋值给CitrixMdxData1</del>![image-20230129181541854](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129181541854.png)![image-20230129161605521](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129161605521.png)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> * mamPoliciesDict = [CtxSingleSignOn policiesFromBase64String:app.policies];</span><br><span class="line"><span class="type">id</span> sdkModeControlPolicy = [mamPoliciesDict objectForKey:PKEY_POLICY_SDKMODECONTROL];</span><br><span class="line"><span class="type">BOOL</span> sdkModeExists = (sdkModeControlPolicy != <span class="literal">nil</span>);</span><br><span class="line"><span class="type">BOOL</span> inSdkMode = (sdkModeExists?[sdkModeControlPolicy boolValue]:<span class="literal">NO</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>MDX：在点击Authorize App时，主动读取CitrixMdxData1的SDKModeControl信息，并调用updatesdkmode</p>
<p>![image-20230129111356443](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129111356443.png)![image-20230129111556780](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129111556780.png)</p>
<h1 id="调试技巧"><a href="#调试技巧" class="headerlink" title="调试技巧"></a>调试技巧</h1><p>terminateApp设置状态为NO，mdx、 mamappcore</p>
<p>Mdx:</p>
<p>![image-20230130100551984](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230130100551984.png)</p>
<p>![image-20230208164022725](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230208164022725.png)</p>
<p>![image-20230130103519945](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230130103519945.png)</p>
<p>![image-20230201135847645](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230201135847645.png)</p>
<p>![image-20230201144150240](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230201144150240.png)</p>
<p>MDX only find the accurate situation to read and set sdkMode with SH write sdkMode on vault data</p>
<h1 id="Scheme"><a href="#Scheme" class="headerlink" title="Scheme"></a>Scheme</h1><h2 id="Current-Scenario"><a href="#Current-Scenario" class="headerlink" title="Current Scenario"></a>Current Scenario</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">title Current Scenario</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureWeb : 5. restart alert</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 6. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 7. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<h2 id="Scenario-A-PoC-done"><a href="#Scenario-A-PoC-done" class="headerlink" title="Scenario A: PoC done"></a>Scenario A: PoC done</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">title Scenario A: PoC done</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1.sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureWeb !!: 5. restart alert</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 6. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 7. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<h2 id="Scenario-B-Need-to-investigate"><a href="#Scenario-B-Need-to-investigate" class="headerlink" title="Scenario B: Need to investigate"></a>Scenario B: Need to investigate</h2><p>This would be to eliminate the auto flip to SH</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">title Scenario B: Need to investigate</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>



<h3 id="first-flip-mdxss-startappregistration"><a href="#first-flip-mdxss-startappregistration" class="headerlink" title="first flip: mdxss.startappregistration"></a>first flip: mdxss.startappregistration</h3><h3 id="second-flip-mdxss-networklogon"><a href="#second-flip-mdxss-networklogon" class="headerlink" title="second flip: mdxss.networklogon"></a>second flip: mdxss.networklogon</h3><h3 id="third-flip-mdxss-sdkapplogon"><a href="#third-flip-mdxss-sdkapplogon" class="headerlink" title="third flip:mdxss.sdkapplogon"></a>third flip:mdxss.sdkapplogon</h3><p>![image-20230206145433963](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230206145433963.png)</p>
<p>payload:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(__NSDictionaryM *) $0 = 0x0000000282cb5e80 32 key/value pairs</span><br><span class="line">Printing description of payload:</span><br><span class="line">&#123;</span><br><span class="line">    AGBaseURL = &quot;https://nsg-njcqetest5.xs.citrix.com&quot;;</span><br><span class="line">    AGConfigData = &quot;AQAGAACAigABAAAACggBbAAAAAAAAAADAAAAAAEAAAD/ACAAoAUAAAAAAAAxMy4x</span><br><span class="line">\nLjMzLjUyAGp1bmthbmdkQGNlbW1vYmlsZS5jdHgAAABjZW1tb2JpbGUuY3R4AAA=&quot;;</span><br><span class="line">    AGCookies = &quot;NSC_AAAC=25bd5d3ea5a87c11d73cb06b50db7e2b009001f1f45525d5f4f58455e445a4a42&quot;;</span><br><span class="line">    AGCookiesFetchTimeStamp = &quot;2023-02-06 06:51:00 +0000&quot;;</span><br><span class="line">    AGDeviceCheckURL = &quot;https://nsg-njcqetest5.xs.citrix.com/AGServices/device_check&quot;;</span><br><span class="line">    APPCDeviceCheckURL = &quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Device/v1/Check&quot;;</span><br><span class="line">    AuthToken = &quot;CitrixAuth 4a5c5f94526f4ac3bec4d6ac4c46f7e55951855a9793d44f08299d385bd44f3e6F6F3637&quot;;</span><br><span class="line">    DeviceEnrollmentConfig = 2;</span><br><span class="line">    DeviceID = &quot;6al2cyiw6m9yKQjslQ2EHQzIjfpEnisq8mXcI9oiLKo=&quot;;</span><br><span class="line">    DeviceState = &quot;(null)&quot;;</span><br><span class="line">    DeviceVendorKey = &quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;;</span><br><span class="line">    EncryptionKey = &quot;&#123;length=32,bytes=0x5528da0532106dc05a78c9f6953e5ad1...77e1e7c87be8d7d5&#125;&quot;;</span><br><span class="line">    FeatureFlagCustomerId = 949980A17515C87C1F777DF703626F6C870E0EBBD170BAA904BDF22E567EC2DC;</span><br><span class="line">    FeatureFlagDeviceId = &quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;;</span><br><span class="line">    FeatureFlagUserId = F74D7D92A16E116529B79F64152AF5737A8ACD8126EDF502E6F404FEFD908B3A;</span><br><span class="line">    GatewayType = 1;</span><br><span class="line">    InternalNetwork = 0;</span><br><span class="line">    LockState = 0;</span><br><span class="line">    LogonFlag = 1;</span><br><span class="line">    MasterKeychainAccessGroup = G3SMV9832J;</span><br><span class="line">    MobileAppAggregation = 0;</span><br><span class="line">    STATicketServiceURL = &quot;https://njcqetest5.xmqa.cloud.com:8443/STA/get_ticket_v1&quot;;</span><br><span class="line">    SharedDeviceModeEnabled = 0;</span><br><span class="line">    SharefileInfo =     &#123;</span><br><span class="line">        SharefileSSOEnabled = 0;</span><br><span class="line">    &#125;;</span><br><span class="line">    StoreID = 4496674629308276351;</span><br><span class="line">    TimeStamp = &quot;2023-02-06 06:51:05 +0000&quot;;</span><br><span class="line">    Username = &quot;junkangd@cemmobile.ctx&quot;;</span><br><span class="line">    appinfo =     &#123;</span><br><span class="line">        AppLogLevel = 4;</span><br><span class="line">        AppLogTarget = file;</span><br><span class="line">        AppResourceID = &quot;Citrix.MPS.Doc.Farm 1.MobileApp15&quot;;</span><br><span class="line">        AppResourceURL = &quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;;</span><br><span class="line">        AppResourceURLTranslated = &quot;https://nsg-njcqetest5.xs.citrix.com/cvpn/https/njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">    enrollmentId = &quot;&#123;length=16,bytes=0x20b2262b4bdc7bbc34f9cdd349665112&#125;&quot;;</span><br><span class="line">    enrollmentIdv2 = &quot;&#123;length=16,bytes=0x213cf9d5a8a5c23394f691e593d03548&#125;&quot;;</span><br><span class="line">    supportsMAMAppDataSharing = 0;</span><br><span class="line">    xmsServerBaseURL = &quot;https://njcqetest5.xmqa.cloud.com:8443&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>![image-20230206154302201](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230206154302201.png)</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Printing description of url<span class="punctuation">:</span></span><br><span class="line">com.citrix.sso<span class="number">.7</span>C1B0619<span class="number">-955</span>F<span class="number">-4078</span>-A4FB<span class="number">-443</span>A52627D67-DualMode<span class="punctuation">:</span><span class="comment">//mdxss.sdkapplogon?mdxresponse=1&amp;result=0&amp;store=%7Blength%3D16%2Cbytes%3D0x20b2262b4bdc7bbc34f9cdd349665112%7D&amp;nonce=Xoi8Pahqj2cyjgDI99RdzHBd22l&amp;plsize=3056&amp;payload=e9OIphU1ud9rJnRl2xaCmBBeFHFArw%2F3u26F6BF7kRcbUxCRMdF4BT6AUTyrCGHcbqB2Eg5ZhotLGHvhECbtJVnX3DubmXwh8MNdmm5VuiiXwu36v7RBn5atxBPRncOZnBjyOr6YcF8pYx2fsVVoht5J2jbLttTyfMwWbtKXR8DjEfsQb8lzgMlUnt88Dcj2MsfQdIETiGJUvO84uqgKSgCNnugiUsbrpw2yBD%2BHT%2Bx%2Fimgqj4zHMIjYeRqW0ue56vP%2FCY%2B9FbLhB%2FwjgNr%2Bxt72ShmQVjx%2FrfWtDitE7G%2BOt1SmIlEnyKXx%2BB9nPTvg%2F3fVmvRdJnLI3bhg1KN4MC4Ym84wsjr20xEW%2B%2BU9ZU775Lr841pFNY6khMgN1axm61eFZhguZLDuH7yThRqwppvmXrIhzKZ8ZdOU7zHn9pTRT4FXtBmoqPgEmaegjtjbvyMjyZykprWhyWFJezQ54aRiU1iMnTvvm4klRPlbVRWcvE483S36w1kwp1OnKq0VhXhsKk%2BX8UYjc75vM9kQgKTID%2BCDWsUHC4C84GOc93rbtSpyjeMo1l1wpkTS94hjWHeE7Ms7aovwRZeCDExiau8e9LPGkmlNf3Zq66clfbg8cVt7wcEVi0ewBt4fFNNCEHpkBf39DjHhKR%2BYBm%2B6iX1%2BYmL9EBqJI69UE%2BHKxAc92GVfSJyYn9hurJ4k%2FpG55dwf%2F34pZD88LfmVcVmmW4V6KKF0Vc4zyPzz7p0IIMC%2BxD%2BnOYYbKC02itHTYf8tdHeU4XMyl5amoI5y3jeELQriNPMjxU6876PR9NWW%2FMHiryHS3pe9%2B6dl7mWTu2Ec10DMsym08WTLm6vHRuEfXfMt4nv216KUb8vGaD4uyWJlo1anXpQdYBT3hG3%2F%2FsbIOxNUxQMuZylmrOhuBbk42AReN5kcwGBN5k6DgNH6VEKFXbKUAbEo6564vafEw552BS%2BB9MmYUWGIqiNqXK0SvqXQCdZ5hXzkpHZ5sAtmUKGevcQ4Em%2BavL7JE5zDE964bPTCLqTRFnN4J%2FM3yAKzw59pCkbe5FFvxNVEi2l454U4ISLIrS4gMw1k%2FiwFUh%2F%2FqryxleC3R%2BBYc4r4ugcr1%2FWhfGmnxKcg92Yf2T5%2FuFAkrJETKDZXnjBwsPG0e%2BuLVv5RLQyoD%2BZbGpGTGBL1b7x%2BkaMXszeI4qHbD1QEN0ZXweD1OtlAxOF0b%2FINa8UgGNiV0aJoRLpvf3m5%2Fl7NrtYz7wUT0248CujyLrRMdYFaCKSKKVLIXF%2FRBvcR3NjoV8EuoJMkt9DcnaYR%2BXSRplM6OsquRAzFQ%2Fnyxxed1N7vFysVE3UY1ZyTpJ9IrMo2o2F4yPLwLQIbK1wkn%2FnB0qzcHcC2JfKDSnJqsyPGM08NpKEHpvUvvtjD9%2FCtVnUJ8CWkKt1WTuzDfxsUdmT5usqL%2FCahHXiHAlgGexvYxw9FyjxYO5fqO0mdnbSyB7Mcbn1U1bknLuAu%2BPT%2FE7LbPhT4LBiyK2dvqFvV7zcc%2F3FsToeqlRZtnbiMZfyqmTEI6FTAybgyZJ7Xc5dqBZLfb9jxCA3d3LX4t9UtBmvAYF2ra1pneaDYDJ0aXql4O%2B34AUedkTzJdqNlVyEdu6WSC7kKpZHLeJmg6fRxjkfdcPWUqFe5QdkufkT%2BoJCfHUJJ1g61%2F5n4vbR0izqJr8GvV%2Bpl%2FttMdS81J77c34nuo9a4sPsuGGpb8chVNGXrvCoLPllEpYSnDnmo4hY33MqfZj4KPGOT9mbStH4VNiSMJFq3TE86S0oMcKkj9DRm1J9ON4xy3W5TaeIsTp5tfkRabjzVBDGTfJWANb0V6YiVpPM8Rx1%2F2lvS0lKKq6odh1PS7R0u1%2Fvx724zsrOa70CvYb2WodOrtjIABCoj5EYm1U0bAWldDessHNen7N97kEr0wLHZlu6KaykWquvSVDfN4UHo4a3vC37OdS4p3RFKhv9vgXQmQENci%2ByS1lrdKxQpHs9aJXkVqDf%2BTu7tmj64sHZKe7ebMvGbLOxagax4Tw6UUoqm8oqA21LzZOzj4PexG2FPDYsZA1yJYcb589E%2FhN4dbQAd0KUZLhXsbXS0oFflrUWpkeQnkfVa5KztrD0KTHfuxdet8JegZ9SwFOV88NZg0kJXIpPexmbI%2Bu0Us5SME8IOKv7E80J%2FgA7xDx95WVLdWJoQ0Bo1y9C2Y62yFY9PHr%2FjwU5DGuZMppA3XVfPUP58yRma01j%2FZdGFsPYr8uWnbx%2FZm2bPpeeRFlMYRhQ6osEhuZp7IMLkYQPs4EP8dNT5PtnlRofYSi3P6m6sOdPUpM2ZDxBhkVV1F9LeiVu1ddKVs5C7Gib5QmcydHIhBIOCNXXw6yciuhj5qlybHP2WApCn4tO5aroBX7O8v68cl1AgVMFGwi8KeYmfoBN4j5dJItOGCJYne3CTCTq%2B6oMSTwx17IadC%2FjDsbIEeMO%2BV2Lw4xJKHasfREjDk%2BLOqVmK3kMUKVobxyf2xL08C7LCe6s45G4Yg%2BAVvCiVGos7AwQXwdM%2BCgcbcuyGIl4Knvw42mdtNWdw9V9D7C21X9MbJx8omAHRdzmLMExUrK1TcehxUcTEFwNS2mWZObVwXYjEgRq%2FJJCiRvCPjHFl4JnSTOGhJZS7QKCNafr66lU2mKS8S6eVYF8j0ojWX6meZBOJwBVqOImccvENUnHx044GPbkL%2FWdNeUiI2dJZ88uV4zoQj6yTQ1ocwdmTQVjGg%2F8DirvFG9XgQWU6IpByxOCNrT2Hau46Io7ZicaOw%2FoN9nZZgrYTLXOKzMPniBV9%2F3m8%2F8%2FoYIvB9WyFBe0jcfpHV5mgAZMtVQCS2UiXckJzziPZpMnNoPMJkBBRYvjJJDFLi8GowgehKApFkISGY2uXWxMPKB8XyPp8fofQJDyCbB5IR43WQm%2Buir55zzXCLjlXH4jGgW3hgIyjFnTQKow%2BVdVqAJcuFGCzLdyE0p0QAS0iBHjZuw%2Fr6sphqJk%2BEXzsz2UkIVsjnvU2qaZs2L0nB7tuo1Z%2BIYVWlNOv3%2FheihZOaReFsgjOwAeUGPvwJUB3hrvSz44Gkc%2B4CRbTMx1Z6Hl0a0hgQzPqxMPxhgfzQOw7FLEne2XtrRSuL3JcbeF3ZB0X31Qqm4wBX3BNWYUWYYuADTIxrMxDjDuoiyhcvS7ojID7yJoKFZSERQNs4%2BVYjbEU1%2B6Muknbk7yQQYkZJTWKbivD2jutbPdwy%2FDZXiG3uP6HeUFZqvOLTycfP%2FIdn%2BTk3H%2FPb705065XVRQ6qAjSCvTyltiFPtcI9S4Mmtk%2FpMlbb9a%2FZjwXMflm3b2yQxhgT4MRV%2B5k0R228RPgT1gXZMB56PAyC7Fc6hW1zHn%2Ftb3KO1J%2B2yHy3dXfhQKF6rtIIlj4dRjHrHfKKr6hHc50pGZNcf2Wly1RmBKescyvcN5ZO4YQSjUWVxyxBH6bZ%2FGEhnOn%2FSWfXeiIKaoSzIAI65vcMSiisyxOCDu93Hq4KGT9WIx3AaDBTcOgjoDo3M3A%2FtmjDtQO4qW6R9lNw3DlHvH0rpUhqtfbF11XUMcSVcQtd2M0OWJfDab54ivUznKHni0IXJOR4mWM6V%2BvWrA8ilE0%2FSHXMfBAJy2UAPZJKpzY%2BrtnasKGTb6kkCogr69z0tCORrktn%2B8Z3kqK4pcpb%2B6BIFNwVH%2BwIj%2FzEEVQFY6RcPU7gP5zYej4cr1DI4Jg%2Bga104%2F5E%2BcvRTIzBwnjetbWbqEjPQoVYIigBKGO4iEYmrRw%2Bs2UWdRP0pADsZr70NCzr9%2FjYK4twTxRF6CIbZCjh7TP6BsiS%2BWAcSiqSk6eu97FLpZ4YC5SVmycsl%2F5r4eZ1W39IN9JwaqGxhPoIY%2BJ5Ir4KPue2BSAERdnUdaQegEU4h1%2B0%2FOjw1BvzjJEiKg6Cn11tDd3kRUm%2B%2BNvsD%2Fjf4u8RQzcga0%2BpIX9ZNFAASN%2F23CLuOFM3HhvHy3D94wogxhnGKJzuL7t89Ud49N47bk%2B%2FEcFCTJW4FXV7dUT7X19UxadfOVme%2FLsnF%2Bo0AmpQrO4%2Fxhr2rDAmwI7yJQViD3xXWxv%2Fa7cik39U0idlPvuYP9bzRs%3D&amp;mdxurlversion=3</span></span><br><span class="line">(lldb) </span><br><span class="line"></span><br><span class="line">Printing description of payload<span class="punctuation">:</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    AGBaseURL = <span class="string">&quot;https://nsg-njcqetest5.xs.citrix.com&quot;</span>;</span><br><span class="line">    AGConfigData = <span class="string">&quot;AQAGAACAigABAAAACggBbAAAAAAAAAADAAAAAAEAAAD/ACAAoAUAAAAAAAAxMy4x</span></span><br><span class="line"><span class="string">\nLjMzLjUyAGp1bmthbmdkQGNlbW1vYmlsZS5jdHgAAABjZW1tb2JpbGUuY3R4AAA=&quot;</span>;</span><br><span class="line">    AGCookies = <span class="string">&quot;NSC_AAAC=9a57eb8513fb545498779e4321fbec4f009001f1f45525d5f4f58455e445a4a42&quot;</span>;</span><br><span class="line">    AGCookiesFetchTimeStamp = <span class="string">&quot;2023-02-07 02:03:12 +0000&quot;</span>;</span><br><span class="line">    AGDeviceCheckURL = <span class="string">&quot;https://nsg-njcqetest5.xs.citrix.com/AGServices/device_check&quot;</span>;</span><br><span class="line">    APPCDeviceCheckURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Device/v1/Check&quot;</span>;</span><br><span class="line">    AuthToken = <span class="string">&quot;CitrixAuth b32c684ded608b367985408ca332d59fcd3ef025df6e64b7af00e78123b4ebf24C704751&quot;</span>;</span><br><span class="line">    DeviceEnrollmentConfig = <span class="number">2</span>;</span><br><span class="line">    DeviceID = <span class="string">&quot;6al2cyiw6m9yKQjslQ2EHQzIjfpEnisq8mXcI9oiLKo=&quot;</span>;</span><br><span class="line">    DeviceState = <span class="string">&quot;(null)&quot;</span>;</span><br><span class="line">    DeviceVendorKey = <span class="string">&quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;</span>;</span><br><span class="line">    EncryptionKey = <span class="string">&quot;&#123;length=32,bytes=0x5528da0532106dc05a78c9f6953e5ad1...77e1e7c87be8d7d5&#125;&quot;</span>;</span><br><span class="line">    FeatureFlagCustomerId = <span class="number">949980</span>A17515C87C1F777DF703626F6C870E0EBBD170BAA904BDF22E567EC2DC;</span><br><span class="line">    FeatureFlagDeviceId = <span class="string">&quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;</span>;</span><br><span class="line">    FeatureFlagUserId = F74D7D92A16E116529B79F64152AF5737A8ACD8126EDF502E6F404FEFD908B3A;</span><br><span class="line">    GatewayType = <span class="number">1</span>;</span><br><span class="line">    InternalNetwork = <span class="number">0</span>;</span><br><span class="line">    LockState = <span class="number">0</span>;</span><br><span class="line">    LogonFlag = <span class="number">1</span>;</span><br><span class="line">    MasterKeychainAccessGroup = G3SMV9832J;</span><br><span class="line">    MobileAppAggregation = <span class="number">0</span>;</span><br><span class="line">    STATicketServiceURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443/STA/get_ticket_v1&quot;</span>;</span><br><span class="line">    SharedDeviceModeEnabled = <span class="number">0</span>;</span><br><span class="line">    SharefileInfo =     <span class="punctuation">&#123;</span></span><br><span class="line">        SharefileSSOEnabled = <span class="number">0</span>;</span><br><span class="line">    <span class="punctuation">&#125;</span>;</span><br><span class="line">    StoreID = <span class="number">4496674629308276351</span>;</span><br><span class="line">    TimeStamp = <span class="string">&quot;2023-02-07 02:03:14 +0000&quot;</span>;</span><br><span class="line">    Username = <span class="string">&quot;junkangd@cemmobile.ctx&quot;</span>;</span><br><span class="line">    appinfo =     <span class="punctuation">&#123;</span></span><br><span class="line">        AppLogLevel = <span class="number">4</span>;</span><br><span class="line">        AppLogTarget = file;</span><br><span class="line">        AppResourceID = <span class="string">&quot;Citrix.MPS.Doc.Farm 1.MobileApp15&quot;</span>;</span><br><span class="line">        AppResourceURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;</span>;</span><br><span class="line">        AppResourceURLTranslated = <span class="string">&quot;https://nsg-njcqetest5.xs.citrix.com/cvpn/https/njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;</span>;</span><br><span class="line">    <span class="punctuation">&#125;</span>;</span><br><span class="line">    enrollmentId = <span class="string">&quot;&#123;length=16,bytes=0x20b2262b4bdc7bbc34f9cdd349665112&#125;&quot;</span>;</span><br><span class="line">    enrollmentIdv2 = <span class="string">&quot;&#123;length=16,bytes=0x213cf9d5a8a5c23394f691e593d03548&#125;&quot;</span>;</span><br><span class="line">    supportsMAMAppDataSharing = <span class="number">1</span>;</span><br><span class="line">    xmsServerBaseURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> logonFinishedWithPayload:scrambledPayload andSize:size isCWAFlip:isCWAFlip];</span><br><span class="line">[<span class="built_in">CTXMAMLogger</span> <span class="built_in">CTXMAMLog_Initialize</span>];</span><br><span class="line"></span><br><span class="line">           <span class="comment">/* if(payload != nil)</span></span><br><span class="line"><span class="comment">            &#123;</span></span><br><span class="line"><span class="comment">                bResult = [self updateHubPayloadData:payload updateFetchTime:!isCWAFlip loadData:&amp;bLoadData];</span></span><br><span class="line"><span class="comment">                [[CTXMAMConfigInfo sharedInstance] CTXMAMAConfigInfo_Initialize];</span></span><br><span class="line"><span class="comment">                [[CtxAuthInterface sharedInstance] CtxAML_Initialize];</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>([<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager]._mainDispatcher == <span class="literal">nil</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            [<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager]._mainDispatcher = [[<span class="built_in">CTXMAMServerDataRequestDispatcher</span> alloc] initWithLogonInfo:[[<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager] hubLogonInfo]</span><br><span class="line">                                                                                                         andBlockForPeriodicFetching:[<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager]._serverInfoCompletionBlock];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Printing description of foundApp<span class="punctuation">:</span></span><br><span class="line">appName<span class="punctuation">:</span>Citrix Simple Browser; appStoreUrl<span class="punctuation">:</span>http<span class="punctuation">:</span><span class="comment">//yourstore.yourdomain.com, appUniqueID:AE6614987908A8F64455956278AD18D8; appNewUniqueID:(null); mobileAppID:B6PJY8ADY4.com.citrix.SimpleBrowserApp.dualMode; mobileToolVersion:21.11.15; packageID:7C1B0619-955F-4078-A4FB-443A52627D67-DualMode; policies:L11972; policiesTimestamp:2023-02-07 02:42:42 +0000; publicKey:L64; resourceID:Citrix.MPS.Doc.Farm 1.MobileApp15; timestamp:Mon Feb 06 13:44:03 GMT+8 2023; urlScheme:com.citrix.sso.7C1B0619-955F-4078-A4FB-443A52627D67-DualMode; wrappingDateTime:2023-01-29 07:04:09 +0000; requiredUserEntropyPolicyEnabled: 0; installTimestamp:2023-02-06 05:47:04 +0000; isSubscribed:1; storeID:&#123;length=16,bytes=0x20b2262b4bdc7bbc34f9cdd349665112&#125;; subscriptionState:2; resourceURL:https://njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU; resourceTranslatedURL:https://nsg-njcqetest5.xs.citrix.com/cvpn/https/njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU; logTarget: file;  logLevel: 4; mobileAppversion: 1.0</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/Users/junkangd/Library/Application Support/typora-user-images/image-20230207104504355.png" alt="image-20230207104504355" style="zoom:150%;" />

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line">SecureHub &lt;- MDXApp : 1. Authorize App alert</span><br><span class="line"></span><br><span class="line">note over SecureHub: write mobileAppData to unmanagedContainer</span><br><span class="line">SecureHub -&gt; MDXApp : 2. flip</span><br><span class="line">MAMSDKApp -&gt; MAMSDKApp: 3. read mobileAppData from unmanagedContainer</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>





<p>initWithLogonInfo</p>
<p>CTXMAMSecureHubSharedData:loadData</p>
<p>开启FF：</p>
<ul>
<li>Dual mode</li>
<li>first party mamsdk</li>
<li>third party mamsdk</li>
</ul>
<p>first party app: 可以从shared keychain里拿到shared data，没拿到再去通过tcp请求SH</p>
<p>third party app：通过tcp请求SH 拿到shared data</p>
<h2 id="Scenario-C-Need-to-investigate"><a href="#Scenario-C-Need-to-investigate" class="headerlink" title="Scenario C:  Need to investigate"></a>Scenario C:  Need to investigate</h2><p>Let SecureHub sync sdkMode to unmanaged container when update unmanaged container, and load the correct sdkMode from unmanaged container in MdxFrameworkLoader.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">title Scenario C: Need to investigate</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line">@enduml</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<h2 id="Scenario-D-Need-to-investigate"><a href="#Scenario-D-Need-to-investigate" class="headerlink" title="Scenario D:  Need to investigate"></a>Scenario D:  Need to investigate</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">title Scenario D: Need to investigate</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 3. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureHub : 5. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 6. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>





<h2 id="改动要点"><a href="#改动要点" class="headerlink" title="改动要点"></a>改动要点</h2><p>2023-02-08T18:11:28.824+0800 works log</p>
<h1 id="Monthly-DEMO"><a href="#Monthly-DEMO" class="headerlink" title="Monthly DEMO"></a>Monthly DEMO</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><ul>
<li><p>Limitations of current scenario：</p>
<ol>
<li>quit alert</li>
<li>restart manually</li>
<li>sdk initialization process doesn’t run smoothly</li>
<li>Three times auto flip</li>
</ol>
</li>
<li><p>customer’s pain points:</p>
<ol>
<li>Installed app: switch sdkMode from mdx to mamsdk in CEM</li>
</ol>
</li>
</ul>
<ol start="2">
<li>Fresh install of the app: set sdkMode as mamsdk in CEM</li>
</ol>
<h2 id="实现方案"><a href="#实现方案" class="headerlink" title="实现方案"></a>实现方案</h2><ul>
<li>优点<ol>
<li>Remove quit alert</li>
<li>sdk initialization process run smoothly</li>
<li>At most one or two times auto flip</li>
</ol>
</li>
</ul>
<p>![image-20230217105513783](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230217105513783.png)</p>
<p>![image-20230220180159686](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230220180159686.png)</p>
<h1 id="Remove-alert"><a href="#Remove-alert" class="headerlink" title="Remove alert"></a>Remove alert</h1><h2 id="SH"><a href="#SH" class="headerlink" title="SH"></a>SH</h2><p>SDKMODE</p>
<ul>
<li>是否需要转存到unmanaged container: 需要，mdx无法拿到appdata这类数据</li>
<li>转存的时机: updateUnmanagedData. FF on时，写入sdkmode到unmanaged container</li>
</ul>
<h2 id="MDX"><a href="#MDX" class="headerlink" title="MDX"></a>MDX</h2><ul>
<li>在authorize时且FF on时，读取并设置SdkMode</li>
<li>alert弹框添加前提条件：FF on</li>
</ul>
<p>![image-20230222111156789](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230222111156789.png)</p>
<p>Hi team, this is an demo for dual mode app enhancement.</p>
<p>And this is an RFE from cigna. </p>
<p>I will follow this video to introduce the whole process, including:</p>
<ul>
<li><p>Pain points of customer</p>
</li>
<li><p>limitations of current scenarios. as described in this slide.</p>
</li>
</ul>
<p>And This is a flow chart of sdk initialization on dual mode app for current scenario.</p>
<p>There are three auto flips between two apps, and a restart alert.</p>
<p>And then,  we could follow this video to understand this process.</p>
<p>The first fragment is focused on fresh install of the app.</p>
<p>this is the first time auto flip, and it will only show occasionally.</p>
<p>And this is the second time auto flip</p>
<p> quit message is displayed, we need to restart manually to load app with mamsdk sdk mode.</p>
<p>And this is third time auto flip. App is now managed with MAMSDK mode.</p>
<p>The next fragment is focused on installed app.</p>
<p>The quit message will be shown when we open the app. Like the last fragment, flip to SecureHub, and complete sdk initialization process.</p>
<p>The optimized scheme is designed to resolve pain points of customer and some limitations of current scenario. Including:</p>
<ul>
<li>Remove quit alert</li>
<li>Since the first auto flip will  shown occasionally, there are at most two times auto flip</li>
<li>sdk intialization process run smoothly</li>
</ul>
<p>And this is a flow chart of sdk initialization on dual mode app for optimized scheme.There are two times auto flip and no quit alert appears anymore.</p>
<p>And then,  we could follow this video to check this demo.</p>
<p>this is the first time auto flip, and it will only show occasionally.</p>
<p>And this is the second time auto flip. App is now managed with MAMSDK mode.</p>
<p>9233</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">3902680129AE00D400F64428 /* MdxAgentAppBindProperties.m in Sources */,</span><br><span class="line">3902680029ADFE7C00F64428 /* MdxAgentAppBinder.m in Sources */,</span><br><span class="line">390267FF29ADFE7500F64428 /* IPCSettings.m in Sources */,</span><br><span class="line">390267FE29ADFE6D00F64428 /* CtxPasteboardHelper.m in Sources */,</span><br><span class="line">390267FD29ADFE5D00F64428 /* CtxKeyChainHelper.m in Sources */,</span><br><span class="line">390267FC29ADFBCB00F64428 /* CtxSingleSignOn.m in Sources */,</span><br><span class="line">390267FB29ADFB2F00F64428 /* CtxVaultEncryptionUtil.m in Sources */,</span><br><span class="line">390267FA29ADFAD400F64428 /* CtxSecureDataEncryptor.m in Sources */,</span><br><span class="line">390267F929ADFAA800F64428 /* CtxSecretVault.m in Sources */,</span><br><span class="line">390267F829ADFA6700F64428 /* MdxGenericVaultHelper.m in Sources */,</span><br><span class="line">390267F729ADFA5E00F64428 /* MdxExtensionUtils.m in Sources */,</span><br><span class="line">390267F629ADFA5600F64428 /* CtxVaultStore.m in Sources */,</span><br><span class="line">390267F529ADFA4E00F64428 /* MdxEncryptionUtils.m in Sources */,</span><br><span class="line">390267F429ADFA4300F64428 /* CtxVaultDataEnvelope.m in Sources */,</span><br><span class="line">390267F229ADF87100F64428 /* CtxVaultContainer.m in Sources */,</span><br><span class="line">390267F129ADF85C00F64428 /* CtxSharedKeychainVault.m in Sources */,</span><br><span class="line">390267F029ADF84C00F64428 /* CtxSharedKeychainMdxContainersUtil.m in Sources */,</span><br><span class="line">390267EF29ADF83A00F64428 /* CtxBasicContainer.m in Sources */,</span><br><span class="line">390265AB29ADF63400F64428 /* CtxUnmanagedContainer.m in Sources */,</span><br><span class="line">390265AA29ADF61C00F64428 /* CtxSharedVault.m in Sources */,</span><br><span class="line">390265A929ADF61600F64428 /* CtxSharedKeychainStore.m in Sources */,</span><br><span class="line">390265A829ADF60B00F64428 /* CtxSSORecord.m in Sources */,</span><br><span class="line">390265A729ADF60500F64428 /* CtxSSOKeyEncryptedVault.m in Sources */,</span><br><span class="line">390265A629ADF5F400F64428 /* CtxSSOKeyEncryptedDynamicVault.m in Sources */,</span><br><span class="line">390265A529ADF5ED00F64428 /* CtxSSOKeyEncryptedDynamicEnvelopeVault.m in Sources */,</span><br><span class="line">390265A429ADF5E200F64428 /* CtxKeyManager.m in Sources */,</span><br><span class="line">390265A329ADF5DB00F64428 /* CtxFindPasteboardStore.m in Sources */,</span><br><span class="line">390265A229ADF5CB00F64428 /* MdxGenericVault.m in Sources */,</span><br><span class="line">390265A129ADF5BE00F64428 /* CtxDeviceSharedStorage.m in Sources */,</span><br><span class="line">390265A029ADF5B800F64428 /* CtxInactivityPersistence.m in Sources */,</span><br><span class="line">3902659C29ADF54D00F64428 /* MdxFeatureMgrRequest.m in Sources */,</span><br><span class="line">3902659D29ADF54D00F64428 /* MdxFeatureMgr.m in Sources */,</span><br><span class="line">3902659E29ADF54D00F64428 /* MdxFeatureMgrService.m in Sources */,</span><br><span class="line">3902659F29ADF54D00F64428 /* MdxFeatureMgrConfig.m in Sources */,</span><br></pre></td></tr></table></figure>



<p>Wrapperlib:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">861E99651EFD5EEE00C62E43 /* MDXWrapperLib.h in Headers */,</span><br><span class="line">				861E96661EFAF33400C62E43 /* MDXCrashInfo.h in Headers */,</span><br><span class="line">				861E96631EFAF33400C62E43 /* MdxAppStoreActivationButtonTableViewCell.h in Headers */,</span><br><span class="line">				861E96641EFAF33400C62E43 /* MdxAppStoreActivationTextFieldTableViewCell.h in Headers */,</span><br><span class="line">				861E96651EFAF33400C62E43 /* MdxAppStoreActivationTextFieldWithAccessoryImages.h in Headers */,</span><br><span class="line">				861E96671EFAF33400C62E43 /* MDXPrivateAPI.h in Headers */,</span><br><span class="line">				861E96681EFAF33400C62E43 /* CtxSingleSignOn.h in Headers */,</span><br><span class="line">				861E96691EFAF33400C62E43 /* WrapLib.h in Headers */,</span><br><span class="line">				861E966F1EFAF33400C62E43 /* NSKeyedUnarchiver+ctx.h in Headers */,</span><br><span class="line">				861E96701EFAF33400C62E43 /* UIDevice+PasscodeStatus.h in Headers */,</span><br><span class="line">				861E96711EFAF33400C62E43 /* NSNotificationCenter+ctx.h in Headers */,</span><br><span class="line">				861E96761EFAF33400C62E43 /* AVPlayer+ctx.h in Headers */,</span><br><span class="line">				861E96771EFAF33400C62E43 /* UIImage+ctx.h in Headers */,</span><br><span class="line">				861E96781EFAF33400C62E43 /* UIImage+mdxEncryption.h in Headers */,</span><br><span class="line">				861E96791EFAF33400C62E43 /* UIWebView+ctx.h in Headers */,</span><br><span class="line">				861E967A1EFAF33400C62E43 /* QLPreviewController+ctx.h in Headers */,</span><br><span class="line">				861E967B1EFAF33400C62E43 /* URLFilter.h in Headers */,</span><br><span class="line">				861E967C1EFAF33400C62E43 /* AVAudioRecorder+CtxAVAudioRecorder.h in Headers */,</span><br><span class="line">				77D239BE217525CB0054F06D /* MdxEPDataProtectionPrivate.h in Headers */,</span><br><span class="line">				861E967D1EFAF33400C62E43 /* AVCaptureDevice+CtxAVCaptureDevice.h in Headers */,</span><br><span class="line">				861E967E1EFAF33400C62E43 /* CLLocationManager+CtxCLLocationManager.h in Headers */,</span><br><span class="line">				861E967F1EFAF33400C62E43 /* MethodSwizzling.h in Headers */,</span><br><span class="line">				861E96801EFAF33400C62E43 /* MFMailComposeViewController+CtxMFMailComposeViewController.h in Headers */,</span><br><span class="line">				861E96811EFAF33400C62E43 /* MFMessageComposeViewController+CtxMFMessageComposeViewController.h in Headers */,</span><br><span class="line">				861E96821EFAF33400C62E43 /* NSFileManager+CtxNSFileManager.h in Headers */,</span><br><span class="line">				861E96831EFAF33400C62E43 /* NSUbiquitousKeyValueStore+CtxNSUbiquitousKeyValueStore.h in Headers */,</span><br><span class="line">				861E96841EFAF33400C62E43 /* UIApplication+CtxUIApplication.h in Headers */,</span><br><span class="line">				861E96851EFAF33400C62E43 /* UIDevice+CtxUIDevice.h in Headers */,</span><br><span class="line">				861E96881EFAF33400C62E43 /* UIImagePickerController+CtxUIImagePickerController.h in Headers */,</span><br><span class="line">				861E968A1EFAF33400C62E43 /* UIPrintInteractionController+CtxUIPrintInteractionController.h in Headers */,</span><br><span class="line">				861E968B1EFAF33400C62E43 /* SLComposeViewController+ctx.h in Headers */,</span><br><span class="line">				861E968D1EFAF33400C62E43 /* NSURLConnection+CtxCertificate.h in Headers */,</span><br><span class="line">				861E968E1EFAF33400C62E43 /* UIWindow+ctx.h in Headers */,</span><br><span class="line">				861E968F1EFAF33400C62E43 /* AVAudioSession+ctx.h in Headers */,</span><br><span class="line">				861E96901EFAF33400C62E43 /* NSString+csv.h in Headers */,</span><br><span class="line">				861E96911EFAF33400C62E43 /* NSLocale+G11NSupport.h in Headers */,</span><br><span class="line">				861E96921EFAF33400C62E43 /* NSString+ArabicSupport.h in Headers */,</span><br><span class="line">				861E96931EFAF33400C62E43 /* NSFileManager+decryption.h in Headers */,</span><br><span class="line">				861E96A41EFAF33400C62E43 /* CtxFileMonitor.h in Headers */,</span><br><span class="line">				861E96A51EFAF33400C62E43 /* CtxFileProtectionMonitor.h in Headers */,</span><br><span class="line">				861E96A61EFAF33400C62E43 /* MdxServerRequestUtil.h in Headers */,</span><br><span class="line">				861E96A71EFAF33400C62E43 /* MdxSamlToken.h in Headers */,</span><br><span class="line">				861E96A81EFAF33400C62E43 /* MdxSTATicket.h in Headers */,</span><br><span class="line">				861E96A91EFAF33400C62E43 /* MdxServerAppData.h in Headers */,</span><br><span class="line">				861E96AA1EFAF33400C62E43 /* MdxShareFileConnectors.h in Headers */,</span><br><span class="line">				861E96AB1EFAF33400C62E43 /* MdxSSMobileAppData.h in Headers */,</span><br><span class="line">				861E96AC1EFAF33400C62E43 /* CtxURLRewriter.h in Headers */,</span><br><span class="line">				861E96AD1EFAF33400C62E43 /* SerializeUtility.h in Headers */,</span><br><span class="line">				861E96AE1EFAF33400C62E43 /* NSDate+NSDate_Utils.h in Headers */,</span><br><span class="line">				861E96AF1EFAF33400C62E43 /* SerializePropertyProtocol.h in Headers */,</span><br><span class="line">				861E96B01EFAF33400C62E43 /* MdxDeviceSharedStorage.h in Headers */,</span><br><span class="line">				861E96B11EFAF33400C62E43 /* MdxPersistedCacheVaultStore.h in Headers */,</span><br><span class="line">				861E96B21EFAF33400C62E43 /* MdxSSOKeyManager.h in Headers */,</span><br><span class="line">				861E96B31EFAF33400C62E43 /* MdxSharedVaultKeyManager.h in Headers */,</span><br><span class="line">				861E96B41EFAF33400C62E43 /* MdxSharedVaultUEKeyManager.h in Headers */,</span><br><span class="line">				861E96B51EFAF33400C62E43 /* MdxSSOKeyEncryptedVault.h in Headers */,</span><br><span class="line">				861E96B61EFAF33400C62E43 /* MdxSharedKeychainStore.h in Headers */,</span><br><span class="line">				861E96B71EFAF33400C62E43 /* MdxTCPConnection.h in Headers */,</span><br><span class="line">				861E96B81EFAF33400C62E43 /* MdxSharedKeychainVault.h in Headers */,</span><br><span class="line">				861E96B91EFAF33400C62E43 /* MdxSharedPBVault.h in Headers */,</span><br><span class="line">				861E96BA1EFAF33400C62E43 /* MdxSharedVaultConstants.h in Headers */,</span><br><span class="line">				861E96BB1EFAF33400C62E43 /* MdxUserEntropyVault.h in Headers */,</span><br><span class="line">				861E96BC1EFAF33400C62E43 /* MdxAppDataVault.h in Headers */,</span><br><span class="line">				861E96BD1EFAF33400C62E43 /* MdxGenericVault.h in Headers */,</span><br><span class="line">				4E77061C20DD92FE00C592A0 /* CtxUIDragInteraction.h in Headers */,</span><br><span class="line">				861E96BE1EFAF33400C62E43 /* MdxErrorCode.h in Headers */,</span><br><span class="line">				861E96BF1EFAF33400C62E43 /* CTXMAM_Config.h in Headers */,</span><br><span class="line">				861E96C01EFAF33400C62E43 /* MdxAppState.h in Headers */,</span><br><span class="line">				861E96C11EFAF33400C62E43 /* MdxAppInfo.h in Headers */,</span><br><span class="line">				861E96C41EFAF33400C62E43 /* MdxUILifeEventRouter.h in Headers */,</span><br><span class="line">				344D581E1FCF607B006D0802 /* NSPersistentStoreCoordinator+ctx.h in Headers */,</span><br><span class="line">				861E96C51EFAF33400C62E43 /* MdxUIOfflineChallenger.h in Headers */,</span><br><span class="line">				861E96C71EFAF33400C62E43 /* MdxNetworkOnlyUILifeEventRouter.h in Headers */,</span><br><span class="line">				861E96C81EFAF33400C62E43 /* MdxUIAppLifecycleBaseRouter.h in Headers */,</span><br><span class="line">				861E96C91EFAF33400C62E43 /* MdxCachedLifeEvents.h in Headers */,</span><br><span class="line">				861E96CA1EFAF33400C62E43 /* MdxUIOperations.h in Headers */,</span><br><span class="line">				77112C99218CC0F300A6DA54 /* MdxEPDataProtection+Migration.h in Headers */,</span><br><span class="line">				861E96CB1EFAF33400C62E43 /* ObscureViewController.h in Headers */,</span><br><span class="line">				861E96CC1EFAF33400C62E43 /* MdxWindow.h in Headers */,</span><br><span class="line">				861E96CD1EFAF33400C62E43 /* CTXMAM_InactivityTimer.h in Headers */,</span><br><span class="line">				861E96CE1EFAF33400C62E43 /* CTXMAM_StatusWatchdog.h in Headers */,</span><br><span class="line">				861E96CF1EFAF33400C62E43 /* CTXMAM_WrappedAppLib.h in Headers */,</span><br><span class="line">				007B4C1322D8D90E007B8509 /* MdxSDKModeControl.h in Headers */,</span><br><span class="line">				77D239BF217525D00054F06D /* MdxEPDataProtection+MigrationPrivate.h in Headers */,</span><br><span class="line">				FB841A6222CAA32100FAA68F /* MdxUNNotificationDelegate.h in Headers */,</span><br><span class="line">				861E96D01EFAF33400C62E43 /* CTXMAM_ReceiverInteractor.h in Headers */,</span><br><span class="line">				861E96D11EFAF33400C62E43 /* CTXMAM_PolicyEngine.h in Headers */,</span><br><span class="line">				861E96D21EFAF33400C62E43 /* CtxAppContainmentPolicy.h in Headers */,</span><br><span class="line">				861E96D31EFAF33400C62E43 /* MdxOnlineSessionRequiredGracePeriod.h in Headers */,</span><br><span class="line">				861E96D41EFAF33400C62E43 /* CTXMAM_AuthData.h in Headers */,</span><br><span class="line">				861E96D51EFAF33400C62E43 /* MdxAgentAppReBinding.h in Headers */,</span><br><span class="line">				861E96D61EFAF33400C62E43 /* CtxLockWipeHandler.h in Headers */,</span><br><span class="line">				861E96D71EFAF33400C62E43 /* CtxAlertEngineTest.h in Headers */,</span><br><span class="line">				861E96D81EFAF33400C62E43 /* CTXMAM_AlertEngine.h in Headers */,</span><br><span class="line">				77CC73F0218AB63800E539E1 /* MdxEPDataProtection.h in Headers */,</span><br><span class="line">				861E96D91EFAF33400C62E43 /* CtxAlertReponseHandler.h in Headers */,</span><br><span class="line">				861E96DA1EFAF33400C62E43 /* CtxAlertEngineCommon.h in Headers */,</span><br><span class="line">				861E96DB1EFAF33400C62E43 /* CtxMDXAlert.h in Headers */,</span><br><span class="line">				861E96DC1EFAF33400C62E43 /* CtxAlertPrompt.h in Headers */,</span><br><span class="line">				861E96DD1EFAF33400C62E43 /* UIAlertAction+CtxAlert.h in Headers */,</span><br><span class="line">				861E96DE1EFAF33400C62E43 /* UIAlertController+CtxAlert.h in Headers */,</span><br><span class="line">				861E96DF1EFAF33400C62E43 /* UIAlertView+CTXWLUIAlertView.h in Headers */,</span><br><span class="line">				861E96E01EFAF33400C62E43 /* MdxFileMigrationHelper.h in Headers */,</span><br><span class="line">				861E96E11EFAF33400C62E43 /* MdxLocationServices.h in Headers */,</span><br><span class="line">				861E96E21EFAF33400C62E43 /* CtxWiFiUtils.h in Headers */,</span><br><span class="line">				861E96E31EFAF33400C62E43 /* CtxOfflineAuthConstants.h in Headers */,</span><br><span class="line">				861E96E41EFAF33400C62E43 /* SecureOfflineChallenge.h in Headers */,</span><br><span class="line">				861E96E51EFAF33400C62E43 /* MdxSecureOfflinePINvalidator.h in Headers */,</span><br><span class="line">				861E96E61EFAF33400C62E43 /* MdxX1UICoordinator.h in Headers */,</span><br><span class="line">				861E96E71EFAF33400C62E43 /* MdxPremiumActivation.h in Headers */,</span><br><span class="line">				861E96E81EFAF33400C62E43 /* MdxAppStoreBaseViewController.h in Headers */,</span><br><span class="line">				861E96E91EFAF33400C62E43 /* MdxAppStoreActivationViewController.h in Headers */,</span><br><span class="line">				861E96EA1EFAF33400C62E43 /* BaseAuthFlowViewController.h in Headers */,</span><br><span class="line">				861E96EB1EFAF33400C62E43 /* WorxPasscodeViewController.h in Headers */,</span><br><span class="line">				861E96EC1EFAF33400C62E43 /* WorxPinViewController.h in Headers */,</span><br><span class="line">				861E96ED1EFAF33400C62E43 /* X1AuthenticationViewController.h in Headers */,</span><br><span class="line">				861E96EE1EFAF33400C62E43 /* CTXBaseViewController.h in Headers */,</span><br><span class="line">				861E96EF1EFAF33400C62E43 /* SerializePropertyProtocol.h in Headers */,</span><br><span class="line">				861E96F01EFAF33400C62E43 /* SerializeUtility.h in Headers */,</span><br><span class="line">				861E96F11EFAF33400C62E43 /* AGAuthUIInput.h in Headers */,</span><br><span class="line">				861E96F21EFAF33400C62E43 /* AGAuthUIOutput.h in Headers */,</span><br><span class="line">				861E96F31EFAF33400C62E43 /* UIButton+Blocks.h in Headers */,</span><br><span class="line">				861E96F41EFAF33400C62E43 /* UIButton+Utils.h in Headers */,</span><br><span class="line">				FB841A5B22CA83BD00FAA68F /* UNUserNotificationCenter+UNUserNotificationCenter_apploader.h in Headers */,</span><br><span class="line">				861E96F51EFAF33400C62E43 /* UIColor+Utils.h in Headers */,</span><br><span class="line">				861E96F61EFAF33400C62E43 /* UIFont+Utils.h in Headers */,</span><br><span class="line">				861E96F71EFAF33400C62E43 /* UILabel+Utils.h in Headers */,</span><br><span class="line">				861E96F81EFAF33400C62E43 /* UITableView+Utils.h in Headers */,</span><br><span class="line">				861E96F91EFAF33400C62E43 /* UITextField+Utils.h in Headers */,</span><br><span class="line">				861E96FA1EFAF33400C62E43 /* RIButtonItem.h in Headers */,</span><br><span class="line">				861E96FB1EFAF33400C62E43 /* UIColor+CustomColors.h in Headers */,</span><br><span class="line">				861E96FC1EFAF33400C62E43 /* UIValidationProtocol.h in Headers */,</span><br><span class="line">				861E96FD1EFAF33400C62E43 /* TextFieldWithAccessoryImages.h in Headers */,</span><br><span class="line">				861E96FE1EFAF33400C62E43 /* MdxTableViewCell.h in Headers */,</span><br><span class="line">				861E96FF1EFAF33400C62E43 /* CTXSpinnerTableViewCell.h in Headers */,</span><br><span class="line">				861E97001EFAF33400C62E43 /* DualButtonTableViewCell.h in Headers */,</span><br><span class="line">				861E97011EFAF33400C62E43 /* ErrorTableViewCell.h in Headers */,</span><br><span class="line">				861E97031EFAF33400C62E43 /* ImageTableViewCell.h in Headers */,</span><br><span class="line">				861E97041EFAF33400C62E43 /* NextButtonTableViewCell.h in Headers */,</span><br><span class="line">				861E97051EFAF33400C62E43 /* TextFieldTableViewCell.h in Headers */,</span><br><span class="line">				861E97061EFAF33400C62E43 /* TextTableViewCell.h in Headers */,</span><br><span class="line">				861E97071EFAF33400C62E43 /* WorxPINTableViewCell.h in Headers */,</span><br><span class="line">				861E97081EFAF33400C62E43 /* CTXSpinnerView.h in Headers */,</span><br><span class="line">				861E97091EFAF33400C62E43 /* PopupView.h in Headers */,</span><br><span class="line">				861E970A1EFAF33400C62E43 /* WorxPinConstraints.h in Headers */,</span><br><span class="line">				861E970B1EFAF33400C62E43 /* CAMCommonFormsParser.h in Headers */,</span><br><span class="line">				861E970C1EFAF33400C62E43 /* CAMDSConstants.h in Headers */,</span><br><span class="line">				861E970D1EFAF33400C62E43 /* CAMDSUtil.h in Headers */,</span><br><span class="line">				861E970E1EFAF33400C62E43 /* CAMFormsElements.h in Headers */,</span><br><span class="line">				861E970F1EFAF33400C62E43 /* AsyncHttpLite.h in Headers */,</span><br><span class="line">				861E97101EFAF33400C62E43 /* CTXMAM_PersistentDataC.h in Headers */,</span><br><span class="line">				861E97111EFAF33400C62E43 /* CTXMAM_PersistentData.h in Headers */,</span><br><span class="line">				861E97121EFAF33400C62E43 /* CtxCrashReportManager.h in Headers */,</span><br><span class="line">				861E97131EFAF33400C62E43 /* MDXCrashInfo.h in Headers */,</span><br><span class="line">				861E97141EFAF33400C62E43 /* WrapLibHelper.h in Headers */,</span><br><span class="line">				861E97161EFAF33400C62E43 /* DSConstants.h in Headers */,</span><br><span class="line">				861E97171EFAF33400C62E43 /* RTLSupport.h in Headers */,</span><br><span class="line">				861E97181EFAF33400C62E43 /* RTLUITextField.h in Headers */,</span><br><span class="line">				861E97191EFAF33400C62E43 /* UIDevice+RTLSupport.h in Headers */,</span><br><span class="line">				861E971A1EFAF33400C62E43 /* UIImageView+RTLSupport.h in Headers */,</span><br><span class="line">				861E971B1EFAF33400C62E43 /* UIView+RTLSupport.h in Headers */,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">86B314701EFABF3900EBE9FE /* CtxDebuggingHelper.m in Sources */,</span><br><span class="line">				8693D88B1ED5D4CC00B6F0C8 /* GCDAsyncSocket.m in Sources */,</span><br><span class="line">				8693D8981ED5D4CC00B6F0C8 /* Helper.m in Sources */,</span><br><span class="line">				8693D8961ED5D4CC00B6F0C8 /* CtxEncoder.m in Sources */,</span><br><span class="line">				8693D88A1ED5D4CC00B6F0C8 /* CtxTCPSocketUtil.m in Sources */,</span><br><span class="line">				8693D8821ED5D4CC00B6F0C8 /* CtxSSOKeyManager.m in Sources */,</span><br><span class="line">				8693D87C1ED5D4CC00B6F0C8 /* CtxSSOKeyEncryptedVault.m in Sources */,</span><br><span class="line">				8693D8851ED5D4CC00B6F0C8 /* CtxVaultStore.m in Sources */,</span><br><span class="line">				8693D88E1ED5D4CC00B6F0C8 /* CtxSharedKeychainVault.m in Sources */,</span><br><span class="line">				8693D89B1ED5D4CC00B6F0C8 /* LogHelper.m in Sources */,</span><br><span class="line">				8693D8791ED5D4CC00B6F0C8 /* CtxUnmanagedContainer.m in Sources */,</span><br><span class="line">				8693D8901ED5D4CC00B6F0C8 /* CtxUrlForwardHelper.m in Sources */,</span><br><span class="line">				8693D89A1ED5D4CC00B6F0C8 /* CtxPasteboardHelper.m in Sources */,</span><br><span class="line">				8693D87D1ED5D4CC00B6F0C8 /* CtxSSOKeyEncryptedDynamicVault.m in Sources */,</span><br><span class="line">				8693D88F1ED5D4CC00B6F0C8 /* CtxVersion.m in Sources */,</span><br><span class="line">				8693D8781ED5D4CC00B6F0C8 /* CtxBasicContainer.m in Sources */,</span><br><span class="line">				8693D8921ED5D4CC00B6F0C8 /* Reachability.m in Sources */,</span><br><span class="line">				8693D88D1ED5D4CC00B6F0C8 /* CtxSharedDataNetworkSyncClient.m in Sources */,</span><br><span class="line">				8693D89C1ED5D4CC00B6F0C8 /* PolicyUtil.m in Sources */,</span><br><span class="line">				8693D87A1ED5D4CC00B6F0C8 /* CtxSSORecord.m in Sources */,</span><br><span class="line">				8693D87F1ED5D4CC00B6F0C8 /* CtxSSOKeyEncryptedDynamicEnvelopeVault.m in Sources */,</span><br><span class="line">				8693D8741ED5D4CC00B6F0C8 /* CtxDeviceSharedStorage.m in Sources */,</span><br><span class="line">				8693D8991ED5D4CC00B6F0C8 /* ToastAlikeNotificationView.m in Sources */,</span><br><span class="line">				8693D88C1ED5D4CC00B6F0C8 /* CtxSharedDataNetworkSyncUtil.m in Sources */,</span><br><span class="line">				8693D8911ED5D4CC00B6F0C8 /* CtxSharedKeychainMdxContainersUtil.m in Sources */,</span><br><span class="line">				8693D8951ED5D4CC00B6F0C8 /* SFHFKeyChainUtils.m in Sources */,</span><br><span class="line">				8693D87B1ED5D4CC00B6F0C8 /* CtxVaultContainer.m in Sources */,</span><br><span class="line">				8693D89E1ED5D4CC00B6F0C8 /* MAMSharedLib.m in Sources */,</span><br><span class="line">				8693D8831ED5D4CC00B6F0C8 /* CtxSecureDataEncryptor.m in Sources */,</span><br><span class="line">				8693D8871ED5D4CC00B6F0C8 /* CtxVaultEncryptionUtil.m in Sources */,</span><br><span class="line">				8693D8771ED5D4CC00B6F0C8 /* CtxInactivityPersistence.m in Sources */,</span><br><span class="line">				8693D8971ED5D4CC00B6F0C8 /* CtxKeyChainHelper.m in Sources */,</span><br><span class="line">				8693D8941ED5D4CC00B6F0C8 /* CRKeychainInterface.m in Sources */,</span><br><span class="line">				8693D8751ED5D4CC00B6F0C8 /* CtxFindPasteboardStore.m in Sources */,</span><br><span class="line">				8693D89D1ED5D4CC00B6F0C8 /* PolicyChecker.m in Sources */,</span><br><span class="line">				8693D8891ED5D4CC00B6F0C8 /* MdxTCPClient.m in Sources */,</span><br><span class="line">				8693D8881ED5D4CC00B6F0C8 /* MdxGenericVaultHelper.m in Sources */,</span><br><span class="line">				8693D8801ED5D4CC00B6F0C8 /* CtxSharedVault.m in Sources */,</span><br><span class="line">				8693D8861ED5D4CC00B6F0C8 /* CtxSecretVault.m in Sources */,</span><br><span class="line">				8693D8841ED5D4CC00B6F0C8 /* CtxUEKeyManager.m in Sources */,</span><br><span class="line">				8693D87E1ED5D4CC00B6F0C8 /* CtxVaultDataEnvelope.m in Sources */,</span><br><span class="line">				8693D8761ED5D4CC00B6F0C8 /* CtxSharedKeychainStore.m in Sources */,</span><br><span class="line">				8693D8811ED5D4CC00B6F0C8 /* CtxKeyManager.m in Sources */,</span><br></pre></td></tr></table></figure>

<p>9758 分割线</p>
<h1 id="Eliminate-flips"><a href="#Eliminate-flips" class="headerlink" title="Eliminate flips"></a>Eliminate flips</h1><h2 id="keychain"><a href="#keychain" class="headerlink" title="keychain"></a>keychain</h2><h3 id="for-first-party-apps"><a href="#for-first-party-apps" class="headerlink" title="for first party apps"></a>for first party apps</h3><p>VaultName: @”MAMSDKSharedData” </p>
<ul>
<li>#define kCTXSSO_HUB_AUTH_INFO            @”SharedAuthHubInfo”</li>
<li>#define kCTXSSO_ACCOUNTSSTOREPROPERTIES			@”AccountsStoreProperties”</li>
<li>#define kCTXSSO_APPS_INFO              @”appsinfo”</li>
<li>#define kCTXMDXRxPB_UE_METADATA       @”UserEntropyMetadata”</li>
<li>#define kCTXSSO_HUB_UNMANAGED_INFO         @”UnmanagedInfo”   —- [<strong>self</strong> generateUnmanagedData]</li>
<li>#define kCTXSSO_SUPPORTS_MAMAPPDATA_SHARING     @”supportsMAMAppDataSharing”</li>
</ul>
<h3 id="for-third-party-apps"><a href="#for-third-party-apps" class="headerlink" title="for third party apps"></a>for third party apps</h3><ol>
<li><p><strong>UNMANAGED_CONTAINER_NAME        @”CitrixMDXData1”</strong></p>
</li>
<li><p><strong>SSORECORD_NAME             @”CitrixMDXData2”</strong></p>
</li>
<li><p><strong>SSO_ENCRYPTED_VAULT_NAME        @”CitrixMDXData3”</strong></p>
</li>
<li><p><strong>SSO_ENCRYPTED_DYNAMIC_VAULT_NAME    @”CitrixMDXData5”</strong></p>
</li>
<li><p><strong>SHARED_VAULT_NAME            @”CitrixMDXData4”</strong></p>
</li>
</ol>
<h2 id="How-to-sync-MobileAppData"><a href="#How-to-sync-MobileAppData" class="headerlink" title="How to sync MobileAppData"></a>How to sync MobileAppData</h2><h3 id="Data-sharing-over-TCP"><a href="#Data-sharing-over-TCP" class="headerlink" title="Data sharing over TCP:"></a>Data sharing over TCP:</h3><p>(NSDictionary*)requestOverTCP</p>
<h3 id="Sync-MobileAppData-to-keychain"><a href="#Sync-MobileAppData-to-keychain" class="headerlink" title="Sync MobileAppData to keychain"></a>Sync MobileAppData to keychain</h3><ul>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ManagedbySHandMDX/MAMSDK">Managed by SH and MDX&#x2F;MAMSDK</a><ul>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ForFirstPartyApps">For First Party Apps</a></li>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ForThirdPartyApps">For Third Party Apps</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ManagedbyMAMSDK">Managed by MAM SDK</a></li>
</ul>
<h1 id="iOS-kechain"><a href="#iOS-kechain" class="headerlink" title="iOS kechain"></a>iOS kechain</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line"></span><br><span class="line">class CtxVaultContainer &#123;</span><br><span class="line"># - (id)initWithName:(NSString *) name store:(CtxFindPasteboardStore *) store;</span><br><span class="line"></span><br><span class="line"># - (BOOL)        synchronizeWithError: (NSError **) error;</span><br><span class="line"></span><br><span class="line"># - (NSDictionary *)    getUnencryptedContent;                          // getter is used by WorxHome to get the content out</span><br><span class="line"></span><br><span class="line"># - (void)        setUnencryptedContent: (NSDictionary *) content;      // setting is used by MDX to directly set the content</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class CtxBasicContainer &#123;</span><br><span class="line">- CtxKeyManager *     _keyManager;</span><br><span class="line"></span><br><span class="line">- NSString * containerName;</span><br><span class="line"></span><br><span class="line">- NSMutableDictionary * internalDictionary;</span><br><span class="line"></span><br><span class="line">- NSString * containerDescription;</span><br><span class="line"></span><br><span class="line">- CtxFindPasteboardStore * vaultStore;</span><br><span class="line"></span><br><span class="line"># - (id)initWithName:(NSString *) name store:(CtxFindPasteboardStore *) store;</span><br><span class="line"></span><br><span class="line"># - (void)initializeWithName: (NSString *) name store:(CtxFindPasteboardStore *) store;</span><br><span class="line"></span><br><span class="line"># - (id) getValueForKey: (NSString *) keyName error: (NSError **) error;</span><br><span class="line"></span><br><span class="line"># - (BOOL) setValueForKey: (NSString *) keyName value: (id) data error: (NSError **) error;</span><br><span class="line"></span><br><span class="line"># - (BOOL) deleteItemForKey: (NSString *) keyName error: (NSError **) error;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class NSObject</span><br><span class="line"></span><br><span class="line">CtxVaultContainer --|&gt; CtxBasicContainer</span><br><span class="line">CtxBasicContainer --|&gt; NSObject</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Containment%20SDK%20Deprecated%20Usage/deprecated%20usage/" rel="prev" title="">
                  <i class="fa fa-angle-left"></i> 
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/android-mamsdk/android-mobile-sdk%20reform/" rel="next" title="">
                   <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Supremes</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
