<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 8.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js" defer></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Supremes">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/3/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Supremes</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">82</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/Secure%20Mail%20and%20Secure%20Web/Sensitivity%20lables/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/Secure%20Mail%20and%20Secure%20Web/Sensitivity%20lables/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Cosume-MSAL"><a href="#Cosume-MSAL" class="headerlink" title="Cosume MSAL"></a>Cosume MSAL</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">key</span>&gt;</span>CFBundleURLSchemes<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">string</span>&gt;</span>msauth.com.citrix.mail.ios.InternalTest<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>msauthv2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Add-UI"><a href="#Add-UI" class="headerlink" title="Add UI"></a>Add UI</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSUInteger , TokenFieldDisplayMode)</span><br><span class="line">&#123;</span><br><span class="line">    TokenFieldDisplayModeTokens,        // Show as individual tokens</span><br><span class="line">    TokenFieldDisplayModePreviewText,   // Show as preview text</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<p>MAC </p>
<p>wireless: 5c:52:30:9d:40:4d</p>
<p>f8:e4:3b:83:29:71</p>
<p>toPreviewLabel: To</p>
<p>ccBccPreviewLabel: Cc&#x2F;Bcc</p>
<p>prefixLabel: Subject</p>
<h2 id="In-box"><a href="#In-box" class="headerlink" title="In-box"></a>In-box</h2><p>message.itemBody.bodyAsText</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/Knowledge/%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/Knowledge/%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="yuanbao"><a href="#yuanbao" class="headerlink" title="yuanbao"></a>yuanbao</h1><h3 id="认证授权过程中的协议与Token详解"><a href="#认证授权过程中的协议与Token详解" class="headerlink" title="认证授权过程中的协议与Token详解"></a>认证授权过程中的协议与Token详解</h3><p>在认证（Authentication）和授权（Authorization）过程中，协议和Token是确保安全访问资源的基石。以下从协议和Token两个维度进行系统性阐述：</p>
<hr>
<h3 id="一、认证授权协议"><a href="#一、认证授权协议" class="headerlink" title="一、认证授权协议"></a><strong>一、认证授权协议</strong></h3><h4 id="1-OAuth-2-0"><a href="#1-OAuth-2-0" class="headerlink" title="1. OAuth 2.0"></a><strong>1. OAuth 2.0</strong></h4><ul>
<li><strong>用途</strong>：专注于<strong>授权</strong>（资源访问权限的委派），而非直接处理用户身份认证。</li>
<li><strong>核心角色</strong>：<ul>
<li>客户端（Client）：请求访问资源的应用。</li>
<li>资源所有者（Resource Owner）：用户。</li>
<li>授权服务器（Authorization Server）：颁发Token。</li>
<li>资源服务器（Resource Server）：存储受保护资源。</li>
</ul>
</li>
<li><strong>授权模式</strong>：<ul>
<li><strong>授权码模式（Authorization Code）</strong>：适用于Web应用（服务端安全）。</li>
<li><strong>隐式模式（Implicit）</strong>：适用于SPA或原生App（客户端不安全）。</li>
<li><strong>密码模式（Resource Owner Password Credentials）</strong>：用户直接提供密码（仅信任客户端时使用）。</li>
<li><strong>客户端凭证模式（Client Credentials）</strong>：服务端间通信（无用户参与）。</li>
</ul>
</li>
<li><strong>场景</strong>：第三方应用访问用户资源（如微信登录后获取用户数据）。</li>
</ul>
<h4 id="2-OpenID-Connect-OIDC"><a href="#2-OpenID-Connect-OIDC" class="headerlink" title="2. OpenID Connect (OIDC)"></a><strong>2. OpenID Connect (OIDC)</strong></h4><ul>
<li><strong>用途</strong>：在OAuth 2.0基础上扩展，解决<strong>身份认证</strong>问题。</li>
<li><strong>核心组件</strong>：<ul>
<li><strong>ID Token</strong>：JWT格式，包含用户身份信息（如姓名、邮箱）。</li>
<li><strong>UserInfo端点</strong>：通过Access Token获取用户详细信息。</li>
</ul>
</li>
<li><strong>流程</strong>：在OAuth流程中返回ID Token，明确用户身份。</li>
<li><strong>场景</strong>：单点登录（SSO），如使用Google账号登录第三方应用。</li>
</ul>
<h4 id="3-SAML-2-0"><a href="#3-SAML-2-0" class="headerlink" title="3. SAML 2.0"></a><strong>3. SAML 2.0</strong></h4><ul>
<li><strong>用途</strong>：企业级<strong>认证与授权</strong>，基于XML实现跨域单点登录。</li>
<li><strong>核心组件</strong>：<ul>
<li><strong>断言（Assertion）</strong>：包含用户身份和权限信息（类似Token）。</li>
<li><strong>身份提供者（IdP）</strong>：认证用户并生成SAML断言。</li>
<li><strong>服务提供者（SP）</strong>：依赖IdP的断言授权访问。</li>
</ul>
</li>
<li><strong>流程</strong>：用户访问SP → 重定向到IdP认证 → 返回SAML断言 → SP验证断言。</li>
<li><strong>场景</strong>：企业内网SSO（如使用ADFS实现Office 365登录）。</li>
</ul>
<h4 id="4-LDAP（Lightweight-Directory-Access-Protocol）"><a href="#4-LDAP（Lightweight-Directory-Access-Protocol）" class="headerlink" title="4. LDAP（Lightweight Directory Access Protocol）"></a><strong>4. LDAP（Lightweight Directory Access Protocol）</strong></h4><ul>
<li><strong>用途</strong>：访问和维护<strong>目录服务</strong>（如用户、组织信息查询）。</li>
<li><strong>常见实现</strong>：Microsoft Active Directory（AD）、OpenLDAP。</li>
<li><strong>场景</strong>：企业内部用户认证和权限管理（如VPN登录验证）。</li>
</ul>
<h4 id="5-Kerberos"><a href="#5-Kerberos" class="headerlink" title="5. Kerberos"></a><strong>5. Kerberos</strong></h4><ul>
<li><strong>用途</strong>：基于票据的<strong>网络认证协议</strong>，防止中间人攻击。</li>
<li><strong>核心组件</strong>：<ul>
<li><strong>TGT（Ticket-Granting Ticket）</strong>：用户首次认证后获取的长期票据。</li>
<li><strong>服务票据（Service Ticket）</strong>：访问具体服务时使用。</li>
</ul>
</li>
<li><strong>场景</strong>：Windows域环境中的资源访问认证。</li>
</ul>
<hr>
<h3 id="二、认证授权中的Token类型"><a href="#二、认证授权中的Token类型" class="headerlink" title="二、认证授权中的Token类型"></a><strong>二、认证授权中的Token类型</strong></h3><h4 id="1-Access-Token"><a href="#1-Access-Token" class="headerlink" title="1. Access Token"></a><strong>1. Access Token</strong></h4><ul>
<li><strong>用途</strong>：客户端访问资源服务器的凭证。</li>
<li><strong>格式</strong>：<ul>
<li><strong>不透明Token</strong>：随机字符串，需向授权服务器验证（如OAuth 2.0默认）。</li>
<li><strong>JWT（自包含Token）</strong>：包含用户信息和权限，资源服务器可本地验证。</li>
</ul>
</li>
<li><strong>生命周期</strong>：短期有效（如1小时），需配合Refresh Token续期。</li>
</ul>
<h4 id="2-Refresh-Token"><a href="#2-Refresh-Token" class="headerlink" title="2. Refresh Token"></a><strong>2. Refresh Token</strong></h4><ul>
<li><strong>用途</strong>：在Access Token过期后，获取新的Access Token。</li>
<li><strong>特点</strong>：<ul>
<li>长期有效（如7天），但可撤销。</li>
<li>仅存储于客户端和授权服务器，不暴露给资源服务器。</li>
</ul>
</li>
<li><strong>安全要求</strong>：必须通过HTTPS传输，避免泄露。</li>
</ul>
<h4 id="3-ID-Token（OpenID-Connect）"><a href="#3-ID-Token（OpenID-Connect）" class="headerlink" title="3. ID Token（OpenID Connect）"></a><strong>3. ID Token（OpenID Connect）</strong></h4><ul>
<li><p><strong>格式</strong>：JWT，包含用户身份信息（如<code>sub</code>用户ID、<code>email</code>）。</p>
</li>
<li><p><strong>签名</strong>：由授权服务器签名，防止篡改。</p>
</li>
<li><p><strong>示例</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;iss&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://accounts.google.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1234567890&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exp&quot;</span><span class="punctuation">:</span> <span class="number">1620000000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="4-JWT（JSON-Web-Token）"><a href="#4-JWT（JSON-Web-Token）" class="headerlink" title="4. JWT（JSON Web Token）"></a><strong>4. JWT（JSON Web Token）</strong></h4><ul>
<li><strong>结构</strong>：<ul>
<li><strong>Header</strong>：算法（如HS256、RS256）和Token类型。</li>
<li><strong>Payload</strong>：声明（Claims），如用户ID、过期时间。</li>
<li><strong>Signature</strong>：防止数据篡改（Header+Payload+密钥生成）。</li>
</ul>
</li>
<li><strong>用途</strong>：<ul>
<li>Access Token（自包含，无需查库验证）。</li>
<li>ID Token（传递用户信息）。</li>
</ul>
</li>
<li><strong>风险</strong>：若密钥泄露或弱算法（如HS256密钥简单），可能导致伪造。</li>
</ul>
<h4 id="5-Session-Token（会话Token）"><a href="#5-Session-Token（会话Token）" class="headerlink" title="5. Session Token（会话Token）"></a><strong>5. Session Token（会话Token）</strong></h4><ul>
<li><strong>用途</strong>：服务端维护用户会话状态（如PHP的PHPSESSID）。</li>
<li><strong>存储</strong>：<ul>
<li>服务端：Session数据存储在内存&#x2F;数据库（如Redis）。</li>
<li>客户端：通过Cookie或LocalStorage传递Session ID。</li>
</ul>
</li>
<li><strong>与JWT对比</strong>：<ul>
<li><strong>有状态 vs 无状态</strong>：Session需服务端存储状态，JWT自包含。</li>
<li><strong>扩展性</strong>：JWT更适合分布式系统，Session需共享存储。</li>
</ul>
</li>
</ul>
<h4 id="6-SAML断言"><a href="#6-SAML断言" class="headerlink" title="6. SAML断言"></a><strong>6. SAML断言</strong></h4><ul>
<li><strong>格式</strong>：XML结构，包含用户属性和授权决策。</li>
<li><strong>类型</strong>：<ul>
<li><strong>认证断言</strong>：用户已通过IdP认证。</li>
<li><strong>属性断言</strong>：用户属性（如角色、部门）。</li>
<li><strong>授权决策断言</strong>：用户是否有权访问资源。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="三、协议与Token的配合使用"><a href="#三、协议与Token的配合使用" class="headerlink" title="三、协议与Token的配合使用"></a><strong>三、协议与Token的配合使用</strong></h3><h4 id="1-OAuth-2-0-OpenID-Connect"><a href="#1-OAuth-2-0-OpenID-Connect" class="headerlink" title="1. OAuth 2.0 + OpenID Connect"></a><strong>1. OAuth 2.0 + OpenID Connect</strong></h4><ul>
<li><strong>流程</strong>：<ol>
<li>用户通过OAuth授权客户端访问资源。</li>
<li>授权服务器返回Access Token（访问资源）和ID Token（认证身份）。</li>
<li>客户端通过UserInfo端点获取详细信息。</li>
</ol>
</li>
<li><strong>优势</strong>：同时解决授权（OAuth）和认证（OIDC）需求。</li>
</ul>
<h4 id="2-SAML-LDAP"><a href="#2-SAML-LDAP" class="headerlink" title="2. SAML + LDAP"></a><strong>2. SAML + LDAP</strong></h4><ul>
<li><strong>流程</strong>：<ol>
<li>用户登录企业IdP（如AD），生成SAML断言。</li>
<li>SP（如SaaS应用）验证断言，授权访问。</li>
<li>用户属性通过LDAP从目录服务获取。</li>
</ol>
</li>
<li><strong>场景</strong>：企业应用集成AD实现SSO。</li>
</ul>
<hr>
<h3 id="四、安全注意事项"><a href="#四、安全注意事项" class="headerlink" title="四、安全注意事项"></a><strong>四、安全注意事项</strong></h3><ol>
<li><p><strong>Token传输安全</strong>：</p>
<ul>
<li>必须使用HTTPS，防止中间人窃听。</li>
<li>避免URL传递Token（可能被日志记录）。</li>
</ul>
</li>
<li><p><strong>Token存储安全</strong>：</p>
<ul>
<li>浏览器端：使用HttpOnly Cookie防止XSS攻击。</li>
<li>移动端：安全存储（如Android Keystore、iOS Keychain）。</li>
</ul>
</li>
<li><p><strong>密钥管理</strong>：</p>
<ul>
<li>JWT签名密钥需定期轮换。</li>
<li>避免硬编码密钥，使用密钥管理服务（如AWS KMS）。</li>
</ul>
</li>
<li><p><strong>防止重放攻击</strong>：</p>
<ul>
<li>Token设置短期有效期。</li>
<li>使用<code>nonce</code>参数（OIDC）或时间戳校验。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="五、总结与选型建议"><a href="#五、总结与选型建议" class="headerlink" title="五、总结与选型建议"></a><strong>五、总结与选型建议</strong></h3><table>
<thead>
<tr>
<th><strong>场景</strong></th>
<th><strong>推荐协议</strong></th>
<th><strong>Token类型</strong></th>
</tr>
</thead>
<tbody><tr>
<td>第三方应用授权（如社交登录）</td>
<td>OAuth 2.0 + OIDC</td>
<td>Access Token + ID Token</td>
</tr>
<tr>
<td>企业SSO（内部系统集成）</td>
<td>SAML 2.0</td>
<td>SAML断言</td>
</tr>
<tr>
<td>移动端&#x2F;SPA无状态认证</td>
<td>OIDC + JWT</td>
<td>JWT（自包含Access Token）</td>
</tr>
<tr>
<td>服务间通信</td>
<td>OAuth 2.0客户端凭证模式</td>
<td>不透明Token或JWT</td>
</tr>
</tbody></table>
<p><strong>最佳实践</strong>：</p>
<ul>
<li>优先使用OAuth 2.1（合并OAuth 2.0安全增强）。</li>
<li>对公共客户端（如SPA）启用PKCE（Proof Key for Code Exchange）。</li>
<li>定期审计Token权限，遵循最小权限原则。</li>
</ul>
<p>在现代网络安全体系中，认证（Authentication）和授权（Authorization）是保障系统安全的核心机制。以下是系统性梳理相关协议和Token技术的框架：</p>
<h3 id="一、认证授权核心协议"><a href="#一、认证授权核心协议" class="headerlink" title="一、认证授权核心协议"></a>一、认证授权核心协议</h3><ol>
<li><strong>OAuth 2.0</strong><ul>
<li>协议定位：专注于授权的标准协议，支持第三方应用安全获取资源访问权限</li>
<li>核心流程：</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A[资源所有者] --&gt;|用户授权|B(授权服务器)</span><br><span class="line">B --&gt;|发放授权码|C(客户端)</span><br><span class="line">C --&gt;|交换令牌|D(资源服务器)</span><br></pre></td></tr></table></figure>

<ul>
<li>典型场景：社交媒体登录（如微信&#x2F;QQ登录）、API访问控制</li>
<li>安全增强：PKCE（Proof Key for Code Exchange）防止授权码劫持<ol start="2">
<li><strong>OpenID Connect (OIDC)</strong></li>
</ol>
</li>
<li>协议定位：基于OAuth 2.0的身份认证层</li>
<li>核心扩展：</li>
<li>ID Token：携带用户身份信息的JWT</li>
<li>UserInfo Endpoint：提供标准化用户信息接口</li>
<li>应用场景：单点登录（SSO）、跨域身份验证<ol start="3">
<li><strong>SAML 2.0</strong></li>
</ol>
</li>
<li>协议定位：企业级身份联邦标准</li>
<li>核心组件：</li>
<li>断言（Assertion）：包含用户身份、权限等信息</li>
<li>身份提供者（IdP）与服务提供者（SP）</li>
<li>部署特点：基于XML格式，常见于企业内部系统集成<ol start="4">
<li><strong>Kerberos</strong></li>
</ol>
</li>
<li>协议定位：基于票据的网络认证协议</li>
<li>核心机制：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">C[客户端] --&gt;|AS_REQ|KDC[密钥分发中心]</span><br><span class="line">KDC --&gt;|AS_REP|C</span><br><span class="line">C --&gt;|TGS_REQ|KDC</span><br><span class="line">KDC --&gt;|TGS_REP|C</span><br><span class="line">C --&gt;|AP_REQ|S[服务端]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>典型应用：Windows域环境、Hadoop集群</p>
<h3 id="二、关键Token技术"><a href="#二、关键Token技术" class="headerlink" title="二、关键Token技术"></a>二、关键Token技术</h3><ol start="5">
<li><strong>JWT (JSON Web Token)</strong></li>
</ol>
</li>
<li><p>结构组成：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;alg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HS256&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;typ&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;sub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user123&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;iat&quot;</span><span class="punctuation">:</span> <span class="number">1646092800</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;exp&quot;</span><span class="punctuation">:</span> <span class="number">1646096400</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>签名方式：HS256（对称加密）、RS256（非对称加密）</p>
</li>
<li><p>应用场景：无状态会话管理、微服务间通信</p>
<ol start="6">
<li><strong>Bearer Token</strong></li>
</ol>
</li>
<li><p>安全特性：</p>
</li>
<li><p>无状态性</p>
</li>
<li><p>传输层安全要求（HTTPS）</p>
</li>
<li><p>存储建议：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安全存储示例（客户端）</span></span><br><span class="line"><span class="keyword">if</span> request.headers.get(<span class="string">&#x27;Authorization&#x27;</span>):</span><br><span class="line">token = request.headers[<span class="string">&#x27;Authorization&#x27;</span>].split()[<span class="number">1</span>]</span><br><span class="line"><span class="comment"># 验证签名后存储于内存缓存</span></span><br></pre></td></tr></table></figure>

<ol start="7">
<li><strong>Session Token</strong></li>
</ol>
</li>
<li><p>典型实现：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ASP.NET Core示例</span></span><br><span class="line"><span class="keyword">var</span> claims = <span class="keyword">new</span> List&lt;Claim&gt; &#123; <span class="keyword">new</span> Claim(ClaimTypes.Name, username) &#125;;</span><br><span class="line"><span class="keyword">var</span> identity = <span class="keyword">new</span> ClaimsIdentity(claims, <span class="string">&quot;Cookies&quot;</span>);</span><br><span class="line"><span class="keyword">await</span> HttpContext.SignInAsync(<span class="keyword">new</span> ClaimsPrincipal(identity));</span><br></pre></td></tr></table></figure>
</li>
<li><p>状态管理：依赖服务器端存储（如Redis）</p>
<ol start="8">
<li><strong>HMAC Token</strong></li>
</ol>
</li>
<li><p>生成算法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&#x27;crypto&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> secret = <span class="string">&#x27;your-secret-key&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&#x27;user_id=123&amp;timestamp=1646092800&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> hmac = crypto.<span class="title function_">createHmac</span>(<span class="string">&#x27;sha256&#x27;</span>, secret);</span><br><span class="line">hmac.<span class="title function_">update</span>(data);</span><br><span class="line"><span class="keyword">const</span> token = hmac.<span class="title function_">digest</span>(<span class="string">&#x27;hex&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>防篡改机制：验证签名与时间戳</p>
<h3 id="三、协议与Token协同架构"><a href="#三、协议与Token协同架构" class="headerlink" title="三、协议与Token协同架构"></a>三、协议与Token协同架构</h3></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A[客户端] --&gt;|OIDC授权码| B[认证服务器]</span><br><span class="line">B --&gt;|ID Token + Access Token| A</span><br><span class="line">A --&gt;|Bearer Token| C[资源服务器]</span><br><span class="line">C --&gt;|JWT验证| D[业务逻辑]</span><br><span class="line">D --&gt;|SAML断言| E[第三方服务]</span><br></pre></td></tr></table></figure>

<pre><code> ### 四、技术选择建议
</code></pre>
<ol start="9">
<li><p><strong>企业级系统</strong>：优先考虑SAML 2.0 + JWT组合</p>
</li>
<li><p><strong>第三方集成</strong>：OAuth 2.0&#x2F;OIDC是首选方案</p>
</li>
<li><p><strong>高性能场景</strong>：HMAC Token适用于轻量级API保护</p>
</li>
<li><p><strong>遗留系统</strong>：Kerberos在Windows环境仍具优势</p>
<h3 id="五、安全增强措施"><a href="#五、安全增强措施" class="headerlink" title="五、安全增强措施"></a>五、安全增强措施</h3></li>
<li><p>Token安全策略：</p>
<ul>
<li>设置合理过期时间（建议30分钟~1小时）</li>
<li>使用刷新令牌（Refresh Token）机制</li>
<li>强制HTTPS传输</li>
</ul>
</li>
<li><p>存储安全：</p>
<ul>
<li>客户端避免明文存储（推荐使用Secure Storage API）</li>
<li>服务端采用加密存储（AES-256-GCM）</li>
</ul>
</li>
<li><p>防御措施：</p>
<ul>
<li>防止Token劫持（SameSite Cookie策略）</li>
<li>实施Token黑名单机制</li>
<li>定期进行渗透测试<br>当前技术演进方向包括：</li>
</ul>
</li>
</ol>
<ul>
<li>OAuth 2.1标准制定（强化安全要求）</li>
<li>WebAuthn（FIDO2）生物认证集成</li>
<li>零信任架构（ZTA）下的动态授权模型<br>在具体实施时，需结合RFC标准文档（如RFC 6749 OAuth 2.0规范）和行业最佳实践（如OWASP API Security Top 10）进行方案设计。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MCP%20Introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MCP%20Introduction/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="What-is-the-MCP"><a href="#What-is-the-MCP" class="headerlink" title="What is the MCP?"></a>What is the MCP?</h2><ul>
<li>MCP (Model Context Protocol) is an <strong>open-source standard</strong> for connecting AI applications to external systems.</li>
<li>Using MCP, AI applications like Claude or ChatGPT can connect to <strong>data sources</strong> (e.g. local files, databases), <strong>tools</strong> (e.g. search engines, calculators) and <strong>workflows</strong> (e.g. specialized prompts)—enabling them to access key information and perform tasks.</li>
<li>Think of MCP like a USB-C port for AI applications. Just as USB-C provides a standardized way to connect electronic devices, MCP provides a standardized way to connect AI applications to external systems.</li>
</ul>
<p><img src="https://mintcdn.com/mcp/bEUxYpZqie0DsluH/images/mcp-simple-diagram.png?fit=max&auto=format&n=bEUxYpZqie0DsluH&q=85&s=35268aa0ad50b8c385913810e7604550" alt="img"></p>
<h3 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h3><p>Key participants in the MCP architecture are:</p>
<ul>
<li><strong>MCP Host</strong>: The AI application that coordinates and manages one or multiple MCP clients</li>
<li><strong>MCP Client</strong>: A component that maintains a connection to an MCP server and obtains context from an MCP server for the MCP host to use</li>
<li><strong>MCP Server</strong>: A program that provides context to MCP clients</li>
</ul>
<p><img src="/../Pics/WX20251124-172727@2x.png" alt="img"></p>
<h4 id="Data-Layer"><a href="#Data-Layer" class="headerlink" title="Data Layer"></a>Data Layer</h4><p>Defines the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JSON-RPC#Implementations"><strong>JSON-RPC</strong></a> based protocol for client-server communication, including lifecycle management, and core primitives, such as tools, resources, prompts and notifications.</p>
<p>Core Primitives:</p>
<ul>
<li><strong>Tools</strong>: Executable functions that AI applications can invoke to perform actions (e.g., file operations, API calls, database queries)</li>
<li><strong>Resources</strong>: Data sources that provide contextual information to AI applications (e.g., file contents, database records, API responses)</li>
<li><strong>Prompts</strong>: Reusable templates that help structure interactions with language models (e.g., system prompts, few-shot examples)</li>
</ul>
<h4 id="Transport-Layer"><a href="#Transport-Layer" class="headerlink" title="Transport Layer"></a>Transport Layer</h4><p>Defines the communication mechanisms and channels that enable data exchange between clients and servers, including transport-specific connection establishment, message framing, and authorization.</p>
<ul>
<li><strong>STDIO</strong> : Uses standard input&#x2F;output streams for direct process communication between <strong>local processes</strong> on the same machine, providing optimal performance with no network overhead.</li>
<li><strong>Server-Sent Events (SSE)</strong> : This approach required two separate endpoints:<ol>
<li>An SSE endpoint (<code>/sse</code>) that established a persistent connection for the client to receive responses</li>
<li>A separate messages endpoint (<code>/sse/messages</code>) where clients would send request</li>
</ol>
</li>
<li><strong>Streamable HTTP</strong> : Offers a more elegant solution by enabling <strong>bidirectional communication through a single endpoint</strong>.</li>
</ul>
<p><img src="https://picx.zhimg.com/50/v2-987260a35809fece3edb804df7691c0a_720w.jpg?source=2c26e567" alt="img"></p>
<h2 id="Develop-a-MCP-Server"><a href="#Develop-a-MCP-Server" class="headerlink" title="Develop a MCP Server"></a>Develop a MCP Server</h2><ol>
<li>Integrate MCP SDK</li>
<li>Develop tools&#x2F;resources&#x2F;prompts as your business needs</li>
<li>Debug it with MCP Inspector</li>
</ol>
<h2 id="Company-Policy-for-MCP-Usage"><a href="#Company-Policy-for-MCP-Usage" class="headerlink" title="Company Policy for MCP Usage"></a>Company Policy for MCP Usage</h2><h4 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h4><ul>
<li><strong>Customer Data</strong>  You may not use customer data in AI systems without confirming that we are<br>contractually and legally allowed to do so. In the absence of such contractual or other legal rights,<br>you must secure customer instruction to use their data in AI systems.</li>
<li><strong>Company Data:</strong> Company data is classified according to the Company’s Information Classification &amp;<br>Handling Policy.<ul>
<li>Public &#x2F; Non-Confidential Information. You may use public Company data in AI systems.</li>
<li>Confidential Information. You may not use Confidential Information to train any AI model. In<br>addition, the following rules regarding the different tiers of Confidential Information apply:<ul>
<li>Confidential: Low. You may use confidential: low Company data with an articulated<br>legitimate business need.</li>
<li>Confidential: Restricted. You may not use restricted Company data in AI systems<br>without your ELT member’s approval.</li>
<li>Confidential: Highly Restricted. You may not use highly restricted Company data in AI<br>systems without your ELT member’s sign-off and the CLAO’s review and approval.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Third Party Data</strong>: For other third party (e.g., partner, vendor, public) data, you may be able to leverage<br>such data for use in AI systems, provided that you have an appropriate contractual agreement in<br>place with the third party data owner that affords the Company rights to use such data sets. If you are<br>unsure as to whether we have such contractual rights, you may contact the Legal-Commercial team<br>via <a href="mailto:&#x41;&#x73;&#x6b;&#x4c;&#101;&#x67;&#97;&#x6c;&#64;&#x63;&#x6c;&#x6f;&#x75;&#100;&#46;&#x63;&#x6f;&#x6d;">AskLegal@cloud.com</a>.</li>
<li><strong>Synthetic Data:</strong> You may use synthetic&#x2F;fake data in AI systems&#x2F;model training, POCs, and testing.</li>
</ul>
<p>CSG Approved MCPs</p>
<p><img src="/../Pics/WX20251124-172550@2x.png" alt="img"></p>
<p>Guideline for using MCP in CSG</p>
<p><a target="_blank" rel="noopener" href="https://docs.google.com/document/d/10x2_jw_C3MCK9m62C3LcSGPflhqiByf4rNf2y_9kvIw/edit?tab=t.0">https://docs.google.com/document/d/10x2_jw_C3MCK9m62C3LcSGPflhqiByf4rNf2y_9kvIw/edit?tab=t.0</a></p>
<ol>
<li><strong>CSG Hosted MCP Servers (Internal):</strong> Must be internal, have RBAC, not send CSG data to third parties, and use a CSG-approved AI model (Contact Adam Mongiovi).</li>
<li><strong>Third-Party Hosted MCP Servers (External):</strong> Must use a vendor with an existing CSG trust relationship (verified with Adam Mongiovi), have RBAC, and access only approved context.</li>
<li><strong>MCP Servers for Customer Usage (Customer-Facing):</strong> Must be reviewed by the ProdSec team (Contact Mohan Sekar), prevent customers from accessing private CSG data, be multi-tenant aware, and support RBAC controls.</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Remove%20MDX%20Support/SecureMail%20-%20Remove%20MDX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Remove%20MDX%20Support/SecureMail%20-%20Remove%20MDX/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h1><h2 id="WorxMailAppStore"><a href="#WorxMailAppStore" class="headerlink" title="WorxMailAppStore"></a>WorxMailAppStore</h2><p>Build Internal AppStore</p>
<p>Build External AppStore</p>
<h2 id="WorxMailEnterprise"><a href="#WorxMailEnterprise" class="headerlink" title="WorxMailEnterprise"></a>WorxMailEnterprise</h2><p>Prepare</p>
<p>Run Unit Tests</p>
<p><strong>Failed cases:</strong></p>
<p>SMimeCertVerificationTests： 17</p>
<p>SMimeCertImportTests: 7</p>
<p>CertificateWrapperTests: 5</p>
<h1 id="Integrate-MAM-SDK"><a href="#Integrate-MAM-SDK" class="headerlink" title="Integrate MAM SDK"></a>Integrate MAM SDK</h1><ul>
<li><p><input disabled="" type="checkbox"> 
Create framework download script</p>
</li>
<li><p>Modify the API usage from DM(sdkframeworkloader) to Appcore&#x2F;core</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/MAM%20SDK%20TEST%20CYCLE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/MAM%20SDK%20TEST%20CYCLE/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Secure-Mail"><a href="#Secure-Mail" class="headerlink" title="Secure Mail"></a>Secure Mail</h1><ul>
<li><p>compliance - user account change</p>
</li>
<li><p>app passcode</p>
</li>
<li><p>device passcode</p>
</li>
<li><p>app restrictions</p>
<ul>
<li><p>Cut&#x2F;Copy&#x2F;Paste</p>
</li>
<li><p>Photo Library</p>
</li>
</ul>
</li>
</ul>
<h1 id="Secure-Web"><a href="#Secure-Web" class="headerlink" title="Secure Web"></a>Secure Web</h1><ul>
<li><p>MDX - MAM SDK Migration </p>
</li>
<li><p>AG Configuration</p>
<ul>
<li><p>Split tunnel</p>
</li>
<li><p>Split DNS</p>
</li>
<li><p>LDAP Auth</p>
</li>
<li><p>Client Cert</p>
</li>
<li><p>Client Cert + LDAP</p>
</li>
</ul>
</li>
<li><p>Network Access</p>
<ul>
<li><p>web-sso</p>
</li>
<li><p>unrestricted</p>
</li>
<li><p>blocked</p>
</li>
</ul>
</li>
<li><p>Connection Timeout - CXM-8345</p>
<ul>
<li><p>WIFI on&#x2F;off</p>
</li>
<li><p>website idle timeout and ag connection timeout</p>
</li>
</ul>
</li>
<li><p>verify websso tunnel connected and disconnected</p>
</li>
<li><p>The Endpoint website - http&#x2F;https protocols</p>
</li>
<li><p>The Endpoint website - Auth configuration - CXM-993110</p>
<ul>
<li><p>Anonymous Auth</p>
</li>
<li><p>Basic Auth</p>
</li>
<li><p>Digest Auth</p>
</li>
<li><p>NTLM Auth</p>
</li>
</ul>
</li>
<li><p>The Endpoint website - Server Cert configuration - CXM-993111</p>
<ul>
<li><p>Trusted SelfSigned Cert</p>
</li>
<li><p>Trusted Public Cert</p>
</li>
<li><p>Trusted WildCard Cert</p>
</li>
</ul>
</li>
<li><p>Geofence</p>
</li>
</ul>
<h2 id="Considering-to-move-to-secure-web"><a href="#Considering-to-move-to-secure-web" class="headerlink" title="Considering to move to secure web"></a>Considering to move to secure web</h2><ul>
<li><p>Download Manager</p>
</li>
<li><p>Mail Redirection</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/MAM%20SDK%20-%20Provide%20Policy%20Ready%20Callback/Provide%20Policy%20Ready%20Callback/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/MAM%20SDK%20-%20Provide%20Policy%20Ready%20Callback/Provide%20Policy%20Ready%20Callback/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><p>There is one scenario needed to be handled well for 3rd party app. If policy is not ready but MAM SDK initialize successfully, and then request to internal resource will failed. </p>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><h1 id="SM-SW-How-it-works"><a href="#SM-SW-How-it-works" class="headerlink" title="SM&#x2F;SW - How it works?"></a>SM&#x2F;SW - How it works?</h1><p>Implemented in <code>-[TransientMAMSDKInitializingAppDelegate application:didFinishLaunchingWithOptions:]</code></p>
<p>![image-20240130163010211](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20240130163010211.png)</p>
<p>![image-20240227180454406](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20240227180454406.png)X</p>
<h1 id="Scheme1"><a href="#Scheme1" class="headerlink" title="Scheme1"></a>Scheme1</h1><p>Provide one public api in CTXMAMCore SDK. 3rd party app could determine whether policy data is ready</p>
<h1 id="Scheme2"><a href="#Scheme2" class="headerlink" title="Scheme2"></a>Scheme2</h1><p>Add policy ready info in<code>initializeSDKsWithCompletionBlock</code> callback         </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/android-mamsdk/android-mobile-sdk%20reform/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/android-mamsdk/android-mobile-sdk%20reform/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h1><p>Android MAM SDK should not point to github.com repo:  <a target="_blank" rel="noopener" href="https://issues.citrite.net/browse/CXM-106492">https://issues.citrite.net/browse/CXM-106492</a></p>
<img src="/Users/junkangd/poc.jpg" alt="poc" style="zoom:300%;" />





<h2 id="comparsion"><a href="#comparsion" class="headerlink" title="comparsion"></a>comparsion</h2><p>bitbucket code integrate with intune code</p>
<p>![image-20220919134610730](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220919134610730.png)</p>
<h1 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h1><p><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java">https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java</a> </p>
<p>参照外网github-项目的层级排列，使用内网项目vpnsdk进行编排设计</p>
<ol>
<li>copy root folder’s configuration file to new folder <ul>
<li><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java/blob/master/build.gradle">build.gradle</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java/blob/master/gradle.properties">gradle.properties</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java/blob/master/LICENSE">LICENSE</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java/blob/master/Readme.md">Readme.md</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java/blob/master/mamsdk.properties">mamsdk.properties</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java/blob/master/settings.gradle">settings.gradle</a></li>
<li></li>
</ul>
</li>
<li>copy mvpntestapp folder’s configuration file to new folder’s mvpntestapp folder:<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java/blob/master/mvpntestapp/build.gradle">build.gradle</a></li>
</ul>
</li>
</ol>
<p>![image-20220920163544253](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220920163544253.png)</p>
<p>缺少的文件:</p>
<ul>
<li><input disabled="" type="checkbox"> keystore：不允许上传到仓库</li>
<li><input disabled="" type="checkbox"> keystore.properties</li>
</ul>
<p>Intune MAM SDK and ADAL library</p>
<ul>
<li>implementation ‘com.citrix.android:intunesdkaar:6.0.0@aar’</li>
<li>implementation (‘com.microsoft.aad:adal:3.1.2’) { exclude group: ‘com.microsoft.device.display’ }</li>
</ul>
<p>mvpntestapp&#x2F;src&#x2F;main&#x2F;AndroidManifest.xml：</p>
<ul>
<li>可以考虑复用github的</li>
<li>或者更改文件中的applicationName</li>
</ul>
<h1 id="TEST"><a href="#TEST" class="headerlink" title="TEST"></a>TEST</h1><ul>
<li>把android-mobile-sdk的产出物–mamsdk-xx–full.zip，配置到testapp中</li>
<li></li>
</ul>
<p><strong>Showing All Errors Only</strong></p>
<p>There is no XCFramework found at ‘&#x2F;Users&#x2F;junkangd&#x2F;XenMobile&#x2F;MAMSDK&#x2F;iossdk_sdkframeworkloader&#x2F;SimpleBrowserApp&#x2F;Frameworks&#x2F;CTXMAMCompliance.xcframework’.</p>
<h1 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h1><p>MAM SDK doc:  <a target="_blank" rel="noopener" href="https://developer.cloud.com/citrixworkspace/mobile-application-integration/android-native/docs/setting-up-the-library">https://developer.cloud.com/citrixworkspace/mobile-application-integration/android-native/docs/setting-up-the-library</a></p>
<p>git hub repo:</p>
<ol>
<li>sample test app <a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java">https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java</a></li>
<li>mam sdk zip file <a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdks">https://github.com/citrix/citrix-mam-sdks</a></li>
</ol>
<p>Bitbucket repo:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://code.citrite.net/projects/XMAND/repos/vpnsdk/browse/mvpntestapp">https://code.citrite.net/projects/XMAND/repos/vpnsdk/browse/mvpntestapp</a></li>
</ul>
<p>POC of huanxie:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://issues.citrite.net/browse/CXM-105912?focusedCommentId=6301365&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-6301365">https://issues.citrite.net/browse/CXM-105912?focusedCommentId=6301365&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-6301365</a></li>
</ul>
<p>export ANDROID_HOME&#x3D;&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Android&#x2F;sdk</p>
<ol>
<li>export PATH&#x3D;$PATH:$ANDROID_HOME&#x2F;tools</li>
<li>export PATH&#x3D;$PATH:$ANDROID_HOME&#x2F;platform-tools</li>
</ol>
<p>去处feature-flags：外部使用</p>
<ol>
<li>保留intune: WITH-INTUNE-EXTERNAL</li>
<li>不保留intune: REMOVE-INTUNE-EXTERNAL</li>
</ol>
<p>保留feature-flags，并且保留intune：供内部使用</p>
<p>Soteria:</p>
<ol>
<li>如何看具体问题</li>
<li>是否可以快速验证  提供本地脚本或者触发feature分支</li>
</ol>
<p>Hi team, could someone help me to check these questions for 2022 Soteria compliance issue:</p>
<ol>
<li>how to check concret problem of a certain repository(e.g: SCM Project–<code>XenMobile-iOS</code>   Source Tree: <code>iossdk_ctxmamappcore</code>)which is listed in here:<a target="_blank" rel="noopener" href="https://app.powerbi.com/groups/me/apps/61b2bc5c-6458-4b07-b765-8db0046b2916/reports/993db81b-075c-4cc0-b79f-8800eb932a0a/ReportSectione2d92a10a66c00ee0c50">https://app.powerbi.com/groups/me/apps/61b2bc5c-6458-4b07-b765-8db0046b2916/reports/993db81b-075c-4cc0-b79f-8800eb932a0a/ReportSectione2d92a10a66c00ee0c50</a></li>
<li>How often are checks performed on powerbi? </li>
<li>Which repository branch is checked? </li>
<li>Whether to support feature branch verification or be able to provide a script to support local verification?</li>
</ol>
<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>This repository contains the Android Java source code for a sample browser app that uses the MAM SDKs for endpoint management.  It does not contain the <a target="_blank" rel="noopener" href="https://docs.citrix.com/en-us/mdx-toolkit/mam-sdk-overview.html">MAM SDK</a> libraries themselves, which are downloaded separately.</p>
<h2 id="Tips-publish-to-github"><a href="#Tips-publish-to-github" class="headerlink" title="Tips-publish to github"></a>Tips-publish to github</h2><ol>
<li>github repository address:<a target="_blank" rel="noopener" href="https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java">https://github.com/citrix/citrix-mam-sdk-sample-browser-app-android-java</a></li>
<li>This Readme.md file is for internal, Readme_github.md should be replaced to Readme.md </li>
<li>This branch is for public github’s management</li>
<li>contents of keystore.properties in root directory should be cleared.</li>
<li>keystore in root directory and mvpntestapp should be deleted.</li>
<li>appPackageName variable in mamsdk.properties</li>
</ol>
<p>Background:</p>
<p>This is soteria issue which is documented here:</p>
<p>Changelist:</p>
<ul>
<li>replace sample-app url with internal url </li>
<li>modify gradle scripit, make this packaged test application conform to the requirements of open source</li>
</ul>
<p>Anaylsis:</p>
<p>For this issue, the root cause should be Copy type’s usage. We could fix this problem by change copy usage.</p>
<p>Before: put copy task to configuration phase</p>
<p>After:  put copy task to execution phase</p>
<p>![image-20221025111648927](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20221025111648927.png)</p>
<p>Note: If copy type is used in input parameter:</p>
<ul>
<li>copy task content should be put in execution phase.</li>
<li>The mentioned file must exist</li>
</ul>
<p>gradle.properties</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># Project-wide Gradle settings.</span><br><span class="line"># IDE (e.g. Android Studio) users:</span><br><span class="line"># Gradle settings configured through the IDE *will override*</span><br><span class="line"># any settings specified in this file.</span><br><span class="line"># For more details on how to configure your build environment visit</span><br><span class="line"># http://www.gradle.org/docs/current/userguide/build_environment.html</span><br><span class="line"># Specifies the JVM arguments used for the daemon process.</span><br><span class="line"># The setting is particularly useful for tweaking memory settings.</span><br><span class="line">org.gradle.jvmargs=-Xmx1536m</span><br><span class="line"># When configured, Gradle will run in incubating parallel mode.</span><br><span class="line"># This option should only be used with decoupled projects. More details, visit</span><br><span class="line"># http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects</span><br><span class="line"># org.gradle.parallel=true</span><br><span class="line"></span><br><span class="line">MIN_SDK_VERSION=24</span><br><span class="line">COMPILE_SDK_VERSION=31</span><br><span class="line">TARGET_SDK_VERSION=31</span><br><span class="line">GRADLE_PLUGIN_VERSION=3.3.0</span><br><span class="line">GRADLE_VERSION=5.5.1</span><br><span class="line">BUILD_TOOL_VERSION=30.0.3</span><br><span class="line">WORKSPACE_HELPER_LIB_VERSION=Release_20.12.0-+</span><br><span class="line">CTX_BROWSER_LIB_VERSION=Release_21.11.5-+</span><br><span class="line">AML_LIB_VERSION=Release_22.5.0-+</span><br><span class="line"></span><br><span class="line">appcoreSDKVersion=Feature_XMCI-Catalina-updates-SNAPSHOT</span><br><span class="line">mamservicesSDKVersion=Feature_CXM-105865-target-api-31-SNAPSHOT</span><br><span class="line">authSDKVersion=Feature_XMCI-Catalina-updates-SNAPSHOT</span><br><span class="line">coreSDKVersion=Feature_CXM-105865-target-api-31-SNAPSHOT</span><br><span class="line">mdxVersion=develop-SNAPSHOT</span><br><span class="line">mvpnSDKVersion=Feature_CXM-105965-target-api-31-SNAPSHOT</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Mvpn-sampleapp.gradle</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">task cloneSampleApp(type: Exec) &#123;</span><br><span class="line">    commandLine &#x27;git&#x27;,  &#x27;clone&#x27;, &#x27;--depth&#x27;,  &#x27;1&#x27;, &#x27;--branch&#x27;,</span><br><span class="line">            &#x27;Release_22.9.0_test-application-external&#x27;, &#x27;ssh://git@code.citrite.net/xmand/vpnsdk.git&#x27;,</span><br><span class="line">            &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task renameReadme(dependsOn: cloneSampleApp) &#123;</span><br><span class="line">    doLast &#123;</span><br><span class="line">        copy &#123;</span><br><span class="line">            from &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp/Readme_github.md&quot;</span><br><span class="line">            into &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp/&quot;</span><br><span class="line">            rename(&quot;Readme_github.md&quot;, &quot;Readme.md&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task deleteSensitiveFiles(type: Delete, dependsOn: renameReadme) &#123;</span><br><span class="line">    delete &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp/keystore&quot;</span><br><span class="line">    delete &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp/mvpntestapp/keystore&quot;</span><br><span class="line">    delete &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp/Readme_github.md&quot;</span><br><span class="line">    delete &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp/keystore.properties&quot;</span><br><span class="line">    delete &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp/mamsdk.properties&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task zipSampleApp(type: Zip, dependsOn:deleteSensitiveFiles) &#123;</span><br><span class="line">    from &quot;$buildDir/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp&quot;</span><br><span class="line">    exclude &#x27;**/.git&#x27;</span><br><span class="line">    archiveName &quot;mvpnsdk-$&#123;rootProject.version&#125;-sampleapp.zip&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task downloadSampleApp(type: Copy, dependsOn:zipSampleApp) &#123;</span><br><span class="line">    from &quot;$buildDir/distributions/mvpnsdk-$&#123;rootProject.version&#125;-sampleapp.zip&quot;</span><br><span class="line">    into &quot;$buildDir/MAMSDK/SampleCode&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>.&#x2F;gradlew –no-daemon –warn -PkeystoreFile&#x3D;${KEYSTORE_FILE} -PkeystorePass&#x3D;${KEYSTORE_PASS} jacocoTestReport copyToTarget</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Mamsdk%20dual%20mode%20switching/mamsdk%20alert/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Mamsdk%20dual%20mode%20switching/mamsdk%20alert/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h1><p>Kun: dual mode FF off</p>
<p>SH and MAMSDK: works but pop up a alert</p>
<h1 id="sdk初始化"><a href="#sdk初始化" class="headerlink" title="sdk初始化"></a>sdk初始化</h1><p>当前的逻辑，默认是加载初始化mdx sdk</p>
<h2 id="Situation1"><a href="#Situation1" class="headerlink" title="Situation1"></a>Situation1</h2><blockquote>
<ol>
<li>mdx初始化</li>
<li>switch to mamsdk</li>
</ol>
</blockquote>
<p>大致流程</p>
<ol>
<li><p>以legacy mode load and initialize</p>
</li>
<li><p>sync Securehub读取mamsdk 数据</p>
</li>
<li><p>再initialize mamsdk数据</p>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>zenprisedmpostenroll</string>
    <string>citrixreceiverfd</string>
</array>
</plist></li>
</ol>
<h2 id="Situation2"><a href="#Situation2" class="headerlink" title="Situation2"></a>Situation2</h2><blockquote>
<p>mamsdk初始化 </p>
</blockquote>
<ol>
<li><p>Load data locally from keychain</p>
</li>
<li><p>sync mam data with tcp</p>
</li>
</ol>
<p>之前没有支持mamsdk切换到mdx，现在需要实现这个逻辑</p>
<p>目前mdx切换到mamsdk，通过updatesdkmode来实现，但是目前mamsdk没有把updatesdkmode嵌入到某个事件中，无法做到mamsdk切换mdx</p>
<p>![image-20230118174510726](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230118174510726.png)</p>
<p>如果选择mdx，将初始化mdx sdk，再fetch mam app data</p>
<p>如果选择mamsdk，将初始化mdx sdk，再fetch mam app data，最后再初始化mamsdk</p>
<p>Video:</p>
<ol>
<li>mdx</li>
<li>mamsdk</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">// SDK Mode Control truth table</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Current</span></span><br><span class="line"><span class="comment">// Mode/                                  policy</span></span><br><span class="line"><span class="comment">// File       loader action   loaded      target     MDX action</span></span><br><span class="line"><span class="comment">// -----------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">// UNK        load default    LEGACY      UNK        no action</span></span><br><span class="line"><span class="comment">// UNK        load default    LEGACY      LEGACY     set mode/file to legacy</span></span><br><span class="line"><span class="comment">// UNK        load default    LEGACY      EXPLICIT   set mode/file to explicit, restart app</span></span><br><span class="line"><span class="comment">// UNK        load default    EXPLICIT    UNK        no action</span></span><br><span class="line"><span class="comment">// UNK        load default    EXPLICIT    LEGACY     set mode/file to legacy, restart app</span></span><br><span class="line"><span class="comment">// UNK        load default    EXPLICIT    EXPLICIT   set mode/file to explicit</span></span><br><span class="line"><span class="comment">// LEGACY     load LEGACY     LEGACY      UNK        no action</span></span><br><span class="line"><span class="comment">// LEGACY     load LEGACY     LEGACY      LEGACY     no action</span></span><br><span class="line"><span class="comment">// LEGACY     load LEGACY     LEGACY      EXPLICIT   set mode/file to explicit, restart app</span></span><br><span class="line"><span class="comment">// EXPLICIT   load EXPLICIT   EXPLICIT    UNK        no action</span></span><br><span class="line"><span class="comment">// EXPLICIT   load EXPLICIT   EXPLICIT    LEGACY     set mode/file to legacy, restart app</span></span><br><span class="line"><span class="comment">// EXPLICIT   load EXPLICIT   EXPLICIT    EXPLICIT   no action</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">+ (<span class="type">void</span>) updateSdkMode</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">BOOL</span> bSdkModeControlPolicyValue = <span class="literal">NO</span>;</span><br><span class="line">    <span class="type">BOOL</span> retVal = [<span class="keyword">self</span> getSdkModeControlPolicyValue:&amp;bSdkModeControlPolicyValue];</span><br><span class="line">    <span class="keyword">if</span> (retVal)</span><br><span class="line">    &#123;</span><br><span class="line">        MdxSdkType currentSdkMode = [<span class="keyword">self</span> getSdkMode];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Determine the new SDK mode we should be in, based on the the SDK mode control policy setting</span></span><br><span class="line">        MdxSdkType targetSdkMode = MDX_SDK_UNKNOWN;</span><br><span class="line">        <span class="keyword">if</span> (bSdkModeControlPolicyValue == <span class="literal">NO</span>)</span><br><span class="line">            targetSdkMode = MDX_SDK_LEGACY;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            targetSdkMode = MDX_SDK_EXPLICIT;</span><br><span class="line"></span><br><span class="line">        MdxSdkType currentLoadedSdk = [<span class="keyword">self</span> getLoadedSdkType];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (targetSdkMode != currentLoadedSdk ||</span><br><span class="line">             targetSdkMode != currentSdkMode)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Sync the current SDK mode with the target SDK type.</span></span><br><span class="line">            [<span class="keyword">self</span> setSdkMode:targetSdkMode];</span><br><span class="line"></span><br><span class="line">            <span class="built_in">CTXLOG_Info</span>(<span class="built_in">CTXLog_SourceName</span>, <span class="string">@&quot;currentSdkMode: %d, currentLoadedSdk: %d, targetSdkMode %d&quot;</span>, currentSdkMode, currentLoadedSdk, targetSdkMode);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (targetSdkMode != currentLoadedSdk )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Currently loaded SDK type differs from the target SDK type.</span></span><br><span class="line">                <span class="comment">// Alert user to restart app.</span></span><br><span class="line">                [<span class="keyword">self</span> alertUserRestartApp];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CTXLOG_Info</span>(<span class="built_in">CTXLog_SourceName</span>, <span class="string">@&quot;Could not get SDK Mode Control policy value.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Could not get SDK Mode Control Policy value. The policy probably doesn&#x27;t exist. Take no action.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="期待的改动"><a href="#期待的改动" class="headerlink" title="期待的改动"></a>期待的改动</h1><p>SH：给CitrixMdxData1中写入SDKModeControl信息</p>
<ul>
<li><p>更新时机：updateUnmanagedData![image-20230201153114751](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230201153114751.png)</p>
</li>
<li><p><del>找到apppolicy列表，并把SDKModeControl信息 赋值给CitrixMdxData1</del>![image-20230129181541854](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129181541854.png)![image-20230129161605521](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129161605521.png)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> * mamPoliciesDict = [CtxSingleSignOn policiesFromBase64String:app.policies];</span><br><span class="line"><span class="type">id</span> sdkModeControlPolicy = [mamPoliciesDict objectForKey:PKEY_POLICY_SDKMODECONTROL];</span><br><span class="line"><span class="type">BOOL</span> sdkModeExists = (sdkModeControlPolicy != <span class="literal">nil</span>);</span><br><span class="line"><span class="type">BOOL</span> inSdkMode = (sdkModeExists?[sdkModeControlPolicy boolValue]:<span class="literal">NO</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>MDX：在点击Authorize App时，主动读取CitrixMdxData1的SDKModeControl信息，并调用updatesdkmode</p>
<p>![image-20230129111356443](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129111356443.png)![image-20230129111556780](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230129111556780.png)</p>
<h1 id="调试技巧"><a href="#调试技巧" class="headerlink" title="调试技巧"></a>调试技巧</h1><p>terminateApp设置状态为NO，mdx、 mamappcore</p>
<p>Mdx:</p>
<p>![image-20230130100551984](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230130100551984.png)</p>
<p>![image-20230208164022725](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230208164022725.png)</p>
<p>![image-20230130103519945](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230130103519945.png)</p>
<p>![image-20230201135847645](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230201135847645.png)</p>
<p>![image-20230201144150240](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230201144150240.png)</p>
<p>MDX only find the accurate situation to read and set sdkMode with SH write sdkMode on vault data</p>
<h1 id="Scheme"><a href="#Scheme" class="headerlink" title="Scheme"></a>Scheme</h1><h2 id="Current-Scenario"><a href="#Current-Scenario" class="headerlink" title="Current Scenario"></a>Current Scenario</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">title Current Scenario</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureWeb : 5. restart alert</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 6. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 7. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<h2 id="Scenario-A-PoC-done"><a href="#Scenario-A-PoC-done" class="headerlink" title="Scenario A: PoC done"></a>Scenario A: PoC done</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">title Scenario A: PoC done</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1.sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureWeb !!: 5. restart alert</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 6. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 7. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<h2 id="Scenario-B-Need-to-investigate"><a href="#Scenario-B-Need-to-investigate" class="headerlink" title="Scenario B: Need to investigate"></a>Scenario B: Need to investigate</h2><p>This would be to eliminate the auto flip to SH</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">title Scenario B: Need to investigate</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>



<h3 id="first-flip-mdxss-startappregistration"><a href="#first-flip-mdxss-startappregistration" class="headerlink" title="first flip: mdxss.startappregistration"></a>first flip: mdxss.startappregistration</h3><h3 id="second-flip-mdxss-networklogon"><a href="#second-flip-mdxss-networklogon" class="headerlink" title="second flip: mdxss.networklogon"></a>second flip: mdxss.networklogon</h3><h3 id="third-flip-mdxss-sdkapplogon"><a href="#third-flip-mdxss-sdkapplogon" class="headerlink" title="third flip:mdxss.sdkapplogon"></a>third flip:mdxss.sdkapplogon</h3><p>![image-20230206145433963](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230206145433963.png)</p>
<p>payload:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(__NSDictionaryM *) $0 = 0x0000000282cb5e80 32 key/value pairs</span><br><span class="line">Printing description of payload:</span><br><span class="line">&#123;</span><br><span class="line">    AGBaseURL = &quot;https://nsg-njcqetest5.xs.citrix.com&quot;;</span><br><span class="line">    AGConfigData = &quot;AQAGAACAigABAAAACggBbAAAAAAAAAADAAAAAAEAAAD/ACAAoAUAAAAAAAAxMy4x</span><br><span class="line">\nLjMzLjUyAGp1bmthbmdkQGNlbW1vYmlsZS5jdHgAAABjZW1tb2JpbGUuY3R4AAA=&quot;;</span><br><span class="line">    AGCookies = &quot;NSC_AAAC=25bd5d3ea5a87c11d73cb06b50db7e2b009001f1f45525d5f4f58455e445a4a42&quot;;</span><br><span class="line">    AGCookiesFetchTimeStamp = &quot;2023-02-06 06:51:00 +0000&quot;;</span><br><span class="line">    AGDeviceCheckURL = &quot;https://nsg-njcqetest5.xs.citrix.com/AGServices/device_check&quot;;</span><br><span class="line">    APPCDeviceCheckURL = &quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Device/v1/Check&quot;;</span><br><span class="line">    AuthToken = &quot;CitrixAuth 4a5c5f94526f4ac3bec4d6ac4c46f7e55951855a9793d44f08299d385bd44f3e6F6F3637&quot;;</span><br><span class="line">    DeviceEnrollmentConfig = 2;</span><br><span class="line">    DeviceID = &quot;6al2cyiw6m9yKQjslQ2EHQzIjfpEnisq8mXcI9oiLKo=&quot;;</span><br><span class="line">    DeviceState = &quot;(null)&quot;;</span><br><span class="line">    DeviceVendorKey = &quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;;</span><br><span class="line">    EncryptionKey = &quot;&#123;length=32,bytes=0x5528da0532106dc05a78c9f6953e5ad1...77e1e7c87be8d7d5&#125;&quot;;</span><br><span class="line">    FeatureFlagCustomerId = 949980A17515C87C1F777DF703626F6C870E0EBBD170BAA904BDF22E567EC2DC;</span><br><span class="line">    FeatureFlagDeviceId = &quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;;</span><br><span class="line">    FeatureFlagUserId = F74D7D92A16E116529B79F64152AF5737A8ACD8126EDF502E6F404FEFD908B3A;</span><br><span class="line">    GatewayType = 1;</span><br><span class="line">    InternalNetwork = 0;</span><br><span class="line">    LockState = 0;</span><br><span class="line">    LogonFlag = 1;</span><br><span class="line">    MasterKeychainAccessGroup = G3SMV9832J;</span><br><span class="line">    MobileAppAggregation = 0;</span><br><span class="line">    STATicketServiceURL = &quot;https://njcqetest5.xmqa.cloud.com:8443/STA/get_ticket_v1&quot;;</span><br><span class="line">    SharedDeviceModeEnabled = 0;</span><br><span class="line">    SharefileInfo =     &#123;</span><br><span class="line">        SharefileSSOEnabled = 0;</span><br><span class="line">    &#125;;</span><br><span class="line">    StoreID = 4496674629308276351;</span><br><span class="line">    TimeStamp = &quot;2023-02-06 06:51:05 +0000&quot;;</span><br><span class="line">    Username = &quot;junkangd@cemmobile.ctx&quot;;</span><br><span class="line">    appinfo =     &#123;</span><br><span class="line">        AppLogLevel = 4;</span><br><span class="line">        AppLogTarget = file;</span><br><span class="line">        AppResourceID = &quot;Citrix.MPS.Doc.Farm 1.MobileApp15&quot;;</span><br><span class="line">        AppResourceURL = &quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;;</span><br><span class="line">        AppResourceURLTranslated = &quot;https://nsg-njcqetest5.xs.citrix.com/cvpn/https/njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">    enrollmentId = &quot;&#123;length=16,bytes=0x20b2262b4bdc7bbc34f9cdd349665112&#125;&quot;;</span><br><span class="line">    enrollmentIdv2 = &quot;&#123;length=16,bytes=0x213cf9d5a8a5c23394f691e593d03548&#125;&quot;;</span><br><span class="line">    supportsMAMAppDataSharing = 0;</span><br><span class="line">    xmsServerBaseURL = &quot;https://njcqetest5.xmqa.cloud.com:8443&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>![image-20230206154302201](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230206154302201.png)</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Printing description of url<span class="punctuation">:</span></span><br><span class="line">com.citrix.sso<span class="number">.7</span>C1B0619<span class="number">-955</span>F<span class="number">-4078</span>-A4FB<span class="number">-443</span>A52627D67-DualMode<span class="punctuation">:</span><span class="comment">//mdxss.sdkapplogon?mdxresponse=1&amp;result=0&amp;store=%7Blength%3D16%2Cbytes%3D0x20b2262b4bdc7bbc34f9cdd349665112%7D&amp;nonce=Xoi8Pahqj2cyjgDI99RdzHBd22l&amp;plsize=3056&amp;payload=e9OIphU1ud9rJnRl2xaCmBBeFHFArw%2F3u26F6BF7kRcbUxCRMdF4BT6AUTyrCGHcbqB2Eg5ZhotLGHvhECbtJVnX3DubmXwh8MNdmm5VuiiXwu36v7RBn5atxBPRncOZnBjyOr6YcF8pYx2fsVVoht5J2jbLttTyfMwWbtKXR8DjEfsQb8lzgMlUnt88Dcj2MsfQdIETiGJUvO84uqgKSgCNnugiUsbrpw2yBD%2BHT%2Bx%2Fimgqj4zHMIjYeRqW0ue56vP%2FCY%2B9FbLhB%2FwjgNr%2Bxt72ShmQVjx%2FrfWtDitE7G%2BOt1SmIlEnyKXx%2BB9nPTvg%2F3fVmvRdJnLI3bhg1KN4MC4Ym84wsjr20xEW%2B%2BU9ZU775Lr841pFNY6khMgN1axm61eFZhguZLDuH7yThRqwppvmXrIhzKZ8ZdOU7zHn9pTRT4FXtBmoqPgEmaegjtjbvyMjyZykprWhyWFJezQ54aRiU1iMnTvvm4klRPlbVRWcvE483S36w1kwp1OnKq0VhXhsKk%2BX8UYjc75vM9kQgKTID%2BCDWsUHC4C84GOc93rbtSpyjeMo1l1wpkTS94hjWHeE7Ms7aovwRZeCDExiau8e9LPGkmlNf3Zq66clfbg8cVt7wcEVi0ewBt4fFNNCEHpkBf39DjHhKR%2BYBm%2B6iX1%2BYmL9EBqJI69UE%2BHKxAc92GVfSJyYn9hurJ4k%2FpG55dwf%2F34pZD88LfmVcVmmW4V6KKF0Vc4zyPzz7p0IIMC%2BxD%2BnOYYbKC02itHTYf8tdHeU4XMyl5amoI5y3jeELQriNPMjxU6876PR9NWW%2FMHiryHS3pe9%2B6dl7mWTu2Ec10DMsym08WTLm6vHRuEfXfMt4nv216KUb8vGaD4uyWJlo1anXpQdYBT3hG3%2F%2FsbIOxNUxQMuZylmrOhuBbk42AReN5kcwGBN5k6DgNH6VEKFXbKUAbEo6564vafEw552BS%2BB9MmYUWGIqiNqXK0SvqXQCdZ5hXzkpHZ5sAtmUKGevcQ4Em%2BavL7JE5zDE964bPTCLqTRFnN4J%2FM3yAKzw59pCkbe5FFvxNVEi2l454U4ISLIrS4gMw1k%2FiwFUh%2F%2FqryxleC3R%2BBYc4r4ugcr1%2FWhfGmnxKcg92Yf2T5%2FuFAkrJETKDZXnjBwsPG0e%2BuLVv5RLQyoD%2BZbGpGTGBL1b7x%2BkaMXszeI4qHbD1QEN0ZXweD1OtlAxOF0b%2FINa8UgGNiV0aJoRLpvf3m5%2Fl7NrtYz7wUT0248CujyLrRMdYFaCKSKKVLIXF%2FRBvcR3NjoV8EuoJMkt9DcnaYR%2BXSRplM6OsquRAzFQ%2Fnyxxed1N7vFysVE3UY1ZyTpJ9IrMo2o2F4yPLwLQIbK1wkn%2FnB0qzcHcC2JfKDSnJqsyPGM08NpKEHpvUvvtjD9%2FCtVnUJ8CWkKt1WTuzDfxsUdmT5usqL%2FCahHXiHAlgGexvYxw9FyjxYO5fqO0mdnbSyB7Mcbn1U1bknLuAu%2BPT%2FE7LbPhT4LBiyK2dvqFvV7zcc%2F3FsToeqlRZtnbiMZfyqmTEI6FTAybgyZJ7Xc5dqBZLfb9jxCA3d3LX4t9UtBmvAYF2ra1pneaDYDJ0aXql4O%2B34AUedkTzJdqNlVyEdu6WSC7kKpZHLeJmg6fRxjkfdcPWUqFe5QdkufkT%2BoJCfHUJJ1g61%2F5n4vbR0izqJr8GvV%2Bpl%2FttMdS81J77c34nuo9a4sPsuGGpb8chVNGXrvCoLPllEpYSnDnmo4hY33MqfZj4KPGOT9mbStH4VNiSMJFq3TE86S0oMcKkj9DRm1J9ON4xy3W5TaeIsTp5tfkRabjzVBDGTfJWANb0V6YiVpPM8Rx1%2F2lvS0lKKq6odh1PS7R0u1%2Fvx724zsrOa70CvYb2WodOrtjIABCoj5EYm1U0bAWldDessHNen7N97kEr0wLHZlu6KaykWquvSVDfN4UHo4a3vC37OdS4p3RFKhv9vgXQmQENci%2ByS1lrdKxQpHs9aJXkVqDf%2BTu7tmj64sHZKe7ebMvGbLOxagax4Tw6UUoqm8oqA21LzZOzj4PexG2FPDYsZA1yJYcb589E%2FhN4dbQAd0KUZLhXsbXS0oFflrUWpkeQnkfVa5KztrD0KTHfuxdet8JegZ9SwFOV88NZg0kJXIpPexmbI%2Bu0Us5SME8IOKv7E80J%2FgA7xDx95WVLdWJoQ0Bo1y9C2Y62yFY9PHr%2FjwU5DGuZMppA3XVfPUP58yRma01j%2FZdGFsPYr8uWnbx%2FZm2bPpeeRFlMYRhQ6osEhuZp7IMLkYQPs4EP8dNT5PtnlRofYSi3P6m6sOdPUpM2ZDxBhkVV1F9LeiVu1ddKVs5C7Gib5QmcydHIhBIOCNXXw6yciuhj5qlybHP2WApCn4tO5aroBX7O8v68cl1AgVMFGwi8KeYmfoBN4j5dJItOGCJYne3CTCTq%2B6oMSTwx17IadC%2FjDsbIEeMO%2BV2Lw4xJKHasfREjDk%2BLOqVmK3kMUKVobxyf2xL08C7LCe6s45G4Yg%2BAVvCiVGos7AwQXwdM%2BCgcbcuyGIl4Knvw42mdtNWdw9V9D7C21X9MbJx8omAHRdzmLMExUrK1TcehxUcTEFwNS2mWZObVwXYjEgRq%2FJJCiRvCPjHFl4JnSTOGhJZS7QKCNafr66lU2mKS8S6eVYF8j0ojWX6meZBOJwBVqOImccvENUnHx044GPbkL%2FWdNeUiI2dJZ88uV4zoQj6yTQ1ocwdmTQVjGg%2F8DirvFG9XgQWU6IpByxOCNrT2Hau46Io7ZicaOw%2FoN9nZZgrYTLXOKzMPniBV9%2F3m8%2F8%2FoYIvB9WyFBe0jcfpHV5mgAZMtVQCS2UiXckJzziPZpMnNoPMJkBBRYvjJJDFLi8GowgehKApFkISGY2uXWxMPKB8XyPp8fofQJDyCbB5IR43WQm%2Buir55zzXCLjlXH4jGgW3hgIyjFnTQKow%2BVdVqAJcuFGCzLdyE0p0QAS0iBHjZuw%2Fr6sphqJk%2BEXzsz2UkIVsjnvU2qaZs2L0nB7tuo1Z%2BIYVWlNOv3%2FheihZOaReFsgjOwAeUGPvwJUB3hrvSz44Gkc%2B4CRbTMx1Z6Hl0a0hgQzPqxMPxhgfzQOw7FLEne2XtrRSuL3JcbeF3ZB0X31Qqm4wBX3BNWYUWYYuADTIxrMxDjDuoiyhcvS7ojID7yJoKFZSERQNs4%2BVYjbEU1%2B6Muknbk7yQQYkZJTWKbivD2jutbPdwy%2FDZXiG3uP6HeUFZqvOLTycfP%2FIdn%2BTk3H%2FPb705065XVRQ6qAjSCvTyltiFPtcI9S4Mmtk%2FpMlbb9a%2FZjwXMflm3b2yQxhgT4MRV%2B5k0R228RPgT1gXZMB56PAyC7Fc6hW1zHn%2Ftb3KO1J%2B2yHy3dXfhQKF6rtIIlj4dRjHrHfKKr6hHc50pGZNcf2Wly1RmBKescyvcN5ZO4YQSjUWVxyxBH6bZ%2FGEhnOn%2FSWfXeiIKaoSzIAI65vcMSiisyxOCDu93Hq4KGT9WIx3AaDBTcOgjoDo3M3A%2FtmjDtQO4qW6R9lNw3DlHvH0rpUhqtfbF11XUMcSVcQtd2M0OWJfDab54ivUznKHni0IXJOR4mWM6V%2BvWrA8ilE0%2FSHXMfBAJy2UAPZJKpzY%2BrtnasKGTb6kkCogr69z0tCORrktn%2B8Z3kqK4pcpb%2B6BIFNwVH%2BwIj%2FzEEVQFY6RcPU7gP5zYej4cr1DI4Jg%2Bga104%2F5E%2BcvRTIzBwnjetbWbqEjPQoVYIigBKGO4iEYmrRw%2Bs2UWdRP0pADsZr70NCzr9%2FjYK4twTxRF6CIbZCjh7TP6BsiS%2BWAcSiqSk6eu97FLpZ4YC5SVmycsl%2F5r4eZ1W39IN9JwaqGxhPoIY%2BJ5Ir4KPue2BSAERdnUdaQegEU4h1%2B0%2FOjw1BvzjJEiKg6Cn11tDd3kRUm%2B%2BNvsD%2Fjf4u8RQzcga0%2BpIX9ZNFAASN%2F23CLuOFM3HhvHy3D94wogxhnGKJzuL7t89Ud49N47bk%2B%2FEcFCTJW4FXV7dUT7X19UxadfOVme%2FLsnF%2Bo0AmpQrO4%2Fxhr2rDAmwI7yJQViD3xXWxv%2Fa7cik39U0idlPvuYP9bzRs%3D&amp;mdxurlversion=3</span></span><br><span class="line">(lldb) </span><br><span class="line"></span><br><span class="line">Printing description of payload<span class="punctuation">:</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    AGBaseURL = <span class="string">&quot;https://nsg-njcqetest5.xs.citrix.com&quot;</span>;</span><br><span class="line">    AGConfigData = <span class="string">&quot;AQAGAACAigABAAAACggBbAAAAAAAAAADAAAAAAEAAAD/ACAAoAUAAAAAAAAxMy4x</span></span><br><span class="line"><span class="string">\nLjMzLjUyAGp1bmthbmdkQGNlbW1vYmlsZS5jdHgAAABjZW1tb2JpbGUuY3R4AAA=&quot;</span>;</span><br><span class="line">    AGCookies = <span class="string">&quot;NSC_AAAC=9a57eb8513fb545498779e4321fbec4f009001f1f45525d5f4f58455e445a4a42&quot;</span>;</span><br><span class="line">    AGCookiesFetchTimeStamp = <span class="string">&quot;2023-02-07 02:03:12 +0000&quot;</span>;</span><br><span class="line">    AGDeviceCheckURL = <span class="string">&quot;https://nsg-njcqetest5.xs.citrix.com/AGServices/device_check&quot;</span>;</span><br><span class="line">    APPCDeviceCheckURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Device/v1/Check&quot;</span>;</span><br><span class="line">    AuthToken = <span class="string">&quot;CitrixAuth b32c684ded608b367985408ca332d59fcd3ef025df6e64b7af00e78123b4ebf24C704751&quot;</span>;</span><br><span class="line">    DeviceEnrollmentConfig = <span class="number">2</span>;</span><br><span class="line">    DeviceID = <span class="string">&quot;6al2cyiw6m9yKQjslQ2EHQzIjfpEnisq8mXcI9oiLKo=&quot;</span>;</span><br><span class="line">    DeviceState = <span class="string">&quot;(null)&quot;</span>;</span><br><span class="line">    DeviceVendorKey = <span class="string">&quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;</span>;</span><br><span class="line">    EncryptionKey = <span class="string">&quot;&#123;length=32,bytes=0x5528da0532106dc05a78c9f6953e5ad1...77e1e7c87be8d7d5&#125;&quot;</span>;</span><br><span class="line">    FeatureFlagCustomerId = <span class="number">949980</span>A17515C87C1F777DF703626F6C870E0EBBD170BAA904BDF22E567EC2DC;</span><br><span class="line">    FeatureFlagDeviceId = <span class="string">&quot;0D399F28-D664-4C30-841A-D55D96E5AAB6&quot;</span>;</span><br><span class="line">    FeatureFlagUserId = F74D7D92A16E116529B79F64152AF5737A8ACD8126EDF502E6F404FEFD908B3A;</span><br><span class="line">    GatewayType = <span class="number">1</span>;</span><br><span class="line">    InternalNetwork = <span class="number">0</span>;</span><br><span class="line">    LockState = <span class="number">0</span>;</span><br><span class="line">    LogonFlag = <span class="number">1</span>;</span><br><span class="line">    MasterKeychainAccessGroup = G3SMV9832J;</span><br><span class="line">    MobileAppAggregation = <span class="number">0</span>;</span><br><span class="line">    STATicketServiceURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443/STA/get_ticket_v1&quot;</span>;</span><br><span class="line">    SharedDeviceModeEnabled = <span class="number">0</span>;</span><br><span class="line">    SharefileInfo =     <span class="punctuation">&#123;</span></span><br><span class="line">        SharefileSSOEnabled = <span class="number">0</span>;</span><br><span class="line">    <span class="punctuation">&#125;</span>;</span><br><span class="line">    StoreID = <span class="number">4496674629308276351</span>;</span><br><span class="line">    TimeStamp = <span class="string">&quot;2023-02-07 02:03:14 +0000&quot;</span>;</span><br><span class="line">    Username = <span class="string">&quot;junkangd@cemmobile.ctx&quot;</span>;</span><br><span class="line">    appinfo =     <span class="punctuation">&#123;</span></span><br><span class="line">        AppLogLevel = <span class="number">4</span>;</span><br><span class="line">        AppLogTarget = file;</span><br><span class="line">        AppResourceID = <span class="string">&quot;Citrix.MPS.Doc.Farm 1.MobileApp15&quot;</span>;</span><br><span class="line">        AppResourceURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;</span>;</span><br><span class="line">        AppResourceURLTranslated = <span class="string">&quot;https://nsg-njcqetest5.xs.citrix.com/cvpn/https/njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU&quot;</span>;</span><br><span class="line">    <span class="punctuation">&#125;</span>;</span><br><span class="line">    enrollmentId = <span class="string">&quot;&#123;length=16,bytes=0x20b2262b4bdc7bbc34f9cdd349665112&#125;&quot;</span>;</span><br><span class="line">    enrollmentIdv2 = <span class="string">&quot;&#123;length=16,bytes=0x213cf9d5a8a5c23394f691e593d03548&#125;&quot;</span>;</span><br><span class="line">    supportsMAMAppDataSharing = <span class="number">1</span>;</span><br><span class="line">    xmsServerBaseURL = <span class="string">&quot;https://njcqetest5.xmqa.cloud.com:8443&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> logonFinishedWithPayload:scrambledPayload andSize:size isCWAFlip:isCWAFlip];</span><br><span class="line">[<span class="built_in">CTXMAMLogger</span> <span class="built_in">CTXMAMLog_Initialize</span>];</span><br><span class="line"></span><br><span class="line">           <span class="comment">/* if(payload != nil)</span></span><br><span class="line"><span class="comment">            &#123;</span></span><br><span class="line"><span class="comment">                bResult = [self updateHubPayloadData:payload updateFetchTime:!isCWAFlip loadData:&amp;bLoadData];</span></span><br><span class="line"><span class="comment">                [[CTXMAMConfigInfo sharedInstance] CTXMAMAConfigInfo_Initialize];</span></span><br><span class="line"><span class="comment">                [[CtxAuthInterface sharedInstance] CtxAML_Initialize];</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>([<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager]._mainDispatcher == <span class="literal">nil</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            [<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager]._mainDispatcher = [[<span class="built_in">CTXMAMServerDataRequestDispatcher</span> alloc] initWithLogonInfo:[[<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager] hubLogonInfo]</span><br><span class="line">                                                                                                         andBlockForPeriodicFetching:[<span class="built_in">CTXMAMConfigManager</span> sharedConfigManager]._serverInfoCompletionBlock];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Printing description of foundApp<span class="punctuation">:</span></span><br><span class="line">appName<span class="punctuation">:</span>Citrix Simple Browser; appStoreUrl<span class="punctuation">:</span>http<span class="punctuation">:</span><span class="comment">//yourstore.yourdomain.com, appUniqueID:AE6614987908A8F64455956278AD18D8; appNewUniqueID:(null); mobileAppID:B6PJY8ADY4.com.citrix.SimpleBrowserApp.dualMode; mobileToolVersion:21.11.15; packageID:7C1B0619-955F-4078-A4FB-443A52627D67-DualMode; policies:L11972; policiesTimestamp:2023-02-07 02:42:42 +0000; publicKey:L64; resourceID:Citrix.MPS.Doc.Farm 1.MobileApp15; timestamp:Mon Feb 06 13:44:03 GMT+8 2023; urlScheme:com.citrix.sso.7C1B0619-955F-4078-A4FB-443A52627D67-DualMode; wrappingDateTime:2023-01-29 07:04:09 +0000; requiredUserEntropyPolicyEnabled: 0; installTimestamp:2023-02-06 05:47:04 +0000; isSubscribed:1; storeID:&#123;length=16,bytes=0x20b2262b4bdc7bbc34f9cdd349665112&#125;; subscriptionState:2; resourceURL:https://njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU; resourceTranslatedURL:https://nsg-njcqetest5.xs.citrix.com/cvpn/https/njcqetest5.xmqa.cloud.com:8443/Citrix/Store/resources/v2/TW9iaWxlQXBwMTU; logTarget: file;  logLevel: 4; mobileAppversion: 1.0</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/Users/junkangd/Library/Application Support/typora-user-images/image-20230207104504355.png" alt="image-20230207104504355" style="zoom:150%;" />

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line">SecureHub &lt;- MDXApp : 1. Authorize App alert</span><br><span class="line"></span><br><span class="line">note over SecureHub: write mobileAppData to unmanagedContainer</span><br><span class="line">SecureHub -&gt; MDXApp : 2. flip</span><br><span class="line">MAMSDKApp -&gt; MAMSDKApp: 3. read mobileAppData from unmanagedContainer</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>





<p>initWithLogonInfo</p>
<p>CTXMAMSecureHubSharedData:loadData</p>
<p>开启FF：</p>
<ul>
<li>Dual mode</li>
<li>first party mamsdk</li>
<li>third party mamsdk</li>
</ul>
<p>first party app: 可以从shared keychain里拿到shared data，没拿到再去通过tcp请求SH</p>
<p>third party app：通过tcp请求SH 拿到shared data</p>
<h2 id="Scenario-C-Need-to-investigate"><a href="#Scenario-C-Need-to-investigate" class="headerlink" title="Scenario C:  Need to investigate"></a>Scenario C:  Need to investigate</h2><p>Let SecureHub sync sdkMode to unmanaged container when update unmanaged container, and load the correct sdkMode from unmanaged container in MdxFrameworkLoader.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">title Scenario C: Need to investigate</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line">SecureWeb -&gt; SecureHub : 3. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line">@enduml</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<h2 id="Scenario-D-Need-to-investigate"><a href="#Scenario-D-Need-to-investigate" class="headerlink" title="Scenario D:  Need to investigate"></a>Scenario D:  Need to investigate</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">title Scenario D: Need to investigate</span><br><span class="line"></span><br><span class="line">@startuml</span><br><span class="line">note over SecureWeb: MAMSDK</span><br><span class="line">SecureWeb -&gt; SecureHub : 1. App auto flips to SH</span><br><span class="line">SecureWeb &lt;- SecureHub : 2. return to SW</span><br><span class="line"></span><br><span class="line">note over SecureWeb: MDX</span><br><span class="line">SecureWeb -&gt; SecureHub : 3. sometimes we&#x27;ll see, Start SH alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 4. return to SW</span><br><span class="line"></span><br><span class="line">SecureWeb -&gt; SecureHub : 5. Authorize App alert</span><br><span class="line">SecureWeb &lt;- SecureHub : 6. return to SW</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>





<h2 id="改动要点"><a href="#改动要点" class="headerlink" title="改动要点"></a>改动要点</h2><p>2023-02-08T18:11:28.824+0800 works log</p>
<h1 id="Monthly-DEMO"><a href="#Monthly-DEMO" class="headerlink" title="Monthly DEMO"></a>Monthly DEMO</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><ul>
<li><p>Limitations of current scenario：</p>
<ol>
<li>quit alert</li>
<li>restart manually</li>
<li>sdk initialization process doesn’t run smoothly</li>
<li>Three times auto flip</li>
</ol>
</li>
<li><p>customer’s pain points:</p>
<ol>
<li>Installed app: switch sdkMode from mdx to mamsdk in CEM</li>
</ol>
</li>
</ul>
<ol start="2">
<li>Fresh install of the app: set sdkMode as mamsdk in CEM</li>
</ol>
<h2 id="实现方案"><a href="#实现方案" class="headerlink" title="实现方案"></a>实现方案</h2><ul>
<li>优点<ol>
<li>Remove quit alert</li>
<li>sdk initialization process run smoothly</li>
<li>At most one or two times auto flip</li>
</ol>
</li>
</ul>
<p>![image-20230217105513783](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230217105513783.png)</p>
<p>![image-20230220180159686](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230220180159686.png)</p>
<h1 id="Remove-alert"><a href="#Remove-alert" class="headerlink" title="Remove alert"></a>Remove alert</h1><h2 id="SH"><a href="#SH" class="headerlink" title="SH"></a>SH</h2><p>SDKMODE</p>
<ul>
<li>是否需要转存到unmanaged container: 需要，mdx无法拿到appdata这类数据</li>
<li>转存的时机: updateUnmanagedData. FF on时，写入sdkmode到unmanaged container</li>
</ul>
<h2 id="MDX"><a href="#MDX" class="headerlink" title="MDX"></a>MDX</h2><ul>
<li>在authorize时且FF on时，读取并设置SdkMode</li>
<li>alert弹框添加前提条件：FF on</li>
</ul>
<p>![image-20230222111156789](&#x2F;Users&#x2F;junkangd&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230222111156789.png)</p>
<p>Hi team, this is an demo for dual mode app enhancement.</p>
<p>And this is an RFE from cigna. </p>
<p>I will follow this video to introduce the whole process, including:</p>
<ul>
<li><p>Pain points of customer</p>
</li>
<li><p>limitations of current scenarios. as described in this slide.</p>
</li>
</ul>
<p>And This is a flow chart of sdk initialization on dual mode app for current scenario.</p>
<p>There are three auto flips between two apps, and a restart alert.</p>
<p>And then,  we could follow this video to understand this process.</p>
<p>The first fragment is focused on fresh install of the app.</p>
<p>this is the first time auto flip, and it will only show occasionally.</p>
<p>And this is the second time auto flip</p>
<p> quit message is displayed, we need to restart manually to load app with mamsdk sdk mode.</p>
<p>And this is third time auto flip. App is now managed with MAMSDK mode.</p>
<p>The next fragment is focused on installed app.</p>
<p>The quit message will be shown when we open the app. Like the last fragment, flip to SecureHub, and complete sdk initialization process.</p>
<p>The optimized scheme is designed to resolve pain points of customer and some limitations of current scenario. Including:</p>
<ul>
<li>Remove quit alert</li>
<li>Since the first auto flip will  shown occasionally, there are at most two times auto flip</li>
<li>sdk intialization process run smoothly</li>
</ul>
<p>And this is a flow chart of sdk initialization on dual mode app for optimized scheme.There are two times auto flip and no quit alert appears anymore.</p>
<p>And then,  we could follow this video to check this demo.</p>
<p>this is the first time auto flip, and it will only show occasionally.</p>
<p>And this is the second time auto flip. App is now managed with MAMSDK mode.</p>
<p>9233</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">3902680129AE00D400F64428 /* MdxAgentAppBindProperties.m in Sources */,</span><br><span class="line">3902680029ADFE7C00F64428 /* MdxAgentAppBinder.m in Sources */,</span><br><span class="line">390267FF29ADFE7500F64428 /* IPCSettings.m in Sources */,</span><br><span class="line">390267FE29ADFE6D00F64428 /* CtxPasteboardHelper.m in Sources */,</span><br><span class="line">390267FD29ADFE5D00F64428 /* CtxKeyChainHelper.m in Sources */,</span><br><span class="line">390267FC29ADFBCB00F64428 /* CtxSingleSignOn.m in Sources */,</span><br><span class="line">390267FB29ADFB2F00F64428 /* CtxVaultEncryptionUtil.m in Sources */,</span><br><span class="line">390267FA29ADFAD400F64428 /* CtxSecureDataEncryptor.m in Sources */,</span><br><span class="line">390267F929ADFAA800F64428 /* CtxSecretVault.m in Sources */,</span><br><span class="line">390267F829ADFA6700F64428 /* MdxGenericVaultHelper.m in Sources */,</span><br><span class="line">390267F729ADFA5E00F64428 /* MdxExtensionUtils.m in Sources */,</span><br><span class="line">390267F629ADFA5600F64428 /* CtxVaultStore.m in Sources */,</span><br><span class="line">390267F529ADFA4E00F64428 /* MdxEncryptionUtils.m in Sources */,</span><br><span class="line">390267F429ADFA4300F64428 /* CtxVaultDataEnvelope.m in Sources */,</span><br><span class="line">390267F229ADF87100F64428 /* CtxVaultContainer.m in Sources */,</span><br><span class="line">390267F129ADF85C00F64428 /* CtxSharedKeychainVault.m in Sources */,</span><br><span class="line">390267F029ADF84C00F64428 /* CtxSharedKeychainMdxContainersUtil.m in Sources */,</span><br><span class="line">390267EF29ADF83A00F64428 /* CtxBasicContainer.m in Sources */,</span><br><span class="line">390265AB29ADF63400F64428 /* CtxUnmanagedContainer.m in Sources */,</span><br><span class="line">390265AA29ADF61C00F64428 /* CtxSharedVault.m in Sources */,</span><br><span class="line">390265A929ADF61600F64428 /* CtxSharedKeychainStore.m in Sources */,</span><br><span class="line">390265A829ADF60B00F64428 /* CtxSSORecord.m in Sources */,</span><br><span class="line">390265A729ADF60500F64428 /* CtxSSOKeyEncryptedVault.m in Sources */,</span><br><span class="line">390265A629ADF5F400F64428 /* CtxSSOKeyEncryptedDynamicVault.m in Sources */,</span><br><span class="line">390265A529ADF5ED00F64428 /* CtxSSOKeyEncryptedDynamicEnvelopeVault.m in Sources */,</span><br><span class="line">390265A429ADF5E200F64428 /* CtxKeyManager.m in Sources */,</span><br><span class="line">390265A329ADF5DB00F64428 /* CtxFindPasteboardStore.m in Sources */,</span><br><span class="line">390265A229ADF5CB00F64428 /* MdxGenericVault.m in Sources */,</span><br><span class="line">390265A129ADF5BE00F64428 /* CtxDeviceSharedStorage.m in Sources */,</span><br><span class="line">390265A029ADF5B800F64428 /* CtxInactivityPersistence.m in Sources */,</span><br><span class="line">3902659C29ADF54D00F64428 /* MdxFeatureMgrRequest.m in Sources */,</span><br><span class="line">3902659D29ADF54D00F64428 /* MdxFeatureMgr.m in Sources */,</span><br><span class="line">3902659E29ADF54D00F64428 /* MdxFeatureMgrService.m in Sources */,</span><br><span class="line">3902659F29ADF54D00F64428 /* MdxFeatureMgrConfig.m in Sources */,</span><br></pre></td></tr></table></figure>



<p>Wrapperlib:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">861E99651EFD5EEE00C62E43 /* MDXWrapperLib.h in Headers */,</span><br><span class="line">				861E96661EFAF33400C62E43 /* MDXCrashInfo.h in Headers */,</span><br><span class="line">				861E96631EFAF33400C62E43 /* MdxAppStoreActivationButtonTableViewCell.h in Headers */,</span><br><span class="line">				861E96641EFAF33400C62E43 /* MdxAppStoreActivationTextFieldTableViewCell.h in Headers */,</span><br><span class="line">				861E96651EFAF33400C62E43 /* MdxAppStoreActivationTextFieldWithAccessoryImages.h in Headers */,</span><br><span class="line">				861E96671EFAF33400C62E43 /* MDXPrivateAPI.h in Headers */,</span><br><span class="line">				861E96681EFAF33400C62E43 /* CtxSingleSignOn.h in Headers */,</span><br><span class="line">				861E96691EFAF33400C62E43 /* WrapLib.h in Headers */,</span><br><span class="line">				861E966F1EFAF33400C62E43 /* NSKeyedUnarchiver+ctx.h in Headers */,</span><br><span class="line">				861E96701EFAF33400C62E43 /* UIDevice+PasscodeStatus.h in Headers */,</span><br><span class="line">				861E96711EFAF33400C62E43 /* NSNotificationCenter+ctx.h in Headers */,</span><br><span class="line">				861E96761EFAF33400C62E43 /* AVPlayer+ctx.h in Headers */,</span><br><span class="line">				861E96771EFAF33400C62E43 /* UIImage+ctx.h in Headers */,</span><br><span class="line">				861E96781EFAF33400C62E43 /* UIImage+mdxEncryption.h in Headers */,</span><br><span class="line">				861E96791EFAF33400C62E43 /* UIWebView+ctx.h in Headers */,</span><br><span class="line">				861E967A1EFAF33400C62E43 /* QLPreviewController+ctx.h in Headers */,</span><br><span class="line">				861E967B1EFAF33400C62E43 /* URLFilter.h in Headers */,</span><br><span class="line">				861E967C1EFAF33400C62E43 /* AVAudioRecorder+CtxAVAudioRecorder.h in Headers */,</span><br><span class="line">				77D239BE217525CB0054F06D /* MdxEPDataProtectionPrivate.h in Headers */,</span><br><span class="line">				861E967D1EFAF33400C62E43 /* AVCaptureDevice+CtxAVCaptureDevice.h in Headers */,</span><br><span class="line">				861E967E1EFAF33400C62E43 /* CLLocationManager+CtxCLLocationManager.h in Headers */,</span><br><span class="line">				861E967F1EFAF33400C62E43 /* MethodSwizzling.h in Headers */,</span><br><span class="line">				861E96801EFAF33400C62E43 /* MFMailComposeViewController+CtxMFMailComposeViewController.h in Headers */,</span><br><span class="line">				861E96811EFAF33400C62E43 /* MFMessageComposeViewController+CtxMFMessageComposeViewController.h in Headers */,</span><br><span class="line">				861E96821EFAF33400C62E43 /* NSFileManager+CtxNSFileManager.h in Headers */,</span><br><span class="line">				861E96831EFAF33400C62E43 /* NSUbiquitousKeyValueStore+CtxNSUbiquitousKeyValueStore.h in Headers */,</span><br><span class="line">				861E96841EFAF33400C62E43 /* UIApplication+CtxUIApplication.h in Headers */,</span><br><span class="line">				861E96851EFAF33400C62E43 /* UIDevice+CtxUIDevice.h in Headers */,</span><br><span class="line">				861E96881EFAF33400C62E43 /* UIImagePickerController+CtxUIImagePickerController.h in Headers */,</span><br><span class="line">				861E968A1EFAF33400C62E43 /* UIPrintInteractionController+CtxUIPrintInteractionController.h in Headers */,</span><br><span class="line">				861E968B1EFAF33400C62E43 /* SLComposeViewController+ctx.h in Headers */,</span><br><span class="line">				861E968D1EFAF33400C62E43 /* NSURLConnection+CtxCertificate.h in Headers */,</span><br><span class="line">				861E968E1EFAF33400C62E43 /* UIWindow+ctx.h in Headers */,</span><br><span class="line">				861E968F1EFAF33400C62E43 /* AVAudioSession+ctx.h in Headers */,</span><br><span class="line">				861E96901EFAF33400C62E43 /* NSString+csv.h in Headers */,</span><br><span class="line">				861E96911EFAF33400C62E43 /* NSLocale+G11NSupport.h in Headers */,</span><br><span class="line">				861E96921EFAF33400C62E43 /* NSString+ArabicSupport.h in Headers */,</span><br><span class="line">				861E96931EFAF33400C62E43 /* NSFileManager+decryption.h in Headers */,</span><br><span class="line">				861E96A41EFAF33400C62E43 /* CtxFileMonitor.h in Headers */,</span><br><span class="line">				861E96A51EFAF33400C62E43 /* CtxFileProtectionMonitor.h in Headers */,</span><br><span class="line">				861E96A61EFAF33400C62E43 /* MdxServerRequestUtil.h in Headers */,</span><br><span class="line">				861E96A71EFAF33400C62E43 /* MdxSamlToken.h in Headers */,</span><br><span class="line">				861E96A81EFAF33400C62E43 /* MdxSTATicket.h in Headers */,</span><br><span class="line">				861E96A91EFAF33400C62E43 /* MdxServerAppData.h in Headers */,</span><br><span class="line">				861E96AA1EFAF33400C62E43 /* MdxShareFileConnectors.h in Headers */,</span><br><span class="line">				861E96AB1EFAF33400C62E43 /* MdxSSMobileAppData.h in Headers */,</span><br><span class="line">				861E96AC1EFAF33400C62E43 /* CtxURLRewriter.h in Headers */,</span><br><span class="line">				861E96AD1EFAF33400C62E43 /* SerializeUtility.h in Headers */,</span><br><span class="line">				861E96AE1EFAF33400C62E43 /* NSDate+NSDate_Utils.h in Headers */,</span><br><span class="line">				861E96AF1EFAF33400C62E43 /* SerializePropertyProtocol.h in Headers */,</span><br><span class="line">				861E96B01EFAF33400C62E43 /* MdxDeviceSharedStorage.h in Headers */,</span><br><span class="line">				861E96B11EFAF33400C62E43 /* MdxPersistedCacheVaultStore.h in Headers */,</span><br><span class="line">				861E96B21EFAF33400C62E43 /* MdxSSOKeyManager.h in Headers */,</span><br><span class="line">				861E96B31EFAF33400C62E43 /* MdxSharedVaultKeyManager.h in Headers */,</span><br><span class="line">				861E96B41EFAF33400C62E43 /* MdxSharedVaultUEKeyManager.h in Headers */,</span><br><span class="line">				861E96B51EFAF33400C62E43 /* MdxSSOKeyEncryptedVault.h in Headers */,</span><br><span class="line">				861E96B61EFAF33400C62E43 /* MdxSharedKeychainStore.h in Headers */,</span><br><span class="line">				861E96B71EFAF33400C62E43 /* MdxTCPConnection.h in Headers */,</span><br><span class="line">				861E96B81EFAF33400C62E43 /* MdxSharedKeychainVault.h in Headers */,</span><br><span class="line">				861E96B91EFAF33400C62E43 /* MdxSharedPBVault.h in Headers */,</span><br><span class="line">				861E96BA1EFAF33400C62E43 /* MdxSharedVaultConstants.h in Headers */,</span><br><span class="line">				861E96BB1EFAF33400C62E43 /* MdxUserEntropyVault.h in Headers */,</span><br><span class="line">				861E96BC1EFAF33400C62E43 /* MdxAppDataVault.h in Headers */,</span><br><span class="line">				861E96BD1EFAF33400C62E43 /* MdxGenericVault.h in Headers */,</span><br><span class="line">				4E77061C20DD92FE00C592A0 /* CtxUIDragInteraction.h in Headers */,</span><br><span class="line">				861E96BE1EFAF33400C62E43 /* MdxErrorCode.h in Headers */,</span><br><span class="line">				861E96BF1EFAF33400C62E43 /* CTXMAM_Config.h in Headers */,</span><br><span class="line">				861E96C01EFAF33400C62E43 /* MdxAppState.h in Headers */,</span><br><span class="line">				861E96C11EFAF33400C62E43 /* MdxAppInfo.h in Headers */,</span><br><span class="line">				861E96C41EFAF33400C62E43 /* MdxUILifeEventRouter.h in Headers */,</span><br><span class="line">				344D581E1FCF607B006D0802 /* NSPersistentStoreCoordinator+ctx.h in Headers */,</span><br><span class="line">				861E96C51EFAF33400C62E43 /* MdxUIOfflineChallenger.h in Headers */,</span><br><span class="line">				861E96C71EFAF33400C62E43 /* MdxNetworkOnlyUILifeEventRouter.h in Headers */,</span><br><span class="line">				861E96C81EFAF33400C62E43 /* MdxUIAppLifecycleBaseRouter.h in Headers */,</span><br><span class="line">				861E96C91EFAF33400C62E43 /* MdxCachedLifeEvents.h in Headers */,</span><br><span class="line">				861E96CA1EFAF33400C62E43 /* MdxUIOperations.h in Headers */,</span><br><span class="line">				77112C99218CC0F300A6DA54 /* MdxEPDataProtection+Migration.h in Headers */,</span><br><span class="line">				861E96CB1EFAF33400C62E43 /* ObscureViewController.h in Headers */,</span><br><span class="line">				861E96CC1EFAF33400C62E43 /* MdxWindow.h in Headers */,</span><br><span class="line">				861E96CD1EFAF33400C62E43 /* CTXMAM_InactivityTimer.h in Headers */,</span><br><span class="line">				861E96CE1EFAF33400C62E43 /* CTXMAM_StatusWatchdog.h in Headers */,</span><br><span class="line">				861E96CF1EFAF33400C62E43 /* CTXMAM_WrappedAppLib.h in Headers */,</span><br><span class="line">				007B4C1322D8D90E007B8509 /* MdxSDKModeControl.h in Headers */,</span><br><span class="line">				77D239BF217525D00054F06D /* MdxEPDataProtection+MigrationPrivate.h in Headers */,</span><br><span class="line">				FB841A6222CAA32100FAA68F /* MdxUNNotificationDelegate.h in Headers */,</span><br><span class="line">				861E96D01EFAF33400C62E43 /* CTXMAM_ReceiverInteractor.h in Headers */,</span><br><span class="line">				861E96D11EFAF33400C62E43 /* CTXMAM_PolicyEngine.h in Headers */,</span><br><span class="line">				861E96D21EFAF33400C62E43 /* CtxAppContainmentPolicy.h in Headers */,</span><br><span class="line">				861E96D31EFAF33400C62E43 /* MdxOnlineSessionRequiredGracePeriod.h in Headers */,</span><br><span class="line">				861E96D41EFAF33400C62E43 /* CTXMAM_AuthData.h in Headers */,</span><br><span class="line">				861E96D51EFAF33400C62E43 /* MdxAgentAppReBinding.h in Headers */,</span><br><span class="line">				861E96D61EFAF33400C62E43 /* CtxLockWipeHandler.h in Headers */,</span><br><span class="line">				861E96D71EFAF33400C62E43 /* CtxAlertEngineTest.h in Headers */,</span><br><span class="line">				861E96D81EFAF33400C62E43 /* CTXMAM_AlertEngine.h in Headers */,</span><br><span class="line">				77CC73F0218AB63800E539E1 /* MdxEPDataProtection.h in Headers */,</span><br><span class="line">				861E96D91EFAF33400C62E43 /* CtxAlertReponseHandler.h in Headers */,</span><br><span class="line">				861E96DA1EFAF33400C62E43 /* CtxAlertEngineCommon.h in Headers */,</span><br><span class="line">				861E96DB1EFAF33400C62E43 /* CtxMDXAlert.h in Headers */,</span><br><span class="line">				861E96DC1EFAF33400C62E43 /* CtxAlertPrompt.h in Headers */,</span><br><span class="line">				861E96DD1EFAF33400C62E43 /* UIAlertAction+CtxAlert.h in Headers */,</span><br><span class="line">				861E96DE1EFAF33400C62E43 /* UIAlertController+CtxAlert.h in Headers */,</span><br><span class="line">				861E96DF1EFAF33400C62E43 /* UIAlertView+CTXWLUIAlertView.h in Headers */,</span><br><span class="line">				861E96E01EFAF33400C62E43 /* MdxFileMigrationHelper.h in Headers */,</span><br><span class="line">				861E96E11EFAF33400C62E43 /* MdxLocationServices.h in Headers */,</span><br><span class="line">				861E96E21EFAF33400C62E43 /* CtxWiFiUtils.h in Headers */,</span><br><span class="line">				861E96E31EFAF33400C62E43 /* CtxOfflineAuthConstants.h in Headers */,</span><br><span class="line">				861E96E41EFAF33400C62E43 /* SecureOfflineChallenge.h in Headers */,</span><br><span class="line">				861E96E51EFAF33400C62E43 /* MdxSecureOfflinePINvalidator.h in Headers */,</span><br><span class="line">				861E96E61EFAF33400C62E43 /* MdxX1UICoordinator.h in Headers */,</span><br><span class="line">				861E96E71EFAF33400C62E43 /* MdxPremiumActivation.h in Headers */,</span><br><span class="line">				861E96E81EFAF33400C62E43 /* MdxAppStoreBaseViewController.h in Headers */,</span><br><span class="line">				861E96E91EFAF33400C62E43 /* MdxAppStoreActivationViewController.h in Headers */,</span><br><span class="line">				861E96EA1EFAF33400C62E43 /* BaseAuthFlowViewController.h in Headers */,</span><br><span class="line">				861E96EB1EFAF33400C62E43 /* WorxPasscodeViewController.h in Headers */,</span><br><span class="line">				861E96EC1EFAF33400C62E43 /* WorxPinViewController.h in Headers */,</span><br><span class="line">				861E96ED1EFAF33400C62E43 /* X1AuthenticationViewController.h in Headers */,</span><br><span class="line">				861E96EE1EFAF33400C62E43 /* CTXBaseViewController.h in Headers */,</span><br><span class="line">				861E96EF1EFAF33400C62E43 /* SerializePropertyProtocol.h in Headers */,</span><br><span class="line">				861E96F01EFAF33400C62E43 /* SerializeUtility.h in Headers */,</span><br><span class="line">				861E96F11EFAF33400C62E43 /* AGAuthUIInput.h in Headers */,</span><br><span class="line">				861E96F21EFAF33400C62E43 /* AGAuthUIOutput.h in Headers */,</span><br><span class="line">				861E96F31EFAF33400C62E43 /* UIButton+Blocks.h in Headers */,</span><br><span class="line">				861E96F41EFAF33400C62E43 /* UIButton+Utils.h in Headers */,</span><br><span class="line">				FB841A5B22CA83BD00FAA68F /* UNUserNotificationCenter+UNUserNotificationCenter_apploader.h in Headers */,</span><br><span class="line">				861E96F51EFAF33400C62E43 /* UIColor+Utils.h in Headers */,</span><br><span class="line">				861E96F61EFAF33400C62E43 /* UIFont+Utils.h in Headers */,</span><br><span class="line">				861E96F71EFAF33400C62E43 /* UILabel+Utils.h in Headers */,</span><br><span class="line">				861E96F81EFAF33400C62E43 /* UITableView+Utils.h in Headers */,</span><br><span class="line">				861E96F91EFAF33400C62E43 /* UITextField+Utils.h in Headers */,</span><br><span class="line">				861E96FA1EFAF33400C62E43 /* RIButtonItem.h in Headers */,</span><br><span class="line">				861E96FB1EFAF33400C62E43 /* UIColor+CustomColors.h in Headers */,</span><br><span class="line">				861E96FC1EFAF33400C62E43 /* UIValidationProtocol.h in Headers */,</span><br><span class="line">				861E96FD1EFAF33400C62E43 /* TextFieldWithAccessoryImages.h in Headers */,</span><br><span class="line">				861E96FE1EFAF33400C62E43 /* MdxTableViewCell.h in Headers */,</span><br><span class="line">				861E96FF1EFAF33400C62E43 /* CTXSpinnerTableViewCell.h in Headers */,</span><br><span class="line">				861E97001EFAF33400C62E43 /* DualButtonTableViewCell.h in Headers */,</span><br><span class="line">				861E97011EFAF33400C62E43 /* ErrorTableViewCell.h in Headers */,</span><br><span class="line">				861E97031EFAF33400C62E43 /* ImageTableViewCell.h in Headers */,</span><br><span class="line">				861E97041EFAF33400C62E43 /* NextButtonTableViewCell.h in Headers */,</span><br><span class="line">				861E97051EFAF33400C62E43 /* TextFieldTableViewCell.h in Headers */,</span><br><span class="line">				861E97061EFAF33400C62E43 /* TextTableViewCell.h in Headers */,</span><br><span class="line">				861E97071EFAF33400C62E43 /* WorxPINTableViewCell.h in Headers */,</span><br><span class="line">				861E97081EFAF33400C62E43 /* CTXSpinnerView.h in Headers */,</span><br><span class="line">				861E97091EFAF33400C62E43 /* PopupView.h in Headers */,</span><br><span class="line">				861E970A1EFAF33400C62E43 /* WorxPinConstraints.h in Headers */,</span><br><span class="line">				861E970B1EFAF33400C62E43 /* CAMCommonFormsParser.h in Headers */,</span><br><span class="line">				861E970C1EFAF33400C62E43 /* CAMDSConstants.h in Headers */,</span><br><span class="line">				861E970D1EFAF33400C62E43 /* CAMDSUtil.h in Headers */,</span><br><span class="line">				861E970E1EFAF33400C62E43 /* CAMFormsElements.h in Headers */,</span><br><span class="line">				861E970F1EFAF33400C62E43 /* AsyncHttpLite.h in Headers */,</span><br><span class="line">				861E97101EFAF33400C62E43 /* CTXMAM_PersistentDataC.h in Headers */,</span><br><span class="line">				861E97111EFAF33400C62E43 /* CTXMAM_PersistentData.h in Headers */,</span><br><span class="line">				861E97121EFAF33400C62E43 /* CtxCrashReportManager.h in Headers */,</span><br><span class="line">				861E97131EFAF33400C62E43 /* MDXCrashInfo.h in Headers */,</span><br><span class="line">				861E97141EFAF33400C62E43 /* WrapLibHelper.h in Headers */,</span><br><span class="line">				861E97161EFAF33400C62E43 /* DSConstants.h in Headers */,</span><br><span class="line">				861E97171EFAF33400C62E43 /* RTLSupport.h in Headers */,</span><br><span class="line">				861E97181EFAF33400C62E43 /* RTLUITextField.h in Headers */,</span><br><span class="line">				861E97191EFAF33400C62E43 /* UIDevice+RTLSupport.h in Headers */,</span><br><span class="line">				861E971A1EFAF33400C62E43 /* UIImageView+RTLSupport.h in Headers */,</span><br><span class="line">				861E971B1EFAF33400C62E43 /* UIView+RTLSupport.h in Headers */,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">86B314701EFABF3900EBE9FE /* CtxDebuggingHelper.m in Sources */,</span><br><span class="line">				8693D88B1ED5D4CC00B6F0C8 /* GCDAsyncSocket.m in Sources */,</span><br><span class="line">				8693D8981ED5D4CC00B6F0C8 /* Helper.m in Sources */,</span><br><span class="line">				8693D8961ED5D4CC00B6F0C8 /* CtxEncoder.m in Sources */,</span><br><span class="line">				8693D88A1ED5D4CC00B6F0C8 /* CtxTCPSocketUtil.m in Sources */,</span><br><span class="line">				8693D8821ED5D4CC00B6F0C8 /* CtxSSOKeyManager.m in Sources */,</span><br><span class="line">				8693D87C1ED5D4CC00B6F0C8 /* CtxSSOKeyEncryptedVault.m in Sources */,</span><br><span class="line">				8693D8851ED5D4CC00B6F0C8 /* CtxVaultStore.m in Sources */,</span><br><span class="line">				8693D88E1ED5D4CC00B6F0C8 /* CtxSharedKeychainVault.m in Sources */,</span><br><span class="line">				8693D89B1ED5D4CC00B6F0C8 /* LogHelper.m in Sources */,</span><br><span class="line">				8693D8791ED5D4CC00B6F0C8 /* CtxUnmanagedContainer.m in Sources */,</span><br><span class="line">				8693D8901ED5D4CC00B6F0C8 /* CtxUrlForwardHelper.m in Sources */,</span><br><span class="line">				8693D89A1ED5D4CC00B6F0C8 /* CtxPasteboardHelper.m in Sources */,</span><br><span class="line">				8693D87D1ED5D4CC00B6F0C8 /* CtxSSOKeyEncryptedDynamicVault.m in Sources */,</span><br><span class="line">				8693D88F1ED5D4CC00B6F0C8 /* CtxVersion.m in Sources */,</span><br><span class="line">				8693D8781ED5D4CC00B6F0C8 /* CtxBasicContainer.m in Sources */,</span><br><span class="line">				8693D8921ED5D4CC00B6F0C8 /* Reachability.m in Sources */,</span><br><span class="line">				8693D88D1ED5D4CC00B6F0C8 /* CtxSharedDataNetworkSyncClient.m in Sources */,</span><br><span class="line">				8693D89C1ED5D4CC00B6F0C8 /* PolicyUtil.m in Sources */,</span><br><span class="line">				8693D87A1ED5D4CC00B6F0C8 /* CtxSSORecord.m in Sources */,</span><br><span class="line">				8693D87F1ED5D4CC00B6F0C8 /* CtxSSOKeyEncryptedDynamicEnvelopeVault.m in Sources */,</span><br><span class="line">				8693D8741ED5D4CC00B6F0C8 /* CtxDeviceSharedStorage.m in Sources */,</span><br><span class="line">				8693D8991ED5D4CC00B6F0C8 /* ToastAlikeNotificationView.m in Sources */,</span><br><span class="line">				8693D88C1ED5D4CC00B6F0C8 /* CtxSharedDataNetworkSyncUtil.m in Sources */,</span><br><span class="line">				8693D8911ED5D4CC00B6F0C8 /* CtxSharedKeychainMdxContainersUtil.m in Sources */,</span><br><span class="line">				8693D8951ED5D4CC00B6F0C8 /* SFHFKeyChainUtils.m in Sources */,</span><br><span class="line">				8693D87B1ED5D4CC00B6F0C8 /* CtxVaultContainer.m in Sources */,</span><br><span class="line">				8693D89E1ED5D4CC00B6F0C8 /* MAMSharedLib.m in Sources */,</span><br><span class="line">				8693D8831ED5D4CC00B6F0C8 /* CtxSecureDataEncryptor.m in Sources */,</span><br><span class="line">				8693D8871ED5D4CC00B6F0C8 /* CtxVaultEncryptionUtil.m in Sources */,</span><br><span class="line">				8693D8771ED5D4CC00B6F0C8 /* CtxInactivityPersistence.m in Sources */,</span><br><span class="line">				8693D8971ED5D4CC00B6F0C8 /* CtxKeyChainHelper.m in Sources */,</span><br><span class="line">				8693D8941ED5D4CC00B6F0C8 /* CRKeychainInterface.m in Sources */,</span><br><span class="line">				8693D8751ED5D4CC00B6F0C8 /* CtxFindPasteboardStore.m in Sources */,</span><br><span class="line">				8693D89D1ED5D4CC00B6F0C8 /* PolicyChecker.m in Sources */,</span><br><span class="line">				8693D8891ED5D4CC00B6F0C8 /* MdxTCPClient.m in Sources */,</span><br><span class="line">				8693D8881ED5D4CC00B6F0C8 /* MdxGenericVaultHelper.m in Sources */,</span><br><span class="line">				8693D8801ED5D4CC00B6F0C8 /* CtxSharedVault.m in Sources */,</span><br><span class="line">				8693D8861ED5D4CC00B6F0C8 /* CtxSecretVault.m in Sources */,</span><br><span class="line">				8693D8841ED5D4CC00B6F0C8 /* CtxUEKeyManager.m in Sources */,</span><br><span class="line">				8693D87E1ED5D4CC00B6F0C8 /* CtxVaultDataEnvelope.m in Sources */,</span><br><span class="line">				8693D8761ED5D4CC00B6F0C8 /* CtxSharedKeychainStore.m in Sources */,</span><br><span class="line">				8693D8811ED5D4CC00B6F0C8 /* CtxKeyManager.m in Sources */,</span><br></pre></td></tr></table></figure>

<p>9758 分割线</p>
<h1 id="Eliminate-flips"><a href="#Eliminate-flips" class="headerlink" title="Eliminate flips"></a>Eliminate flips</h1><h2 id="keychain"><a href="#keychain" class="headerlink" title="keychain"></a>keychain</h2><h3 id="for-first-party-apps"><a href="#for-first-party-apps" class="headerlink" title="for first party apps"></a>for first party apps</h3><p>VaultName: @”MAMSDKSharedData” </p>
<ul>
<li>#define kCTXSSO_HUB_AUTH_INFO            @”SharedAuthHubInfo”</li>
<li>#define kCTXSSO_ACCOUNTSSTOREPROPERTIES			@”AccountsStoreProperties”</li>
<li>#define kCTXSSO_APPS_INFO              @”appsinfo”</li>
<li>#define kCTXMDXRxPB_UE_METADATA       @”UserEntropyMetadata”</li>
<li>#define kCTXSSO_HUB_UNMANAGED_INFO         @”UnmanagedInfo”   —- [<strong>self</strong> generateUnmanagedData]</li>
<li>#define kCTXSSO_SUPPORTS_MAMAPPDATA_SHARING     @”supportsMAMAppDataSharing”</li>
</ul>
<h3 id="for-third-party-apps"><a href="#for-third-party-apps" class="headerlink" title="for third party apps"></a>for third party apps</h3><ol>
<li><p><strong>UNMANAGED_CONTAINER_NAME        @”CitrixMDXData1”</strong></p>
</li>
<li><p><strong>SSORECORD_NAME             @”CitrixMDXData2”</strong></p>
</li>
<li><p><strong>SSO_ENCRYPTED_VAULT_NAME        @”CitrixMDXData3”</strong></p>
</li>
<li><p><strong>SSO_ENCRYPTED_DYNAMIC_VAULT_NAME    @”CitrixMDXData5”</strong></p>
</li>
<li><p><strong>SHARED_VAULT_NAME            @”CitrixMDXData4”</strong></p>
</li>
</ol>
<h2 id="How-to-sync-MobileAppData"><a href="#How-to-sync-MobileAppData" class="headerlink" title="How to sync MobileAppData"></a>How to sync MobileAppData</h2><h3 id="Data-sharing-over-TCP"><a href="#Data-sharing-over-TCP" class="headerlink" title="Data sharing over TCP:"></a>Data sharing over TCP:</h3><p>(NSDictionary*)requestOverTCP</p>
<h3 id="Sync-MobileAppData-to-keychain"><a href="#Sync-MobileAppData-to-keychain" class="headerlink" title="Sync MobileAppData to keychain"></a>Sync MobileAppData to keychain</h3><ul>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ManagedbySHandMDX/MAMSDK">Managed by SH and MDX&#x2F;MAMSDK</a><ul>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ForFirstPartyApps">For First Party Apps</a></li>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ForThirdPartyApps">For Third Party Apps</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://info.citrite.net/pages/viewpage.action?spaceKey=xenmobile&title=Mam+SDK+Required+Update+Press+Quit+to+close+the+app#MamSDKRequiredUpdatePressQuittoclosetheapp-ManagedbyMAMSDK">Managed by MAM SDK</a></li>
</ul>
<h1 id="iOS-kechain"><a href="#iOS-kechain" class="headerlink" title="iOS kechain"></a>iOS kechain</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line"></span><br><span class="line">class CtxVaultContainer &#123;</span><br><span class="line"># - (id)initWithName:(NSString *) name store:(CtxFindPasteboardStore *) store;</span><br><span class="line"></span><br><span class="line"># - (BOOL)        synchronizeWithError: (NSError **) error;</span><br><span class="line"></span><br><span class="line"># - (NSDictionary *)    getUnencryptedContent;                          // getter is used by WorxHome to get the content out</span><br><span class="line"></span><br><span class="line"># - (void)        setUnencryptedContent: (NSDictionary *) content;      // setting is used by MDX to directly set the content</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class CtxBasicContainer &#123;</span><br><span class="line">- CtxKeyManager *     _keyManager;</span><br><span class="line"></span><br><span class="line">- NSString * containerName;</span><br><span class="line"></span><br><span class="line">- NSMutableDictionary * internalDictionary;</span><br><span class="line"></span><br><span class="line">- NSString * containerDescription;</span><br><span class="line"></span><br><span class="line">- CtxFindPasteboardStore * vaultStore;</span><br><span class="line"></span><br><span class="line"># - (id)initWithName:(NSString *) name store:(CtxFindPasteboardStore *) store;</span><br><span class="line"></span><br><span class="line"># - (void)initializeWithName: (NSString *) name store:(CtxFindPasteboardStore *) store;</span><br><span class="line"></span><br><span class="line"># - (id) getValueForKey: (NSString *) keyName error: (NSError **) error;</span><br><span class="line"></span><br><span class="line"># - (BOOL) setValueForKey: (NSString *) keyName value: (id) data error: (NSError **) error;</span><br><span class="line"></span><br><span class="line"># - (BOOL) deleteItemForKey: (NSString *) keyName error: (NSError **) error;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class NSObject</span><br><span class="line"></span><br><span class="line">CtxVaultContainer --|&gt; CtxBasicContainer</span><br><span class="line">CtxBasicContainer --|&gt; NSObject</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Containment%20SDK%20Deprecated%20Usage/deprecated%20usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/Containment%20SDK%20Deprecated%20Usage/deprecated%20usage/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<h1 id="Containment-SDK"><a href="#Containment-SDK" class="headerlink" title="Containment SDK"></a>Containment SDK</h1><p>The Containment library supports the following policies:</p>
<ul>
<li>Cut and copy</li>
<li>Paste</li>
<li>Document exchange (Open In)</li>
<li>Restricted Open-In exception list</li>
<li>Inbound document exchange (Open In)</li>
<li>Inbound document exchange allow list</li>
<li>App URL schemes</li>
<li>Allowed URLs</li>
<li>Block camera</li>
<li>Block photo library</li>
<li>Block mic record</li>
<li>Block dictation</li>
<li>Block location services</li>
<li>Block SMS compose</li>
<li>Block iCloud</li>
<li>Block lookup</li>
<li>Block file backup</li>
<li>Block AirPrint</li>
<li>Block AirDrop</li>
<li>Block Facebook and Twitter APIs</li>
<li>Obscure screen contents</li>
<li>Block third-party keyboards (iOS 11+ only)</li>
<li>Center point longitude</li>
<li>Center point latitude</li>
<li>Radius</li>
<li>Mail Redirection</li>
</ul>
<h1 id="Functional-Side"><a href="#Functional-Side" class="headerlink" title="Functional Side"></a>Functional Side</h1><h2 id="Cut-And-Copy、Paste、Lookup"><a href="#Cut-And-Copy、Paste、Lookup" class="headerlink" title="Cut And Copy、Paste、Lookup"></a>Cut And Copy、Paste、Lookup</h2><p><strong>Implemented</strong>. </p>
<p>Swizzle method in <code>UIEditMenuInteraction</code></p>
<h2 id="Document-Exchange"><a href="#Document-Exchange" class="headerlink" title="Document Exchange"></a>Document Exchange</h2><p><strong>Implemented.</strong></p>
<p>Swizzle method in <code>UIActivityViewController</code></p>
<h2 id="App-URL-schemes"><a href="#App-URL-schemes" class="headerlink" title="App URL schemes"></a>App URL schemes</h2><h2 id="Allowed-URLs"><a href="#Allowed-URLs" class="headerlink" title="Allowed URLs"></a>Allowed URLs</h2><h2 id="Block-Camera"><a href="#Block-Camera" class="headerlink" title="Block Camera"></a>Block Camera</h2><p><strong>Implemented.</strong></p>
<p>Old version: Swizzle method in <code>AVCaptureDevice</code></p>
<p>New version: Swizzle method in <code>AVCaptureDeviceDiscoverySession</code></p>
<h2 id="Block-Photo-Library"><a href="#Block-Photo-Library" class="headerlink" title="Block Photo Library"></a>Block Photo Library</h2><p><strong>Implemented.</strong></p>
<p>Old version: Swizzle method in <code>UIImagePickerController</code></p>
<p>New version: Swizzle method in <code>PHPickerViewController</code></p>
<h2 id="Block-mic-record"><a href="#Block-mic-record" class="headerlink" title="Block mic record"></a>Block mic record</h2><p>Implemented in <code>AVAudioRecorder</code> and  <code>AVAudioSession</code> class</p>
<h3 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3><ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/avfaudio/avaudiosession/1616463-recordpermission?language=objc"><code>recordPermission</code></a> API is deprecated. Use <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/avfaudio/avaudioapplication/4144304-recordpermission?language=objc"><code>recordPermission</code></a> on <code>AVAudioApplication</code> instead.</li>
</ul>
<h2 id="Block-dictation"><a href="#Block-dictation" class="headerlink" title="Block dictation"></a>Block dictation</h2><p>Implemented in <code>ctxUIDictationController_dictationEnabled</code> which swizzle <a target="_blank" rel="noopener" href="https://developer.limneos.net/index.php?ios=16.3&framework=UIKitCore.framework&header=UIDictationController.h">UIKitCore-UIDictationController</a></p>
<h2 id="Block-location-services"><a href="#Block-location-services" class="headerlink" title="Block location services"></a>Block location services</h2><p>Implemented in <code>ctxStartUpdatingLocation</code> method which swizzle <code>CLLocationManager</code> class</p>
<h2 id="Block-SMS-compose"><a href="#Block-SMS-compose" class="headerlink" title="Block SMS compose"></a>Block SMS compose</h2><p>Implemented in <code>ctxInitWithNibName</code> and <code>ctxCanSendText</code> methods which swizzle <code>MFMessageComposeViewController</code> class.</p>
<h2 id="Block-iCloud"><a href="#Block-iCloud" class="headerlink" title="Block iCloud"></a>Block iCloud</h2><h3 id="TODO-1"><a href="#TODO-1" class="headerlink" title="TODO"></a>TODO</h3><ul>
<li><input disabled="" type="checkbox"> UIDocumentMenuViewController is deprecated</li>
</ul>
<h2 id="Block-file-backup"><a href="#Block-file-backup" class="headerlink" title="Block file backup"></a>Block file backup</h2><p>implemented in <code>-[CTXMAMContainment blockBackup]</code> </p>
<h2 id="Block-AirPrint"><a href="#Block-AirPrint" class="headerlink" title="Block AirPrint"></a>Block AirPrint</h2><p>implemented in <code>UIPrintInteractionController</code> class.</p>
<h2 id="Block-AirDrop"><a href="#Block-AirDrop" class="headerlink" title="Block AirDrop"></a>Block AirDrop</h2><p>Implemented in method <code>initWithActivityItems</code> in <code>UIActivityViewController</code> class.</p>
<p>Add UIActivityTypes -  <code>UIActivityTypeAirDrop</code> to exclude list.</p>
<p>UIActivityTypes: <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/uiactivitytype?language=objc">https://developer.apple.com/documentation/uikit/uiactivitytype?language=objc</a></p>
<h2 id="Block-Facebook-and-Twitter-APIs"><a href="#Block-Facebook-and-Twitter-APIs" class="headerlink" title="Block Facebook and Twitter APIs"></a>Block Facebook and Twitter APIs</h2><p>Implemented in method <code>initWithActivityItems</code> in <code>UIActivityViewController</code> class.</p>
<p>Add UIActivityTypes -  <code>UIActivityTypePostToFacebook</code> and <code>UIActivityTypePostToTwitter</code> to exclude list.</p>
<h2 id="Obscure-screen-contents"><a href="#Obscure-screen-contents" class="headerlink" title="Obscure screen contents"></a>Obscure screen contents</h2><p>Call <code>+[CTXMAMConcealScreenManagerProxy concealScreen:options:]</code> to obscure contens when app enter background.</p>
<h2 id="Block-third-party-keyboards"><a href="#Block-third-party-keyboards" class="headerlink" title="Block third-party keyboards"></a>Block third-party keyboards</h2><p>Swizzle method - <code>- (BOOL)application:(UIApplication *)application shouldAllowExtensionPointIdentifier:(UIApplicationExtensionPointIdentifier)extensionPointIdentifier</code></p>
<p>Check extension point identifiers called <code>UIApplicationKeyboardExtensionPointIdentifier</code> to block third keyboard.</p>
<h2 id="Center-point-longitude-Center-point-latitude-Radius"><a href="#Center-point-longitude-Center-point-latitude-Radius" class="headerlink" title="Center point longitude Center point latitude Radius"></a>Center point longitude Center point latitude Radius</h2><p>Compare last GPS position with location(longitude、latitude and radius) defined in policy, app will be locked if location  exceed to the pre-defined locaiton.</p>
<h1 id="Swizzle"><a href="#Swizzle" class="headerlink" title="Swizzle"></a>Swizzle</h1><ul>
<li>Action1: Original class will be added a new method with <code>ctx</code> prefix. <ul>
<li>Define <code>catergory</code></li>
<li>Define Class, use <code>class_getInstanceMethod</code> and <code>method_getImplementation</code> and <code>class_addMethod</code> which are implemented in <code>addAppCall</code> and <code>swizzleInstanceMethod</code></li>
</ul>
</li>
<li>Action2: The original method’s implementation will be replaced with <code>ctx</code> prefix method which is defined in category.<ul>
<li>Use <code>method_exchangeImplementations</code> which is implemented in <code>swizzleMethod</code> and <code>swizzleClassMethod</code></li>
<li>Use use <code>class_getInstanceMethod</code> and <code>method_getImplementation</code> and <code>method_setImplementation</code> which are implemented in <code>addAppCall</code> and <code> swizzleInstanceMethod</code></li>
</ul>
</li>
</ul>
<h2 id="Swizzle-Private-Method"><a href="#Swizzle-Private-Method" class="headerlink" title="Swizzle Private Method"></a>Swizzle Private Method</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><ul>
<li><p>addAppCall: widely used in class and private method scenarios.</p>
</li>
<li><p>swizzleInstanceMethod: widely used in</p>
</li>
</ul>
<h3 id="Implementaion"><a href="#Implementaion" class="headerlink" title="Implementaion"></a>Implementaion</h3><ul>
<li>class_getInstanceMethod</li>
<li>method_getImplementation</li>
<li>method_setImplementation</li>
<li>class_addMethod</li>
</ul>
<h2 id="Swizzle-Public-Method"><a href="#Swizzle-Public-Method" class="headerlink" title="Swizzle Public Method"></a>Swizzle Public Method</h2><h3 id="API-1"><a href="#API-1" class="headerlink" title="API"></a>API</h3><ul>
<li><p>swizzleMethod</p>
</li>
<li><p>swizzleClassMethod</p>
</li>
</ul>
<h3 id="Implementaion-1"><a href="#Implementaion-1" class="headerlink" title="Implementaion"></a>Implementaion</h3><ul>
<li>class_getInstanceMethod</li>
<li>method_exchangeImplementations</li>
</ul>
<h3 id="Swizzle-None-Released-Method"><a href="#Swizzle-None-Released-Method" class="headerlink" title="Swizzle None-Released Method"></a>Swizzle None-Released Method</h3><p>Define a new class like <code>CTXMAMUIActivity</code>. Some APIs are not published in latest release Xcode version. For example, <code>AVAudioApplication</code> is now only on iOS 17 which need Xcode15 beta version.</p>
<h1 id="Code-Side"><a href="#Code-Side" class="headerlink" title="Code Side"></a>Code Side</h1><h2 id="ALAssetsLibrary"><a href="#ALAssetsLibrary" class="headerlink" title="ALAssetsLibrary"></a>ALAssetsLibrary</h2><blockquote>
<p>The Assets Library framework is deprecated as of iOS 9.0. Instead, use the Photos framework instead, which in iOS 8.0 and later provides more features and better performance for working with a user’s photo library. For more information, see <code>Photos</code>.</p>
<p>In the Photos framework, the <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/photokit/phphotolibrary?language=objc"><code>PHPhotoLibrary</code></a> class manages access to and changes in the photo library, and class methods on the <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/photokit/phasset?language=objc"><code>PHAsset</code></a> and <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/photokit/phcollection?language=objc"><code>PHCollection</code></a> classes and related classes provide functionality for finding photo and video assets.</p>
</blockquote>
<p>Below swizzling methods are all deprecated.</p>
<ul>
<li><p><strong>authorizationStatus</strong>: implemented in<code> PHPhotoLibrary (ctx)</code></p>
</li>
<li><p>enumerateGroupsWithTypes</p>
</li>
<li><p>writeImageDataToSavedPhotosAlbum</p>
</li>
</ul>
<h2 id="AVAudioRecorder"><a href="#AVAudioRecorder" class="headerlink" title="AVAudioRecorder"></a>AVAudioRecorder</h2><p>All swizzled methods are fine, not need to be updated</p>
<h2 id="AVAudioSession"><a href="#AVAudioSession" class="headerlink" title="AVAudioSession"></a>AVAudioSession</h2><p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/avfaudio/avaudiosession/1616463-recordpermission?language=objc"><code>recordPermission</code></a>: </p>
<p>Deprecated. Use <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/avfaudio/avaudioapplication/4144304-recordpermission?language=objc"><code>recordPermission</code></a> on <code>AVAudioApplication</code> instead.</p>
<h2 id="…"><a href="#…" class="headerlink" title="…"></a>…</h2><p>All fine</p>
<h2 id="UIActivityViewController"><a href="#UIActivityViewController" class="headerlink" title="UIActivityViewController"></a>UIActivityViewController</h2><h2 id="UIDocumentMenuViewController"><a href="#UIDocumentMenuViewController" class="headerlink" title="UIDocumentMenuViewController"></a>UIDocumentMenuViewController</h2>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/uncategorized/officeDocuments/officeDocs/MAM/MAM%20SDK%20RELEASE/24.3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Supremes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/11/uncategorized/officeDocuments/officeDocs/MAM/MAM%20SDK%20RELEASE/24.3/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-11-26 15:30:03" itemprop="dateCreated datePublished" datetime="2025-11-26T15:30:03+08:00">2025-11-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>24.2 Cut:</p>
<p>Except below two repos.</p>
<p>24.3 Cut:</p>
<ul>
<li><p><input disabled="" type="checkbox"> 
iOSSDK_CTXMAMAppCore </p>
</li>
<li><p><input disabled="" type="checkbox"> 
iOSSDK_CTXMAMContainment</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Supremes</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
